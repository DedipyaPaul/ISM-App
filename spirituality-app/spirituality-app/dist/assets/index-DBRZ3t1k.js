(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();var Ad={exports:{}},_l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function YS(){if(m_)return _l;m_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return _l.Fragment=t,_l.jsx=i,_l.jsxs=i,_l}var p_;function XS(){return p_||(p_=1,Ad.exports=YS()),Ad.exports}var Q=XS(),bd={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function WS(){if(g_)return It;g_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.iterator;function D(I){return I===null||typeof I!="object"?null:(I=C&&I[C]||I["@@iterator"],typeof I=="function"?I:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,rt={};function J(I,X,it){this.props=I,this.context=X,this.refs=rt,this.updater=it||q}J.prototype.isReactComponent={},J.prototype.setState=function(I,X){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,X,"setState")},J.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function Tt(){}Tt.prototype=J.prototype;function yt(I,X,it){this.props=I,this.context=X,this.refs=rt,this.updater=it||q}var ht=yt.prototype=new Tt;ht.constructor=yt,W(ht,J.prototype),ht.isPureReactComponent=!0;var qt=Array.isArray,St={H:null,A:null,T:null,S:null,V:null},Ht=Object.prototype.hasOwnProperty;function x(I,X,it,$,ct,Rt){return it=Rt.ref,{$$typeof:r,type:I,key:X,ref:it!==void 0?it:null,props:Rt}}function A(I,X){return x(I.type,X,void 0,void 0,void 0,I.props)}function w(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function N(I){var X={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(it){return X[it]})}var M=/\/+/g;function V(I,X){return typeof I=="object"&&I!==null&&I.key!=null?N(""+I.key):X.toString(36)}function R(){}function ce(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(R,R):(I.status="pending",I.then(function(X){I.status==="pending"&&(I.status="fulfilled",I.value=X)},function(X){I.status==="pending"&&(I.status="rejected",I.reason=X)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function ie(I,X,it,$,ct){var Rt=typeof I;(Rt==="undefined"||Rt==="boolean")&&(I=null);var mt=!1;if(I===null)mt=!0;else switch(Rt){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(I.$$typeof){case r:case t:mt=!0;break;case S:return mt=I._init,ie(mt(I._payload),X,it,$,ct)}}if(mt)return ct=ct(I),mt=$===""?"."+V(I,0):$,qt(ct)?(it="",mt!=null&&(it=mt.replace(M,"$&/")+"/"),ie(ct,X,it,"",function(mn){return mn})):ct!=null&&(w(ct)&&(ct=A(ct,it+(ct.key==null||I&&I.key===ct.key?"":(""+ct.key).replace(M,"$&/")+"/")+mt)),X.push(ct)),1;mt=0;var ve=$===""?".":$+":";if(qt(I))for(var Ft=0;Ft<I.length;Ft++)$=I[Ft],Rt=ve+V($,Ft),mt+=ie($,X,it,Rt,ct);else if(Ft=D(I),typeof Ft=="function")for(I=Ft.call(I),Ft=0;!($=I.next()).done;)$=$.value,Rt=ve+V($,Ft++),mt+=ie($,X,it,Rt,ct);else if(Rt==="object"){if(typeof I.then=="function")return ie(ce(I),X,it,$,ct);throw X=String(I),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return mt}function H(I,X,it){if(I==null)return I;var $=[],ct=0;return ie(I,$,"","",function(Rt){return X.call(it,Rt,ct++)}),$}function nt(I){if(I._status===-1){var X=I._result;X=X(),X.then(function(it){(I._status===0||I._status===-1)&&(I._status=1,I._result=it)},function(it){(I._status===0||I._status===-1)&&(I._status=2,I._result=it)}),I._status===-1&&(I._status=0,I._result=X)}if(I._status===1)return I._result.default;throw I._result}var st=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function Pt(){}return It.Children={map:H,forEach:function(I,X,it){H(I,function(){X.apply(this,arguments)},it)},count:function(I){var X=0;return H(I,function(){X++}),X},toArray:function(I){return H(I,function(X){return X})||[]},only:function(I){if(!w(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},It.Component=J,It.Fragment=i,It.Profiler=l,It.PureComponent=yt,It.StrictMode=s,It.Suspense=g,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=St,It.__COMPILER_RUNTIME={__proto__:null,c:function(I){return St.H.useMemoCache(I)}},It.cache=function(I){return function(){return I.apply(null,arguments)}},It.cloneElement=function(I,X,it){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var $=W({},I.props),ct=I.key,Rt=void 0;if(X!=null)for(mt in X.ref!==void 0&&(Rt=void 0),X.key!==void 0&&(ct=""+X.key),X)!Ht.call(X,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&X.ref===void 0||($[mt]=X[mt]);var mt=arguments.length-2;if(mt===1)$.children=it;else if(1<mt){for(var ve=Array(mt),Ft=0;Ft<mt;Ft++)ve[Ft]=arguments[Ft+2];$.children=ve}return x(I.type,ct,void 0,void 0,Rt,$)},It.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:c,_context:I},I},It.createElement=function(I,X,it){var $,ct={},Rt=null;if(X!=null)for($ in X.key!==void 0&&(Rt=""+X.key),X)Ht.call(X,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(ct[$]=X[$]);var mt=arguments.length-2;if(mt===1)ct.children=it;else if(1<mt){for(var ve=Array(mt),Ft=0;Ft<mt;Ft++)ve[Ft]=arguments[Ft+2];ct.children=ve}if(I&&I.defaultProps)for($ in mt=I.defaultProps,mt)ct[$]===void 0&&(ct[$]=mt[$]);return x(I,Rt,void 0,void 0,null,ct)},It.createRef=function(){return{current:null}},It.forwardRef=function(I){return{$$typeof:p,render:I}},It.isValidElement=w,It.lazy=function(I){return{$$typeof:S,_payload:{_status:-1,_result:I},_init:nt}},It.memo=function(I,X){return{$$typeof:_,type:I,compare:X===void 0?null:X}},It.startTransition=function(I){var X=St.T,it={};St.T=it;try{var $=I(),ct=St.S;ct!==null&&ct(it,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(Pt,st)}catch(Rt){st(Rt)}finally{St.T=X}},It.unstable_useCacheRefresh=function(){return St.H.useCacheRefresh()},It.use=function(I){return St.H.use(I)},It.useActionState=function(I,X,it){return St.H.useActionState(I,X,it)},It.useCallback=function(I,X){return St.H.useCallback(I,X)},It.useContext=function(I){return St.H.useContext(I)},It.useDebugValue=function(){},It.useDeferredValue=function(I,X){return St.H.useDeferredValue(I,X)},It.useEffect=function(I,X,it){var $=St.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(I,X)},It.useId=function(){return St.H.useId()},It.useImperativeHandle=function(I,X,it){return St.H.useImperativeHandle(I,X,it)},It.useInsertionEffect=function(I,X){return St.H.useInsertionEffect(I,X)},It.useLayoutEffect=function(I,X){return St.H.useLayoutEffect(I,X)},It.useMemo=function(I,X){return St.H.useMemo(I,X)},It.useOptimistic=function(I,X){return St.H.useOptimistic(I,X)},It.useReducer=function(I,X,it){return St.H.useReducer(I,X,it)},It.useRef=function(I){return St.H.useRef(I)},It.useState=function(I){return St.H.useState(I)},It.useSyncExternalStore=function(I,X,it){return St.H.useSyncExternalStore(I,X,it)},It.useTransition=function(){return St.H.useTransition()},It.version="19.1.0",It}var y_;function gm(){return y_||(y_=1,bd.exports=WS()),bd.exports}var jt=gm(),wd={exports:{}},vl={},Rd={exports:{}},Id={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function ZS(){return __||(__=1,function(r){function t(H,nt){var st=H.length;H.push(nt);t:for(;0<st;){var Pt=st-1>>>1,I=H[Pt];if(0<l(I,nt))H[Pt]=nt,H[st]=I,st=Pt;else break t}}function i(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var nt=H[0],st=H.pop();if(st!==nt){H[0]=st;t:for(var Pt=0,I=H.length,X=I>>>1;Pt<X;){var it=2*(Pt+1)-1,$=H[it],ct=it+1,Rt=H[ct];if(0>l($,st))ct<I&&0>l(Rt,$)?(H[Pt]=Rt,H[ct]=st,Pt=ct):(H[Pt]=$,H[it]=st,Pt=it);else if(ct<I&&0>l(Rt,st))H[Pt]=Rt,H[ct]=st,Pt=ct;else break t}}return nt}function l(H,nt){var st=H.sortIndex-nt.sortIndex;return st!==0?st:H.id-nt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],_=[],S=1,C=null,D=3,q=!1,W=!1,rt=!1,J=!1,Tt=typeof setTimeout=="function"?setTimeout:null,yt=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;function qt(H){for(var nt=i(_);nt!==null;){if(nt.callback===null)s(_);else if(nt.startTime<=H)s(_),nt.sortIndex=nt.expirationTime,t(g,nt);else break;nt=i(_)}}function St(H){if(rt=!1,qt(H),!W)if(i(g)!==null)W=!0,Ht||(Ht=!0,V());else{var nt=i(_);nt!==null&&ie(St,nt.startTime-H)}}var Ht=!1,x=-1,A=5,w=-1;function N(){return J?!0:!(r.unstable_now()-w<A)}function M(){if(J=!1,Ht){var H=r.unstable_now();w=H;var nt=!0;try{t:{W=!1,rt&&(rt=!1,yt(x),x=-1),q=!0;var st=D;try{e:{for(qt(H),C=i(g);C!==null&&!(C.expirationTime>H&&N());){var Pt=C.callback;if(typeof Pt=="function"){C.callback=null,D=C.priorityLevel;var I=Pt(C.expirationTime<=H);if(H=r.unstable_now(),typeof I=="function"){C.callback=I,qt(H),nt=!0;break e}C===i(g)&&s(g),qt(H)}else s(g);C=i(g)}if(C!==null)nt=!0;else{var X=i(_);X!==null&&ie(St,X.startTime-H),nt=!1}}break t}finally{C=null,D=st,q=!1}nt=void 0}}finally{nt?V():Ht=!1}}}var V;if(typeof ht=="function")V=function(){ht(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ce=R.port2;R.port1.onmessage=M,V=function(){ce.postMessage(null)}}else V=function(){Tt(M,0)};function ie(H,nt){x=Tt(function(){H(r.unstable_now())},nt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(H){switch(D){case 1:case 2:case 3:var nt=3;break;default:nt=D}var st=D;D=nt;try{return H()}finally{D=st}},r.unstable_requestPaint=function(){J=!0},r.unstable_runWithPriority=function(H,nt){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var st=D;D=H;try{return nt()}finally{D=st}},r.unstable_scheduleCallback=function(H,nt,st){var Pt=r.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?Pt+st:Pt):st=Pt,H){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=st+I,H={id:S++,callback:nt,priorityLevel:H,startTime:st,expirationTime:I,sortIndex:-1},st>Pt?(H.sortIndex=st,t(_,H),i(g)===null&&H===i(_)&&(rt?(yt(x),x=-1):rt=!0,ie(St,st-Pt))):(H.sortIndex=I,t(g,H),W||q||(W=!0,Ht||(Ht=!0,V()))),H},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(H){var nt=D;return function(){var st=D;D=nt;try{return H.apply(this,arguments)}finally{D=st}}}}(Id)),Id}var v_;function JS(){return v_||(v_=1,Rd.exports=ZS()),Rd.exports}var Cd={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function $S(){if(E_)return Je;E_=1;var r=gm();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,_,S){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:g,containerInfo:_,implementation:S}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Je.createPortal=function(g,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return c(g,_,null,S)},Je.flushSync=function(g){var _=d.T,S=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=_,s.p=S,s.d.f()}},Je.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(g,_))},Je.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Je.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var S=_.as,C=p(S,_.crossOrigin),D=typeof _.integrity=="string"?_.integrity:void 0,q=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?s.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:C,integrity:D,fetchPriority:q}):S==="script"&&s.d.X(g,{crossOrigin:C,integrity:D,fetchPriority:q,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Je.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=p(_.as,_.crossOrigin);s.d.M(g,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(g)},Je.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,C=p(S,_.crossOrigin);s.d.L(g,S,{crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Je.preloadModule=function(g,_){if(typeof g=="string")if(_){var S=p(_.as,_.crossOrigin);s.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(g)},Je.requestFormReset=function(g){s.d.r(g)},Je.unstable_batchedUpdates=function(g,_){return g(_)},Je.useFormState=function(g,_,S){return d.H.useFormState(g,_,S)},Je.useFormStatus=function(){return d.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var T_;function tA(){if(T_)return Cd.exports;T_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Cd.exports=$S(),Cd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function eA(){if(S_)return vl;S_=1;var r=JS(),t=gm(),i=tA();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function g(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),e;if(f===o)return p(h),n;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function _(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=_(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,C=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),rt=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),Tt=Symbol.for("react.provider"),yt=Symbol.for("react.consumer"),ht=Symbol.for("react.context"),qt=Symbol.for("react.forward_ref"),St=Symbol.for("react.suspense"),Ht=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case J:return"Profiler";case rt:return"StrictMode";case St:return"Suspense";case Ht:return"SuspenseList";case w:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case ht:return(e.displayName||"Context")+".Provider";case yt:return(e._context.displayName||"Context")+".Consumer";case qt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case x:return n=e.displayName||null,n!==null?n:ce(e.type)||"Memo";case A:n=e._payload,e=e._init;try{return ce(e(n))}catch{}}return null}var ie=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},Pt=[],I=-1;function X(e){return{current:e}}function it(e){0>I||(e.current=Pt[I],Pt[I]=null,I--)}function $(e,n){I++,Pt[I]=e.current,e.current=n}var ct=X(null),Rt=X(null),mt=X(null),ve=X(null);function Ft(e,n){switch($(mt,n),$(Rt,e),$(ct,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Hy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Hy(n),e=qy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(ct),$(ct,e)}function mn(){it(ct),it(Rt),it(mt)}function pn(e){e.memoizedState!==null&&$(ve,e);var n=ct.current,a=qy(n,e.type);n!==a&&($(Rt,e),$(ct,a))}function gn(e){Rt.current===e&&(it(ct),it(Rt)),ve.current===e&&(it(ve),dl._currentValue=st)}var Ai=Object.prototype.hasOwnProperty,Xn=r.unstable_scheduleCallback,Rn=r.unstable_cancelCallback,es=r.unstable_shouldYield,Xs=r.unstable_requestPaint,ln=r.unstable_now,co=r.unstable_getCurrentPriorityLevel,ns=r.unstable_ImmediatePriority,bi=r.unstable_UserBlockingPriority,wi=r.unstable_NormalPriority,ho=r.unstable_LowPriority,tt=r.unstable_IdlePriority,pt=r.log,Ee=r.unstable_setDisableYieldValue,Mt=null,wt=null;function de(e){if(typeof pt=="function"&&Ee(e),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Mt,e)}catch{}}var Ce=Math.clz32?Math.clz32:is,Wn=Math.log,bh=Math.LN2;function is(e){return e>>>=0,e===0?32:31-(Wn(e)/bh|0)|0}var rs=256,ss=4194304;function jn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ws(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=jn(o):(v&=E,v!==0?h=jn(v):a||(a=E&~e,a!==0&&(h=jn(a))))):(E=o&~f,E!==0?h=jn(E):v!==0?h=jn(v):a||(a=o&~e,a!==0&&(h=jn(a)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:h}function as(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function fo(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mo(){var e=rs;return rs<<=1,(rs&4194048)===0&&(rs=256),e}function po(){var e=ss;return ss<<=1,(ss&62914560)===0&&(ss=4194304),e}function Ri(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Ii(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function go(e,n,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Ce(a),K=1<<G;E[G]=0,b[G]=-1;var z=L[G];if(z!==null)for(L[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~K}o!==0&&Zn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~n))}function Zn(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ce(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function yo(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Ce(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function sr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Zs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ar(){var e=nt.p;return e!==0?e:(e=window.event,e===void 0?32:l_(e.type))}function $l(e,n){var a=nt.p;try{return nt.p=e,n()}finally{nt.p=a}}var ae=Math.random().toString(36).slice(2),De="__reactFiber$"+ae,Te="__reactProps$"+ae,In="__reactContainer$"+ae,_o="__reactEvents$"+ae,wh="__reactListeners$"+ae,or="__reactHandles$"+ae,tu="__reactResources$"+ae,os="__reactMarker$"+ae;function lr(e){delete e[De],delete e[Te],delete e[_o],delete e[wh],delete e[or]}function Ci(e){var n=e[De];if(n)return n;for(var a=e.parentNode;a;){if(n=a[In]||a[De]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Ky(e);e!==null;){if(a=e[De])return a;e=Ky(e)}return n}e=a,a=e.parentNode}return null}function Jn(e){if(e=e[De]||e[In]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function $n(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function rn(e){var n=e[tu];return n||(n=e[tu]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function me(e){e[os]=!0}var vo=new Set,Js={};function Hn(e,n){Di(e,n),Di(e+"Capture",n)}function Di(e,n){for(Js[e]=n,e=0;e<n.length;e++)vo.add(n[e])}var eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nu={},ls={};function iu(e){return Ai.call(ls,e)?!0:Ai.call(nu,e)?!1:eu.test(e)?ls[e]=!0:(nu[e]=!0,!1)}function ur(e,n,a){if(iu(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function ti(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function qe(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}var us,ru;function Oi(e){if(us===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);us=n&&n[1]||"",ru=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+us+e+ru}var $s=!1;function ta(e,n){if(!e||$s)return"";$s=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var z=B}Reflect.construct(e,[],K)}else{try{K.call()}catch(B){z=B}e.call(K.prototype)}}else{try{throw Error()}catch(B){z=B}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===L.length)for(o=b.length-1,h=L.length-1;1<=o&&0<=h&&b[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==L[h]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{$s=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Oi(a):""}function Eo(e){switch(e.tag){case 26:case 27:case 5:return Oi(e.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return ta(e.type,!1);case 11:return ta(e.type.render,!1);case 1:return ta(e.type,!0);case 31:return Oi("Activity");default:return""}}function ea(e){try{var n="";do n+=Eo(e),e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function To(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Rh(e){var n=To(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function na(e){e._valueTracker||(e._valueTracker=Rh(e))}function So(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=To(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function cs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ih=/[\n"\\]/g;function Se(e){return e.replace(Ih,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function yn(e,n,a,o,h,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+sn(n)):e.value!==""+sn(n)&&(e.value=""+sn(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?cr(e,v,sn(n)):a!=null?cr(e,v,sn(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+sn(E):e.removeAttribute("name")}function hs(e,n,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;a=a!=null?""+sn(a):"",n=n!=null?""+sn(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function cr(e,n,a){n==="number"&&cs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ni(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+sn(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Zt(e,n,a){if(n!=null&&(n=""+sn(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+sn(a):""}function fs(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(ie(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=sn(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Cn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||ds.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Ao(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&su(e,h,o)}else for(var f in n)n.hasOwnProperty(f)&&su(e,f,n[f])}function bo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ch=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ia(e){return Dh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Mi=null;function Dn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xi=null,Vi=null;function wo(e){var n=Jn(e);if(n&&(e=n.stateNode)){var a=e[Te]||null;t:switch(e=n.stateNode,n.type){case"input":if(yn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Se(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[Te]||null;if(!h)throw Error(s(90));yn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&So(o)}break t;case"textarea":Zt(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Ni(e,!!a.multiple,n,!1)}}}var ei=!1;function au(e,n,a){if(ei)return e(n,a);ei=!0;try{var o=e(n);return o}finally{if(ei=!1,(xi!==null||Vi!==null)&&($u(),xi&&(n=xi,e=Vi,Vi=xi=null,wo(n),e)))for(n=0;n<e.length;n++)wo(e[n])}}function ms(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Te]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),On=!1;if(qn)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){On=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{On=!1}var ni=null,hr=null,ki=null;function Ro(){if(ki)return ki;var e,n=hr,a=n.length,o,h="value"in ni?ni.value:ni.textContent,f=h.length;for(e=0;e<a&&n[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===h[f-o];o++);return ki=h.slice(e,1<o?1-o:void 0)}function ii(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ri(){return!0}function Io(){return!1}function Pe(e){function n(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ri:Io,this.isPropagationStopped=Io,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),n}var Kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=Pe(Kt),gs=S({},Kt,{view:0,detail:0}),ou=Pe(gs),sa,aa,si,ys=S({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&e.type==="mousemove"?(sa=e.screenX-si.screenX,aa=e.screenY-si.screenY):aa=sa=0,si=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:aa}}),Nn=Pe(ys),lu=S({},ys,{dataTransfer:0}),Oh=Pe(lu),_s=S({},gs,{relatedTarget:0}),oa=Pe(_s),Co=S({},Kt,{animationName:0,elapsedTime:0,pseudoElement:0}),la=Pe(Co),uu=S({},Kt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ua=Pe(uu),Nh=S({},Kt,{data:0}),Do=Pe(Nh),vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=hu[e])?!!n[e]:!1}function Es(){return Oo}var fu=S({},gs,{key:function(e){if(e.key){var n=vs[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(e){return e.type==="keypress"?ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ca=Pe(fu),du=S({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),No=Pe(du),Pi=S({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),mu=Pe(Pi),pu=S({},Kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),gu=Pe(pu),yu=S({},ys,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ha=Pe(yu),an=S({},Kt,{newState:0,oldState:0}),_u=Pe(an),vu=[9,13,27,32],ai=qn&&"CompositionEvent"in window,u=null;qn&&"documentMode"in document&&(u=document.documentMode);var m=qn&&"TextEvent"in window&&!u,y=qn&&(!ai||u&&8<u&&11>=u),T=" ",P=!1;function j(e,n){switch(e){case"keyup":return vu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ut=!1;function Oe(e,n){switch(e){case"compositionend":return et(n);case"keypress":return n.which!==32?null:(P=!0,T);case"textInput":return e=n.data,e===T&&P?null:e;default:return null}}function Lt(e,n){if(Ut)return e==="compositionend"||!ai&&j(e,n)?(e=Ro(),ki=hr=ni=null,Ut=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return y&&n.locale!=="ko"?null:n.data;default:return null}}var Ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Ue[e.type]:n==="textarea"}function Ui(e,n,a,o){xi?Vi?Vi.push(o):Vi=[o]:xi=o,n=sc(n,"onChange"),0<n.length&&(a=new ra("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Ge=null,oi=null;function Mo(e){Uy(e,0)}function Eu(e){var n=$n(e);if(So(n))return e}function rp(e,n){if(e==="change")return n}var sp=!1;if(qn){var Mh;if(qn){var xh="oninput"in document;if(!xh){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),xh=typeof ap.oninput=="function"}Mh=xh}else Mh=!1;sp=Mh&&(!document.documentMode||9<document.documentMode)}function op(){Ge&&(Ge.detachEvent("onpropertychange",lp),oi=Ge=null)}function lp(e){if(e.propertyName==="value"&&Eu(oi)){var n=[];Ui(n,oi,e,Dn(e)),au(Mo,n)}}function b0(e,n,a){e==="focusin"?(op(),Ge=n,oi=a,Ge.attachEvent("onpropertychange",lp)):e==="focusout"&&op()}function w0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Eu(oi)}function R0(e,n){if(e==="click")return Eu(n)}function I0(e,n){if(e==="input"||e==="change")return Eu(n)}function C0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var _n=typeof Object.is=="function"?Object.is:C0;function xo(e,n){if(_n(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Ai.call(n,h)||!_n(e[h],n[h]))return!1}return!0}function up(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cp(e,n){var a=up(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=up(a)}}function hp(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?hp(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function fp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=cs(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=cs(e.document)}return n}function Vh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var D0=qn&&"documentMode"in document&&11>=document.documentMode,fa=null,kh=null,Vo=null,Ph=!1;function dp(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ph||fa==null||fa!==cs(o)||(o=fa,"selectionStart"in o&&Vh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Vo&&xo(Vo,o)||(Vo=o,o=sc(kh,"onSelect"),0<o.length&&(n=new ra("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=fa)))}function Ts(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var da={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},Uh={},mp={};qn&&(mp=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Ss(e){if(Uh[e])return Uh[e];if(!da[e])return e;var n=da[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in mp)return Uh[e]=n[a];return e}var pp=Ss("animationend"),gp=Ss("animationiteration"),yp=Ss("animationstart"),O0=Ss("transitionrun"),N0=Ss("transitionstart"),M0=Ss("transitioncancel"),_p=Ss("transitionend"),vp=new Map,Lh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lh.push("scrollEnd");function Gn(e,n){vp.set(e,n),Hn(n,[e])}var Ep=new WeakMap;function Mn(e,n){if(typeof e=="object"&&e!==null){var a=Ep.get(e);return a!==void 0?a:(n={value:e,source:n,stack:ea(n)},Ep.set(e,n),n)}return{value:e,source:n,stack:ea(n)}}var xn=[],ma=0,zh=0;function Tu(){for(var e=ma,n=zh=ma=0;n<e;){var a=xn[n];xn[n++]=null;var o=xn[n];xn[n++]=null;var h=xn[n];xn[n++]=null;var f=xn[n];if(xn[n++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&Tp(a,h,f)}}function Su(e,n,a,o){xn[ma++]=e,xn[ma++]=n,xn[ma++]=a,xn[ma++]=o,zh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Bh(e,n,a,o){return Su(e,n,a,o),Au(e)}function pa(e,n){return Su(e,null,null,n),Au(e)}function Tp(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&n!==null&&(h=31-Ce(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),f):null}function Au(e){if(50<sl)throw sl=0,Kf=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ga={};function x0(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(e,n,a,o){return new x0(e,n,a,o)}function jh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Li(e,n){var a=e.alternate;return a===null?(a=vn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Sp(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function bu(e,n,a,o,h,f){var v=0;if(o=e,typeof e=="function")jh(e)&&(v=1);else if(typeof e=="string")v=kS(e,a,ct.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case w:return e=vn(31,a,n,h),e.elementType=w,e.lanes=f,e;case W:return As(a.children,h,f,n);case rt:v=8,h|=24;break;case J:return e=vn(12,a,n,h|2),e.elementType=J,e.lanes=f,e;case St:return e=vn(13,a,n,h),e.elementType=St,e.lanes=f,e;case Ht:return e=vn(19,a,n,h),e.elementType=Ht,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tt:case ht:v=10;break t;case yt:v=9;break t;case qt:v=11;break t;case x:v=14;break t;case A:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=vn(v,a,n,h),n.elementType=e,n.type=o,n.lanes=f,n}function As(e,n,a,o){return e=vn(7,e,o,n),e.lanes=a,e}function Hh(e,n,a){return e=vn(6,e,null,n),e.lanes=a,e}function qh(e,n,a){return n=vn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ya=[],_a=0,wu=null,Ru=0,Vn=[],kn=0,bs=null,zi=1,Bi="";function ws(e,n){ya[_a++]=Ru,ya[_a++]=wu,wu=e,Ru=n}function Ap(e,n,a){Vn[kn++]=zi,Vn[kn++]=Bi,Vn[kn++]=bs,bs=e;var o=zi;e=Bi;var h=32-Ce(o)-1;o&=~(1<<h),a+=1;var f=32-Ce(n)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,zi=1<<32-Ce(n)+h|a<<h|o,Bi=f+e}else zi=1<<f|a<<h|o,Bi=e}function Gh(e){e.return!==null&&(ws(e,1),Ap(e,1,0))}function Fh(e){for(;e===wu;)wu=ya[--_a],ya[_a]=null,Ru=ya[--_a],ya[_a]=null;for(;e===bs;)bs=Vn[--kn],Vn[kn]=null,Bi=Vn[--kn],Vn[kn]=null,zi=Vn[--kn],Vn[kn]=null}var on=null,he=null,Qt=!1,Rs=null,li=!1,Qh=Error(s(519));function Is(e){var n=Error(s(418,""));throw Uo(Mn(n,e)),Qh}function bp(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[De]=e,n[Te]=o,a){case"dialog":Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":case"embed":Nt("load",n);break;case"video":case"audio":for(a=0;a<ol.length;a++)Nt(ol[a],n);break;case"source":Nt("error",n);break;case"img":case"image":case"link":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"input":Nt("invalid",n),hs(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),na(n);break;case"select":Nt("invalid",n);break;case"textarea":Nt("invalid",n),fs(n,o.value,o.defaultValue,o.children),na(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||jy(n.textContent,a)?(o.popover!=null&&(Nt("beforetoggle",n),Nt("toggle",n)),o.onScroll!=null&&Nt("scroll",n),o.onScrollEnd!=null&&Nt("scrollend",n),o.onClick!=null&&(n.onclick=ac),n=!0):n=!1,n||Is(e)}function wp(e){for(on=e.return;on;)switch(on.tag){case 5:case 13:li=!1;return;case 27:case 3:li=!0;return;default:on=on.return}}function ko(e){if(e!==on)return!1;if(!Qt)return wp(e),Qt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ud(e.type,e.memoizedProps)),a=!a),a&&he&&Is(e),wp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(n===0){he=Qn(e.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;e=e.nextSibling}he=null}}else n===27?(n=he,Ir(e.type)?(e=dd,dd=null,he=e):he=n):he=on?Qn(e.stateNode.nextSibling):null;return!0}function Po(){he=on=null,Qt=!1}function Rp(){var e=Rs;return e!==null&&(hn===null?hn=e:hn.push.apply(hn,e),Rs=null),e}function Uo(e){Rs===null?Rs=[e]:Rs.push(e)}var Kh=X(null),Cs=null,ji=null;function fr(e,n,a){$(Kh,n._currentValue),n._currentValue=a}function Hi(e){e._currentValue=Kh.current,it(Kh)}function Yh(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Xh(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var b=0;b<n.length;b++)if(E.context===n[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Yh(f.return,a,e),o||(v=null);break t}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Yh(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Lo(e,n,a,o){e=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;_n(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===ve.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(dl):e=[dl])}h=h.return}e!==null&&Xh(n,e,a,o),n.flags|=262144}function Iu(e){for(e=e.firstContext;e!==null;){if(!_n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ds(e){Cs=e,ji=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ze(e){return Ip(Cs,e)}function Cu(e,n){return Cs===null&&Ds(e),Ip(e,n)}function Ip(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},ji===null){if(e===null)throw Error(s(308));ji=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ji=ji.next=n;return a}var V0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},k0=r.unstable_scheduleCallback,P0=r.unstable_NormalPriority,Me={$$typeof:ht,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wh(){return{controller:new V0,data:new Map,refCount:0}}function zo(e){e.refCount--,e.refCount===0&&k0(P0,function(){e.controller.abort()})}var Bo=null,Zh=0,va=0,Ea=null;function U0(e,n){if(Bo===null){var a=Bo=[];Zh=0,va=td(),Ea={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Zh++,n.then(Cp,Cp),n}function Cp(){if(--Zh===0&&Bo!==null){Ea!==null&&(Ea.status="fulfilled");var e=Bo;Bo=null,va=0,Ea=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function L0(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Dp=H.S;H.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&U0(e,n),Dp!==null&&Dp(e,n)};var Os=X(null);function Jh(){var e=Os.current;return e!==null?e:ne.pooledCache}function Du(e,n){n===null?$(Os,Os.current):$(Os,n.pool)}function Op(){var e=Jh();return e===null?null:{parent:Me._currentValue,pool:e}}var jo=Error(s(460)),Np=Error(s(474)),Ou=Error(s(542)),$h={then:function(){}};function Mp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Nu(){}function xp(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Nu,Nu),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,kp(e),e;default:if(typeof n.status=="string")n.then(Nu,Nu);else{if(e=ne,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,kp(e),e}throw Ho=n,jo}}var Ho=null;function Vp(){if(Ho===null)throw Error(s(459));var e=Ho;return Ho=null,e}function kp(e){if(e===jo||e===Ou)throw Error(s(483))}var dr=!1;function tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function mr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function pr(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Xt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Au(e),Tp(e,null,a),n}return Su(e,o,n,a),Au(e)}function qo(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,yo(e,a)}}function nf(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=n:f=f.next=n}else h=f=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var rf=!1;function Go(){if(rf){var e=Ea;if(e!==null)throw e}}function Fo(e,n,a,o){rf=!1;var h=e.updateQueue;dr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=L:E.next=L,G.lastBaseUpdate=b))}if(f!==null){var K=h.baseState;v=0,G=L=b=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(zt&z)===z:(o&z)===z){z!==0&&z===va&&(rf=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=e,dt=E;z=n;var te=a;switch(dt.tag){case 1:if(Et=dt.payload,typeof Et=="function"){K=Et.call(te,K,z);break t}K=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=dt.payload,z=typeof Et=="function"?Et.call(te,K,z):Et,z==null)break t;K=S({},K,z);break t;case 2:dr=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(L=G=B,b=K):G=G.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);G===null&&(b=K),h.baseState=b,h.firstBaseUpdate=L,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),Ar|=v,e.lanes=v,e.memoizedState=K}}function Pp(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Up(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Pp(a[e],n)}var Ta=X(null),Mu=X(0);function Lp(e,n){e=Xi,$(Mu,e),$(Ta,n),Xi=e|n.baseLanes}function sf(){$(Mu,Xi),$(Ta,Ta.current)}function af(){Xi=Mu.current,it(Ta),it(Mu)}var gr=0,Ct=null,Jt=null,Ae=null,xu=!1,Sa=!1,Ns=!1,Vu=0,Qo=0,Aa=null,z0=0;function pe(){throw Error(s(321))}function of(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!_n(e[a],n[a]))return!1;return!0}function lf(e,n,a,o,h,f){return gr=f,Ct=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=e===null||e.memoizedState===null?Tg:Sg,Ns=!1,f=a(o,h),Ns=!1,Sa&&(f=Bp(n,a,o,h)),zp(e),f}function zp(e){H.H=Bu;var n=Jt!==null&&Jt.next!==null;if(gr=0,Ae=Jt=Ct=null,xu=!1,Qo=0,Aa=null,n)throw Error(s(300));e===null||Le||(e=e.dependencies,e!==null&&Iu(e)&&(Le=!0))}function Bp(e,n,a,o){Ct=e;var h=0;do{if(Sa&&(Aa=null),Qo=0,Sa=!1,25<=h)throw Error(s(301));if(h+=1,Ae=Jt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=Q0,f=n(a,o)}while(Sa);return f}function B0(){var e=H.H,n=e.useState()[0];return n=typeof n.then=="function"?Ko(n):n,e=e.useState()[0],(Jt!==null?Jt.memoizedState:null)!==e&&(Ct.flags|=1024),n}function uf(){var e=Vu!==0;return Vu=0,e}function cf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function hf(e){if(xu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}xu=!1}gr=0,Ae=Jt=Ct=null,Sa=!1,Qo=Vu=0,Aa=null}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?Ct.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function be(){if(Jt===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var n=Ae===null?Ct.memoizedState:Ae.next;if(n!==null)Ae=n,Jt=e;else{if(e===null)throw Ct.alternate===null?Error(s(467)):Error(s(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Ae===null?Ct.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function ff(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(e){var n=Qo;return Qo+=1,Aa===null&&(Aa=[]),e=xp(Aa,e,n),n=Ct,(Ae===null?n.memoizedState:Ae.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?Tg:Sg),e}function ku(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ko(e);if(e.$$typeof===ht)return Ze(e)}throw Error(s(438,String(e)))}function df(e){var n=null,a=Ct.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Ct.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ff(),Ct.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=N;return n.index++,a}function qi(e,n){return typeof n=="function"?n(e):n}function Pu(e){var n=be();return mf(n,Jt,e)}function mf(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}n.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{n=h.next;var E=v=null,b=null,L=n,G=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(zt&K)===K:(gr&K)===K){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===va&&(G=!0);else if((gr&z)===z){L=L.next,z===va&&(G=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=K,v=f):b=b.next=K,Ct.lanes|=z,Ar|=z;K=L.action,Ns&&a(f,K),f=L.hasEagerState?L.eagerState:a(f,K)}else z={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=f):b=b.next=z,Ct.lanes|=K,Ar|=K;L=L.next}while(L!==null&&L!==n);if(b===null?v=f:b.next=E,!_n(f,e.memoizedState)&&(Le=!0,G&&(a=Ea,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function pf(e){var n=be(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);_n(f,n.memoizedState)||(Le=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function jp(e,n,a){var o=Ct,h=be(),f=Qt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!_n((Jt||h).memoizedState,a);v&&(h.memoizedState=a,Le=!0),h=h.queue;var E=Gp.bind(null,o,h,e);if(Yo(2048,8,E,[e]),h.getSnapshot!==n||v||Ae!==null&&Ae.memoizedState.tag&1){if(o.flags|=2048,ba(9,Uu(),qp.bind(null,o,h,a,n),null),ne===null)throw Error(s(349));f||(gr&124)!==0||Hp(o,n,a)}return a}function Hp(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Ct.updateQueue,n===null?(n=ff(),Ct.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function qp(e,n,a,o){n.value=a,n.getSnapshot=o,Fp(n)&&Qp(e)}function Gp(e,n,a){return a(function(){Fp(n)&&Qp(e)})}function Fp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!_n(e,a)}catch{return!0}}function Qp(e){var n=pa(e,2);n!==null&&bn(n,e,2)}function gf(e){var n=un();if(typeof e=="function"){var a=e;if(e=a(),Ns){de(!0);try{a()}finally{de(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:e},n}function Kp(e,n,a,o){return e.baseState=a,mf(e,Jt,typeof o=="function"?o:qi)}function j0(e,n,a,o,h){if(zu(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,Yp(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Yp(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var f=H.T,v={};H.T=v;try{var E=a(h,o),b=H.S;b!==null&&b(v,E),Xp(e,n,E)}catch(L){yf(e,n,L)}finally{H.T=f}}else try{f=a(h,o),Xp(e,n,f)}catch(L){yf(e,n,L)}}function Xp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Wp(e,n,o)},function(o){return yf(e,n,o)}):Wp(e,n,a)}function Wp(e,n,a){n.status="fulfilled",n.value=a,Zp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Yp(e,a)))}function yf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Zp(n),n=n.next;while(n!==o)}e.action=null}function Zp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Jp(e,n){return n}function $p(e,n){if(Qt){var a=ne.formState;if(a!==null){t:{var o=Ct;if(Qt){if(he){e:{for(var h=he,f=li;h.nodeType!==8;){if(!f){h=null;break e}if(h=Qn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){he=Qn(h.nextSibling),o=h.data==="F!";break t}}Is(o)}o=!1}o&&(n=a[0])}}return a=un(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jp,lastRenderedState:n},a.queue=o,a=_g.bind(null,Ct,o),o.dispatch=a,o=gf(!1),f=Sf.bind(null,Ct,!1,o.queue),o=un(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=j0.bind(null,Ct,h,f,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function tg(e){var n=be();return eg(n,Jt,e)}function eg(e,n,a){if(n=mf(e,n,Jp)[0],e=Pu(qi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Ko(n)}catch(v){throw v===jo?Ou:v}else o=n;n=be();var h=n.queue,f=h.dispatch;return a!==n.memoizedState&&(Ct.flags|=2048,ba(9,Uu(),H0.bind(null,h,a),null)),[o,f,e]}function H0(e,n){e.action=n}function ng(e){var n=be(),a=Jt;if(a!==null)return eg(n,a,e);be(),n=n.memoizedState,a=be();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function ba(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Ct.updateQueue,n===null&&(n=ff(),Ct.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Uu(){return{destroy:void 0,resource:void 0}}function ig(){return be().memoizedState}function Lu(e,n,a,o){var h=un();o=o===void 0?null:o,Ct.flags|=e,h.memoizedState=ba(1|n,Uu(),a,o)}function Yo(e,n,a,o){var h=be();o=o===void 0?null:o;var f=h.memoizedState.inst;Jt!==null&&o!==null&&of(o,Jt.memoizedState.deps)?h.memoizedState=ba(n,f,a,o):(Ct.flags|=e,h.memoizedState=ba(1|n,f,a,o))}function rg(e,n){Lu(8390656,8,e,n)}function sg(e,n){Yo(2048,8,e,n)}function ag(e,n){return Yo(4,2,e,n)}function og(e,n){return Yo(4,4,e,n)}function lg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ug(e,n,a){a=a!=null?a.concat([e]):null,Yo(4,4,lg.bind(null,n,e),a)}function _f(){}function cg(e,n){var a=be();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&of(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function hg(e,n){var a=be();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&of(n,o[1]))return o[0];if(o=e(),Ns){de(!0);try{e()}finally{de(!1)}}return a.memoizedState=[o,n],o}function vf(e,n,a){return a===void 0||(gr&1073741824)!==0?e.memoizedState=n:(e.memoizedState=a,e=my(),Ct.lanes|=e,Ar|=e,a)}function fg(e,n,a,o){return _n(a,n)?a:Ta.current!==null?(e=vf(e,a,o),_n(e,n)||(Le=!0),e):(gr&42)===0?(Le=!0,e.memoizedState=a):(e=my(),Ct.lanes|=e,Ar|=e,n)}function dg(e,n,a,o,h){var f=nt.p;nt.p=f!==0&&8>f?f:8;var v=H.T,E={};H.T=E,Sf(e,!1,n,a);try{var b=h(),L=H.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=L0(b,o);Xo(e,n,G,An(e))}else Xo(e,n,o,An(e))}catch(K){Xo(e,n,{then:function(){},status:"rejected",reason:K},An())}finally{nt.p=f,H.T=v}}function q0(){}function Ef(e,n,a,o){if(e.tag!==5)throw Error(s(476));var h=mg(e).queue;dg(e,h,n,st,a===null?q0:function(){return pg(e),a(o)})}function mg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:st},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function pg(e){var n=mg(e).next.queue;Xo(e,n,{},An())}function Tf(){return Ze(dl)}function gg(){return be().memoizedState}function yg(){return be().memoizedState}function G0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=An();e=mr(a);var o=pr(n,e,a);o!==null&&(bn(o,n,a),qo(o,n,a)),n={cache:Wh()},e.payload=n;return}n=n.return}}function F0(e,n,a){var o=An();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},zu(e)?vg(n,a):(a=Bh(e,n,a,o),a!==null&&(bn(a,e,o),Eg(a,n,o)))}function _g(e,n,a){var o=An();Xo(e,n,a,o)}function Xo(e,n,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(zu(e))vg(n,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var v=n.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,_n(E,v))return Su(e,n,h,0),ne===null&&Tu(),!1}catch{}finally{}if(a=Bh(e,n,h,o),a!==null)return bn(a,e,o),Eg(a,n,o),!0}return!1}function Sf(e,n,a,o){if(o={lane:2,revertLane:td(),action:o,hasEagerState:!1,eagerState:null,next:null},zu(e)){if(n)throw Error(s(479))}else n=Bh(e,a,o,2),n!==null&&bn(n,e,2)}function zu(e){var n=e.alternate;return e===Ct||n!==null&&n===Ct}function vg(e,n){Sa=xu=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Eg(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,yo(e,a)}}var Bu={readContext:Ze,use:ku,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useLayoutEffect:pe,useInsertionEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useSyncExternalStore:pe,useId:pe,useHostTransitionStatus:pe,useFormState:pe,useActionState:pe,useOptimistic:pe,useMemoCache:pe,useCacheRefresh:pe},Tg={readContext:Ze,use:ku,useCallback:function(e,n){return un().memoizedState=[e,n===void 0?null:n],e},useContext:Ze,useEffect:rg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Lu(4194308,4,lg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Lu(4194308,4,e,n)},useInsertionEffect:function(e,n){Lu(4,2,e,n)},useMemo:function(e,n){var a=un();n=n===void 0?null:n;var o=e();if(Ns){de(!0);try{e()}finally{de(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=un();if(a!==void 0){var h=a(n);if(Ns){de(!0);try{a(n)}finally{de(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=F0.bind(null,Ct,e),[o.memoizedState,e]},useRef:function(e){var n=un();return e={current:e},n.memoizedState=e},useState:function(e){e=gf(e);var n=e.queue,a=_g.bind(null,Ct,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:_f,useDeferredValue:function(e,n){var a=un();return vf(a,e,n)},useTransition:function(){var e=gf(!1);return e=dg.bind(null,Ct,e.queue,!0,!1),un().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Ct,h=un();if(Qt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),ne===null)throw Error(s(349));(zt&124)!==0||Hp(o,n,a)}h.memoizedState=a;var f={value:a,getSnapshot:n};return h.queue=f,rg(Gp.bind(null,o,f,e),[e]),o.flags|=2048,ba(9,Uu(),qp.bind(null,o,f,a,n),null),a},useId:function(){var e=un(),n=ne.identifierPrefix;if(Qt){var a=Bi,o=zi;a=(o&~(1<<32-Ce(o)-1)).toString(32)+a,n="«"+n+"R"+a,a=Vu++,0<a&&(n+="H"+a.toString(32)),n+="»"}else a=z0++,n="«"+n+"r"+a.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:Tf,useFormState:$p,useActionState:$p,useOptimistic:function(e){var n=un();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Sf.bind(null,Ct,!0,a),a.dispatch=n,[e,n]},useMemoCache:df,useCacheRefresh:function(){return un().memoizedState=G0.bind(null,Ct)}},Sg={readContext:Ze,use:ku,useCallback:cg,useContext:Ze,useEffect:sg,useImperativeHandle:ug,useInsertionEffect:ag,useLayoutEffect:og,useMemo:hg,useReducer:Pu,useRef:ig,useState:function(){return Pu(qi)},useDebugValue:_f,useDeferredValue:function(e,n){var a=be();return fg(a,Jt.memoizedState,e,n)},useTransition:function(){var e=Pu(qi)[0],n=be().memoizedState;return[typeof e=="boolean"?e:Ko(e),n]},useSyncExternalStore:jp,useId:gg,useHostTransitionStatus:Tf,useFormState:tg,useActionState:tg,useOptimistic:function(e,n){var a=be();return Kp(a,Jt,e,n)},useMemoCache:df,useCacheRefresh:yg},Q0={readContext:Ze,use:ku,useCallback:cg,useContext:Ze,useEffect:sg,useImperativeHandle:ug,useInsertionEffect:ag,useLayoutEffect:og,useMemo:hg,useReducer:pf,useRef:ig,useState:function(){return pf(qi)},useDebugValue:_f,useDeferredValue:function(e,n){var a=be();return Jt===null?vf(a,e,n):fg(a,Jt.memoizedState,e,n)},useTransition:function(){var e=pf(qi)[0],n=be().memoizedState;return[typeof e=="boolean"?e:Ko(e),n]},useSyncExternalStore:jp,useId:gg,useHostTransitionStatus:Tf,useFormState:ng,useActionState:ng,useOptimistic:function(e,n){var a=be();return Jt!==null?Kp(a,Jt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:df,useCacheRefresh:yg},wa=null,Wo=0;function ju(e){var n=Wo;return Wo+=1,wa===null&&(wa=[]),xp(wa,e,n)}function Zo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Hu(e,n){throw n.$$typeof===C?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Ag(e){var n=e._init;return n(e._payload)}function bg(e){function n(k,O){if(e){var U=k.deletions;U===null?(k.deletions=[O],k.flags|=16):U.push(O)}}function a(k,O){if(!e)return null;for(;O!==null;)n(k,O),O=O.sibling;return null}function o(k){for(var O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function h(k,O){return k=Li(k,O),k.index=0,k.sibling=null,k}function f(k,O,U){return k.index=U,e?(U=k.alternate,U!==null?(U=U.index,U<O?(k.flags|=67108866,O):U):(k.flags|=67108866,O)):(k.flags|=1048576,O)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function E(k,O,U,F){return O===null||O.tag!==6?(O=Hh(U,k.mode,F),O.return=k,O):(O=h(O,U),O.return=k,O)}function b(k,O,U,F){var ot=U.type;return ot===W?G(k,O,U.props.children,F,U.key):O!==null&&(O.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===A&&Ag(ot)===O.type)?(O=h(O,U.props),Zo(O,U),O.return=k,O):(O=bu(U.type,U.key,U.props,null,k.mode,F),Zo(O,U),O.return=k,O)}function L(k,O,U,F){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=qh(U,k.mode,F),O.return=k,O):(O=h(O,U.children||[]),O.return=k,O)}function G(k,O,U,F,ot){return O===null||O.tag!==7?(O=As(U,k.mode,F,ot),O.return=k,O):(O=h(O,U),O.return=k,O)}function K(k,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Hh(""+O,k.mode,U),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case D:return U=bu(O.type,O.key,O.props,null,k.mode,U),Zo(U,O),U.return=k,U;case q:return O=qh(O,k.mode,U),O.return=k,O;case A:var F=O._init;return O=F(O._payload),K(k,O,U)}if(ie(O)||V(O))return O=As(O,k.mode,U,null),O.return=k,O;if(typeof O.then=="function")return K(k,ju(O),U);if(O.$$typeof===ht)return K(k,Cu(k,O),U);Hu(k,O)}return null}function z(k,O,U,F){var ot=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ot!==null?null:E(k,O,""+U,F);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return U.key===ot?b(k,O,U,F):null;case q:return U.key===ot?L(k,O,U,F):null;case A:return ot=U._init,U=ot(U._payload),z(k,O,U,F)}if(ie(U)||V(U))return ot!==null?null:G(k,O,U,F,null);if(typeof U.then=="function")return z(k,O,ju(U),F);if(U.$$typeof===ht)return z(k,O,Cu(k,U),F);Hu(k,U)}return null}function B(k,O,U,F,ot){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return k=k.get(U)||null,E(O,k,""+F,ot);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case D:return k=k.get(F.key===null?U:F.key)||null,b(O,k,F,ot);case q:return k=k.get(F.key===null?U:F.key)||null,L(O,k,F,ot);case A:var Dt=F._init;return F=Dt(F._payload),B(k,O,U,F,ot)}if(ie(F)||V(F))return k=k.get(U)||null,G(O,k,F,ot,null);if(typeof F.then=="function")return B(k,O,U,ju(F),ot);if(F.$$typeof===ht)return B(k,O,U,Cu(O,F),ot);Hu(O,F)}return null}function Et(k,O,U,F){for(var ot=null,Dt=null,ut=O,gt=O=0,Be=null;ut!==null&&gt<U.length;gt++){ut.index>gt?(Be=ut,ut=null):Be=ut.sibling;var Gt=z(k,ut,U[gt],F);if(Gt===null){ut===null&&(ut=Be);break}e&&ut&&Gt.alternate===null&&n(k,ut),O=f(Gt,O,gt),Dt===null?ot=Gt:Dt.sibling=Gt,Dt=Gt,ut=Be}if(gt===U.length)return a(k,ut),Qt&&ws(k,gt),ot;if(ut===null){for(;gt<U.length;gt++)ut=K(k,U[gt],F),ut!==null&&(O=f(ut,O,gt),Dt===null?ot=ut:Dt.sibling=ut,Dt=ut);return Qt&&ws(k,gt),ot}for(ut=o(ut);gt<U.length;gt++)Be=B(ut,k,gt,U[gt],F),Be!==null&&(e&&Be.alternate!==null&&ut.delete(Be.key===null?gt:Be.key),O=f(Be,O,gt),Dt===null?ot=Be:Dt.sibling=Be,Dt=Be);return e&&ut.forEach(function(Mr){return n(k,Mr)}),Qt&&ws(k,gt),ot}function dt(k,O,U,F){if(U==null)throw Error(s(151));for(var ot=null,Dt=null,ut=O,gt=O=0,Be=null,Gt=U.next();ut!==null&&!Gt.done;gt++,Gt=U.next()){ut.index>gt?(Be=ut,ut=null):Be=ut.sibling;var Mr=z(k,ut,Gt.value,F);if(Mr===null){ut===null&&(ut=Be);break}e&&ut&&Mr.alternate===null&&n(k,ut),O=f(Mr,O,gt),Dt===null?ot=Mr:Dt.sibling=Mr,Dt=Mr,ut=Be}if(Gt.done)return a(k,ut),Qt&&ws(k,gt),ot;if(ut===null){for(;!Gt.done;gt++,Gt=U.next())Gt=K(k,Gt.value,F),Gt!==null&&(O=f(Gt,O,gt),Dt===null?ot=Gt:Dt.sibling=Gt,Dt=Gt);return Qt&&ws(k,gt),ot}for(ut=o(ut);!Gt.done;gt++,Gt=U.next())Gt=B(ut,k,gt,Gt.value,F),Gt!==null&&(e&&Gt.alternate!==null&&ut.delete(Gt.key===null?gt:Gt.key),O=f(Gt,O,gt),Dt===null?ot=Gt:Dt.sibling=Gt,Dt=Gt);return e&&ut.forEach(function(KS){return n(k,KS)}),Qt&&ws(k,gt),ot}function te(k,O,U,F){if(typeof U=="object"&&U!==null&&U.type===W&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case D:t:{for(var ot=U.key;O!==null;){if(O.key===ot){if(ot=U.type,ot===W){if(O.tag===7){a(k,O.sibling),F=h(O,U.props.children),F.return=k,k=F;break t}}else if(O.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===A&&Ag(ot)===O.type){a(k,O.sibling),F=h(O,U.props),Zo(F,U),F.return=k,k=F;break t}a(k,O);break}else n(k,O);O=O.sibling}U.type===W?(F=As(U.props.children,k.mode,F,U.key),F.return=k,k=F):(F=bu(U.type,U.key,U.props,null,k.mode,F),Zo(F,U),F.return=k,k=F)}return v(k);case q:t:{for(ot=U.key;O!==null;){if(O.key===ot)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(k,O.sibling),F=h(O,U.children||[]),F.return=k,k=F;break t}else{a(k,O);break}else n(k,O);O=O.sibling}F=qh(U,k.mode,F),F.return=k,k=F}return v(k);case A:return ot=U._init,U=ot(U._payload),te(k,O,U,F)}if(ie(U))return Et(k,O,U,F);if(V(U)){if(ot=V(U),typeof ot!="function")throw Error(s(150));return U=ot.call(U),dt(k,O,U,F)}if(typeof U.then=="function")return te(k,O,ju(U),F);if(U.$$typeof===ht)return te(k,O,Cu(k,U),F);Hu(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(k,O.sibling),F=h(O,U),F.return=k,k=F):(a(k,O),F=Hh(U,k.mode,F),F.return=k,k=F),v(k)):a(k,O)}return function(k,O,U,F){try{Wo=0;var ot=te(k,O,U,F);return wa=null,ot}catch(ut){if(ut===jo||ut===Ou)throw ut;var Dt=vn(29,ut,null,k.mode);return Dt.lanes=F,Dt.return=k,Dt}finally{}}}var Ra=bg(!0),wg=bg(!1),Pn=X(null),ui=null;function yr(e){var n=e.alternate;$(xe,xe.current&1),$(Pn,e),ui===null&&(n===null||Ta.current!==null||n.memoizedState!==null)&&(ui=e)}function Rg(e){if(e.tag===22){if($(xe,xe.current),$(Pn,e),ui===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(ui=e)}}else _r()}function _r(){$(xe,xe.current),$(Pn,Pn.current)}function Gi(e){it(Pn),ui===e&&(ui=null),it(xe)}var xe=X(0);function qu(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||fd(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Af(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:S({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var bf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=An(),h=mr(o);h.payload=n,a!=null&&(h.callback=a),n=pr(e,h,o),n!==null&&(bn(n,e,o),qo(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=An(),h=mr(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=pr(e,h,o),n!==null&&(bn(n,e,o),qo(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=An(),o=mr(a);o.tag=2,n!=null&&(o.callback=n),n=pr(e,o,a),n!==null&&(bn(n,e,a),qo(n,e,a))}};function Ig(e,n,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):n.prototype&&n.prototype.isPureReactComponent?!xo(a,o)||!xo(h,f):!0}function Cg(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&bf.enqueueReplaceState(n,n.state,null)}function Ms(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=S({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Gu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Dg(e){Gu(e)}function Og(e){console.error(e)}function Ng(e){Gu(e)}function Fu(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Mg(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function wf(e,n,a){return a=mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Fu(e,n)},a}function xg(e){return e=mr(e),e.tag=3,e}function Vg(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Mg(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Mg(n,a,o),typeof h!="function"&&(br===null?br=new Set([this]):br.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function K0(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Lo(n,a,h,!0),a=Pn.current,a!==null){switch(a.tag){case 13:return ui===null?Xf():a.alternate===null&&fe===0&&(fe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===$h?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Zf(e,o,h)),!1;case 22:return a.flags|=65536,o===$h?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Zf(e,o,h)),!1}throw Error(s(435,a.tag))}return Zf(e,o,h),Xf(),!1}if(Qt)return n=Pn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Qh&&(e=Error(s(422),{cause:o}),Uo(Mn(e,a)))):(o!==Qh&&(n=Error(s(423),{cause:o}),Uo(Mn(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Mn(o,a),h=wf(e.stateNode,o,h),nf(e,h),fe!==4&&(fe=2)),!1;var f=Error(s(520),{cause:o});if(f=Mn(f,a),rl===null?rl=[f]:rl.push(f),fe!==4&&(fe=2),n===null)return!0;o=Mn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=wf(a.stateNode,o,e),nf(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(br===null||!br.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=xg(h),Vg(h,e,a,o),nf(a,h),!1}a=a.return}while(a!==null);return!1}var kg=Error(s(461)),Le=!1;function Fe(e,n,a,o){n.child=e===null?wg(n,null,a,o):Ra(n,e.child,a,o)}function Pg(e,n,a,o,h){a=a.render;var f=n.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ds(n),o=lf(e,n,a,v,f,h),E=uf(),e!==null&&!Le?(cf(e,n,h),Fi(e,n,h)):(Qt&&E&&Gh(n),n.flags|=1,Fe(e,n,o,h),n.child)}function Ug(e,n,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!jh(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,Lg(e,n,f,o,h)):(e=bu(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!xf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:xo,a(v,o)&&e.ref===n.ref)return Fi(e,n,h)}return n.flags|=1,e=Li(f,o),e.ref=n.ref,e.return=n,n.child=e}function Lg(e,n,a,o,h){if(e!==null){var f=e.memoizedProps;if(xo(f,o)&&e.ref===n.ref)if(Le=!1,n.pendingProps=o=f,xf(e,h))(e.flags&131072)!==0&&(Le=!0);else return n.lanes=e.lanes,Fi(e,n,h)}return Rf(e,n,a,o,h)}function zg(e,n,a){var o=n.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=n.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return Bg(e,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Du(n,f!==null?f.cachePool:null),f!==null?Lp(n,f):sf(),Rg(n);else return n.lanes=n.childLanes=536870912,Bg(e,n,f!==null?f.baseLanes|a:a,a)}else f!==null?(Du(n,f.cachePool),Lp(n,f),_r(),n.memoizedState=null):(e!==null&&Du(n,null),sf(),_r());return Fe(e,n,h,a),n.child}function Bg(e,n,a,o){var h=Jh();return h=h===null?null:{parent:Me._currentValue,pool:h},n.memoizedState={baseLanes:a,cachePool:h},e!==null&&Du(n,null),sf(),Rg(n),e!==null&&Lo(e,n,o,!0),null}function Qu(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Rf(e,n,a,o,h){return Ds(n),a=lf(e,n,a,o,void 0,h),o=uf(),e!==null&&!Le?(cf(e,n,h),Fi(e,n,h)):(Qt&&o&&Gh(n),n.flags|=1,Fe(e,n,a,h),n.child)}function jg(e,n,a,o,h,f){return Ds(n),n.updateQueue=null,a=Bp(n,o,a,h),zp(e),o=uf(),e!==null&&!Le?(cf(e,n,f),Fi(e,n,f)):(Qt&&o&&Gh(n),n.flags|=1,Fe(e,n,a,f),n.child)}function Hg(e,n,a,o,h){if(Ds(n),n.stateNode===null){var f=ga,v=a.contextType;typeof v=="object"&&v!==null&&(f=Ze(v)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=bf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},tf(n),v=a.contextType,f.context=typeof v=="object"&&v!==null?Ze(v):ga,f.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Af(n,a,v,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&bf.enqueueReplaceState(f,f.state,null),Fo(n,o,f,h),Go(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,b=Ms(a,E);f.props=b;var L=f.context,G=a.contextType;v=ga,typeof G=="object"&&G!==null&&(v=Ze(G));var K=a.getDerivedStateFromProps;G=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&Cg(n,f,o,v),dr=!1;var z=n.memoizedState;f.state=z,Fo(n,o,f,h),Go(),L=n.memoizedState,E||z!==L||dr?(typeof K=="function"&&(Af(n,a,K,o),L=n.memoizedState),(b=dr||Ig(n,a,b,o,z,L,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,ef(e,n),v=n.memoizedProps,G=Ms(a,v),f.props=G,K=n.pendingProps,z=f.context,L=a.contextType,b=ga,typeof L=="object"&&L!==null&&(b=Ze(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==K||z!==b)&&Cg(n,f,o,b),dr=!1,z=n.memoizedState,f.state=z,Fo(n,o,f,h),Go();var B=n.memoizedState;v!==K||z!==B||dr||e!==null&&e.dependencies!==null&&Iu(e.dependencies)?(typeof E=="function"&&(Af(n,a,E,o),B=n.memoizedState),(G=dr||Ig(n,a,G,o,z,B,b)||e!==null&&e.dependencies!==null&&Iu(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,b)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=B),f.props=o,f.state=B,f.context=b,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Qu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=Ra(n,e.child,null,h),n.child=Ra(n,null,a,h)):Fe(e,n,a,h),n.memoizedState=f.state,e=n.child):e=Fi(e,n,h),e}function qg(e,n,a,o){return Po(),n.flags|=256,Fe(e,n,a,o),n.child}var If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(e){return{baseLanes:e,cachePool:Op()}}function Df(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Un),e}function Gg(e,n,a){var o=n.pendingProps,h=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(xe.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Qt){if(h?yr(n):_r(),Qt){var E=he,b;if(b=E){t:{for(b=E,E=li;b.nodeType!==8;){if(!E){E=null;break t}if(b=Qn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(n.memoizedState={dehydrated:E,treeContext:bs!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},b=vn(18,null,null,0),b.stateNode=E,b.return=n,n.child=b,on=n,he=null,b=!0):b=!1}b||Is(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return fd(E)?n.lanes=32:n.lanes=536870912,null;Gi(n)}return E=o.children,o=o.fallback,h?(_r(),h=n.mode,E=Ku({mode:"hidden",children:E},h),o=As(o,h,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,h=n.child,h.memoizedState=Cf(a),h.childLanes=Df(e,v,a),n.memoizedState=If,o):(yr(n),Of(n,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)n.flags&256?(yr(n),n.flags&=-257,n=Nf(e,n,a)):n.memoizedState!==null?(_r(),n.child=e.child,n.flags|=128,n=null):(_r(),h=o.fallback,E=n.mode,o=Ku({mode:"visible",children:o.children},E),h=As(h,E,a,null),h.flags|=2,o.return=n,h.return=n,o.sibling=h,n.child=o,Ra(n,e.child,null,a),o=n.child,o.memoizedState=Cf(a),o.childLanes=Df(e,v,a),n.memoizedState=If,n=h);else if(yr(n),fd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Uo({value:o,source:null,stack:null}),n=Nf(e,n,a)}else if(Le||Lo(e,n,a,!1),v=(a&e.childLanes)!==0,Le||v){if(v=ne,v!==null&&(o=a&-a,o=(o&42)!==0?1:sr(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,pa(e,o),bn(v,e,o),kg;E.data==="$?"||Xf(),n=Nf(e,n,a)}else E.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=b.treeContext,he=Qn(E.nextSibling),on=n,Qt=!0,Rs=null,li=!1,e!==null&&(Vn[kn++]=zi,Vn[kn++]=Bi,Vn[kn++]=bs,zi=e.id,Bi=e.overflow,bs=n),n=Of(n,o.children),n.flags|=4096);return n}return h?(_r(),h=o.fallback,E=n.mode,b=e.child,L=b.sibling,o=Li(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?h=Li(L,h):(h=As(h,E,a,null),h.flags|=2),h.return=n,o.return=n,o.sibling=h,n.child=o,o=h,h=n.child,E=e.child.memoizedState,E===null?E=Cf(a):(b=E.cachePool,b!==null?(L=Me._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Op(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=Df(e,v,a),n.memoizedState=If,o):(yr(n),a=e.child,e=a.sibling,a=Li(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Of(e,n){return n=Ku({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ku(e,n){return e=vn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Nf(e,n,a){return Ra(n,e.child,null,a),e=Of(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Fg(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Yh(e.return,n,a)}function Mf(e,n,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function Qg(e,n,a){var o=n.pendingProps,h=o.revealOrder,f=o.tail;if(Fe(e,n,o.children,a),o=xe.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fg(e,a,n);else if(e.tag===19)Fg(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch($(xe,o),h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&qu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),Mf(n,!1,h,a,f);break;case"backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&qu(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Mf(n,!0,a,null,f);break;case"together":Mf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Fi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Ar|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Lo(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Li(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Li(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function xf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Iu(e)))}function Y0(e,n,a){switch(n.tag){case 3:Ft(n,n.stateNode.containerInfo),fr(n,Me,e.memoizedState.cache),Po();break;case 27:case 5:pn(n);break;case 4:Ft(n,n.stateNode.containerInfo);break;case 10:fr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(yr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Gg(e,n,a):(yr(n),e=Fi(e,n,a),e!==null?e.sibling:null);yr(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Lo(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return Qg(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),$(xe,xe.current),o)break;return null;case 22:case 23:return n.lanes=0,zg(e,n,a);case 24:fr(n,Me,e.memoizedState.cache)}return Fi(e,n,a)}function Kg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Le=!0;else{if(!xf(e,a)&&(n.flags&128)===0)return Le=!1,Y0(e,n,a);Le=(e.flags&131072)!==0}else Le=!1,Qt&&(n.flags&1048576)!==0&&Ap(n,Ru,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,h=o._init;if(o=h(o._payload),n.type=o,typeof o=="function")jh(o)?(e=Ms(o,e),n.tag=1,n=Hg(null,n,o,e,a)):(n.tag=0,n=Rf(null,n,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===qt){n.tag=11,n=Pg(null,n,o,e,a);break t}else if(h===x){n.tag=14,n=Ug(null,n,o,e,a);break t}}throw n=ce(o)||o,Error(s(306,n,""))}}return n;case 0:return Rf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=Ms(o,n.pendingProps),Hg(e,n,o,h,a);case 3:t:{if(Ft(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;h=f.element,ef(e,n),Fo(n,o,null,a);var v=n.memoizedState;if(o=v.cache,fr(n,Me,o),o!==f.cache&&Xh(n,[Me],a,!0),Go(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=qg(e,n,o,a);break t}else if(o!==h){h=Mn(Error(s(424)),n),Uo(h),n=qg(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(he=Qn(e.firstChild),on=n,Qt=!0,Rs=null,li=!0,a=wg(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Po(),o===h){n=Fi(e,n,a);break t}Fe(e,n,o,a)}n=n.child}return n;case 26:return Qu(e,n),e===null?(a=Zy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Qt||(a=n.type,e=n.pendingProps,o=oc(mt.current).createElement(a),o[De]=n,o[Te]=e,Ke(o,a,e),me(o),n.stateNode=o):n.memoizedState=Zy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return pn(n),e===null&&Qt&&(o=n.stateNode=Yy(n.type,n.pendingProps,mt.current),on=n,li=!0,h=he,Ir(n.type)?(dd=h,he=Qn(o.firstChild)):he=h),Fe(e,n,n.pendingProps.children,a),Qu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Qt&&((h=o=he)&&(o=SS(o,n.type,n.pendingProps,li),o!==null?(n.stateNode=o,on=n,he=Qn(o.firstChild),li=!1,h=!0):h=!1),h||Is(n)),pn(n),h=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,ud(h,f)?o=null:v!==null&&ud(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=lf(e,n,B0,null,null,a),dl._currentValue=h),Qu(e,n),Fe(e,n,o,a),n.child;case 6:return e===null&&Qt&&((e=a=he)&&(a=AS(a,n.pendingProps,li),a!==null?(n.stateNode=a,on=n,he=null,e=!0):e=!1),e||Is(n)),null;case 13:return Gg(e,n,a);case 4:return Ft(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Ra(n,null,o,a):Fe(e,n,o,a),n.child;case 11:return Pg(e,n,n.type,n.pendingProps,a);case 7:return Fe(e,n,n.pendingProps,a),n.child;case 8:return Fe(e,n,n.pendingProps.children,a),n.child;case 12:return Fe(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,fr(n,n.type,o.value),Fe(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Ds(n),h=Ze(h),o=o(h),n.flags|=1,Fe(e,n,o,a),n.child;case 14:return Ug(e,n,n.type,n.pendingProps,a);case 15:return Lg(e,n,n.type,n.pendingProps,a);case 19:return Qg(e,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},e===null?(a=Ku(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Li(e.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return zg(e,n,a);case 24:return Ds(n),o=Ze(Me),e===null?(h=Jh(),h===null&&(h=ne,f=Wh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),n.memoizedState={parent:o,cache:h},tf(n),fr(n,Me,h)):((e.lanes&a)!==0&&(ef(e,n),Fo(n,null,null,a),Go()),h=e.memoizedState,f=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),fr(n,Me,o)):(o=f.cache,fr(n,Me,o),o!==h.cache&&Xh(n,[Me],a,!0))),Fe(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Qi(e){e.flags|=4}function Yg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!n_(n)){if(n=Pn.current,n!==null&&((zt&4194048)===zt?ui!==null:(zt&62914560)!==zt&&(zt&536870912)===0||n!==ui))throw Ho=$h,Np;e.flags|=8192}}function Yu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?po():536870912,e.lanes|=n,Oa|=n)}function Jo(e,n){if(!Qt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function le(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function X0(e,n,a){var o=n.pendingProps;switch(Fh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(n),null;case 1:return le(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Hi(Me),mn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ko(n)?Qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Rp())),le(n),null;case 26:return a=n.memoizedState,e===null?(Qi(n),a!==null?(le(n),Yg(n,a)):(le(n),n.flags&=-16777217)):a?a!==e.memoizedState?(Qi(n),le(n),Yg(n,a)):(le(n),n.flags&=-16777217):(e.memoizedProps!==o&&Qi(n),le(n),n.flags&=-16777217),null;case 27:gn(n),a=mt.current;var h=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return le(n),null}e=ct.current,ko(n)?bp(n):(e=Yy(h,o,a),n.stateNode=e,Qi(n))}return le(n),null;case 5:if(gn(n),a=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return le(n),null}if(e=ct.current,ko(n))bp(n);else{switch(h=oc(mt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[De]=n,e[Te]=o;t:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=e;t:switch(Ke(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Qi(n)}}return le(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Qi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=mt.current,ko(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=on,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[De]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||jy(e.nodeValue,a)),e||Is(n)}else e=oc(e).createTextNode(o),e[De]=n,n.stateNode=e}return le(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=ko(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[De]=n}else Po(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;le(n),h=!1}else h=Rp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Gi(n),n):(Gi(n),null)}if(Gi(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(n.child.flags|=8192),Yu(n,n.updateQueue),le(n),null;case 4:return mn(),e===null&&rd(n.stateNode.containerInfo),le(n),null;case 10:return Hi(n.type),le(n),null;case 19:if(it(xe),h=n.memoizedState,h===null)return le(n),null;if(o=(n.flags&128)!==0,f=h.rendering,f===null)if(o)Jo(h,!1);else{if(fe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=qu(e),f!==null){for(n.flags|=128,Jo(h,!1),e=f.updateQueue,n.updateQueue=e,Yu(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Sp(a,e),a=a.sibling;return $(xe,xe.current&1|2),n.child}e=e.sibling}h.tail!==null&&ln()>Zu&&(n.flags|=128,o=!0,Jo(h,!1),n.lanes=4194304)}else{if(!o)if(e=qu(f),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,Yu(n,e),Jo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Qt)return le(n),null}else 2*ln()-h.renderingStartTime>Zu&&a!==536870912&&(n.flags|=128,o=!0,Jo(h,!1),n.lanes=4194304);h.isBackwards?(f.sibling=n.child,n.child=f):(e=h.last,e!==null?e.sibling=f:n.child=f,h.last=f)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=ln(),n.sibling=null,e=xe.current,$(xe,o?e&1|2:e&1),n):(le(n),null);case 22:case 23:return Gi(n),af(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(le(n),n.subtreeFlags&6&&(n.flags|=8192)):le(n),a=n.updateQueue,a!==null&&Yu(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&it(Os),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Hi(Me),le(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function W0(e,n){switch(Fh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Hi(Me),mn(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return gn(n),null;case 13:if(Gi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Po()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return it(xe),null;case 4:return mn(),null;case 10:return Hi(n.type),null;case 22:case 23:return Gi(n),af(),e!==null&&it(Os),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Hi(Me),null;case 25:return null;default:return null}}function Xg(e,n){switch(Fh(n),n.tag){case 3:Hi(Me),mn();break;case 26:case 27:case 5:gn(n);break;case 4:mn();break;case 13:Gi(n);break;case 19:it(xe);break;case 10:Hi(n.type);break;case 22:case 23:Gi(n),af(),e!==null&&it(Os);break;case 24:Hi(Me)}}function $o(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){ee(n,n.return,E)}}function vr(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=n;var b=a,L=E;try{L()}catch(G){ee(h,b,G)}}}o=o.next}while(o!==f)}}catch(G){ee(n,n.return,G)}}function Wg(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Up(n,a)}catch(o){ee(e,e.return,o)}}}function Zg(e,n,a){a.props=Ms(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ee(e,n,o)}}function tl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){ee(e,n,h)}}function ci(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){ee(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ee(e,n,h)}else a.current=null}function Jg(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){ee(e,e.return,h)}}function Vf(e,n,a){try{var o=e.stateNode;yS(o,e.type,a,n),o[Te]=n}catch(h){ee(e,e.return,h)}}function $g(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ir(e.type)||e.tag===4}function kf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||$g(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ir(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pf(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ac));else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Pf(e,n,a),e=e.sibling;e!==null;)Pf(e,n,a),e=e.sibling}function Xu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Xu(e,n,a),e=e.sibling;e!==null;)Xu(e,n,a),e=e.sibling}function ty(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Ke(n,o,a),n[De]=e,n[Te]=a}catch(f){ee(e,e.return,f)}}var Ki=!1,ge=!1,Uf=!1,ey=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Z0(e,n){if(e=e.containerInfo,od=dc,e=fp(e),Vh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,G=0,K=e,z=null;e:for(;;){for(var B;K!==a||h!==0&&K.nodeType!==3||(E=v+h),K!==f||o!==0&&K.nodeType!==3||(b=v+o),K.nodeType===3&&(v+=K.nodeValue.length),(B=K.firstChild)!==null;)z=K,K=B;for(;;){if(K===e)break e;if(z===a&&++L===h&&(E=v),z===f&&++G===o&&(b=v),(B=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=B}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(ld={focusedElem:e,selectionRange:a},dc=!1,ze=n;ze!==null;)if(n=ze,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,ze=e;else for(;ze!==null;){switch(n=ze,f=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Et=Ms(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Et,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(dt){ee(a,a.return,dt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)hd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,ze=e;break}ze=n.return}}function ny(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Er(e,a),o&4&&$o(5,a);break;case 1:if(Er(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){ee(a,a.return,v)}else{var h=Ms(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ee(a,a.return,v)}}o&64&&Wg(a),o&512&&tl(a,a.return);break;case 3:if(Er(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Up(e,n)}catch(v){ee(a,a.return,v)}}break;case 27:n===null&&o&4&&ty(a);case 26:case 5:Er(e,a),n===null&&o&4&&Jg(a),o&512&&tl(a,a.return);break;case 12:Er(e,a);break;case 13:Er(e,a),o&4&&sy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=aS.bind(null,a),bS(e,a))));break;case 22:if(o=a.memoizedState!==null||Ki,!o){n=n!==null&&n.memoizedState!==null||ge,h=Ki;var f=ge;Ki=o,(ge=n)&&!f?Tr(e,a,(a.subtreeFlags&8772)!==0):Er(e,a),Ki=h,ge=f}break;case 30:break;default:Er(e,a)}}function iy(e){var n=e.alternate;n!==null&&(e.alternate=null,iy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&lr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var oe=null,cn=!1;function Yi(e,n,a){for(a=a.child;a!==null;)ry(e,n,a),a=a.sibling}function ry(e,n,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Mt,a)}catch{}switch(a.tag){case 26:ge||ci(a,n),Yi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ge||ci(a,n);var o=oe,h=cn;Ir(a.type)&&(oe=a.stateNode,cn=!1),Yi(e,n,a),ul(a.stateNode),oe=o,cn=h;break;case 5:ge||ci(a,n);case 6:if(o=oe,h=cn,oe=null,Yi(e,n,a),oe=o,cn=h,oe!==null)if(cn)try{(oe.nodeType===9?oe.body:oe.nodeName==="HTML"?oe.ownerDocument.body:oe).removeChild(a.stateNode)}catch(f){ee(a,n,f)}else try{oe.removeChild(a.stateNode)}catch(f){ee(a,n,f)}break;case 18:oe!==null&&(cn?(e=oe,Qy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),yl(e)):Qy(oe,a.stateNode));break;case 4:o=oe,h=cn,oe=a.stateNode.containerInfo,cn=!0,Yi(e,n,a),oe=o,cn=h;break;case 0:case 11:case 14:case 15:ge||vr(2,a,n),ge||vr(4,a,n),Yi(e,n,a);break;case 1:ge||(ci(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Zg(a,n,o)),Yi(e,n,a);break;case 21:Yi(e,n,a);break;case 22:ge=(o=ge)||a.memoizedState!==null,Yi(e,n,a),ge=o;break;default:Yi(e,n,a)}}function sy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{yl(e)}catch(a){ee(n,n.return,a)}}function J0(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new ey),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new ey),n;default:throw Error(s(435,e.tag))}}function Lf(e,n){var a=J0(e);n.forEach(function(o){var h=oS.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function En(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Ir(E.type)){oe=E.stateNode,cn=!1;break t}break;case 5:oe=E.stateNode,cn=!1;break t;case 3:case 4:oe=E.stateNode.containerInfo,cn=!0;break t}E=E.return}if(oe===null)throw Error(s(160));ry(f,v,h),oe=null,cn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ay(n,e),n=n.sibling}var Fn=null;function ay(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:En(n,e),Tn(e),o&4&&(vr(3,e,e.return),$o(3,e),vr(5,e,e.return));break;case 1:En(n,e),Tn(e),o&512&&(ge||a===null||ci(a,a.return)),o&64&&Ki&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Fn;if(En(n,e),Tn(e),o&512&&(ge||a===null||ci(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[os]||f[De]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Ke(f,o,a),f[De]=e,me(f),o=f;break t;case"link":var v=t_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=h.createElement(o),Ke(f,o,a),h.head.appendChild(f);break;case"meta":if(v=t_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=h.createElement(o),Ke(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[De]=e,me(f),o=f}e.stateNode=o}else e_(h,e.type,e.stateNode);else e.stateNode=$y(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?e_(h,e.type,e.stateNode):$y(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Vf(e,e.memoizedProps,a.memoizedProps)}break;case 27:En(n,e),Tn(e),o&512&&(ge||a===null||ci(a,a.return)),a!==null&&o&4&&Vf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(En(n,e),Tn(e),o&512&&(ge||a===null||ci(a,a.return)),e.flags&32){h=e.stateNode;try{Cn(h,"")}catch(B){ee(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Vf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Uf=!0);break;case 6:if(En(n,e),Tn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){ee(e,e.return,B)}}break;case 3:if(cc=null,h=Fn,Fn=lc(n.containerInfo),En(n,e),Fn=h,Tn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{yl(n.containerInfo)}catch(B){ee(e,e.return,B)}Uf&&(Uf=!1,oy(e));break;case 4:o=Fn,Fn=lc(e.stateNode.containerInfo),En(n,e),Tn(e),Fn=o;break;case 12:En(n,e),Tn(e);break;case 13:En(n,e),Tn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Gf=ln()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Lf(e,o)));break;case 22:h=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=Ki,G=ge;if(Ki=L||h,ge=G||b,En(n,e),ge=G,Ki=L,Tn(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||b||Ki||ge||xs(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){b=a=n;try{if(f=b.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var K=b.memoizedProps.style,z=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){ee(b,b.return,B)}}}else if(n.tag===6){if(a===null){b=n;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(B){ee(b,b.return,B)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Lf(e,a))));break;case 19:En(n,e),Tn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Lf(e,o)));break;case 30:break;case 21:break;default:En(n,e),Tn(e)}}function Tn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if($g(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=kf(e);Xu(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Cn(v,""),a.flags&=-33);var E=kf(e);Xu(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=kf(e);Pf(e,L,b);break;default:throw Error(s(161))}}catch(G){ee(e,e.return,G)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function oy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;oy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Er(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ny(e,n.alternate,n),n=n.sibling}function xs(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:vr(4,n,n.return),xs(n);break;case 1:ci(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Zg(n,n.return,a),xs(n);break;case 27:ul(n.stateNode);case 26:case 5:ci(n,n.return),xs(n);break;case 22:n.memoizedState===null&&xs(n);break;case 30:xs(n);break;default:xs(n)}e=e.sibling}}function Tr(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,f=n,v=f.flags;switch(f.tag){case 0:case 11:case 15:Tr(h,f,a),$o(4,f);break;case 1:if(Tr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){ee(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)Pp(b[h],E)}catch(L){ee(o,o.return,L)}}a&&v&64&&Wg(f),tl(f,f.return);break;case 27:ty(f);case 26:case 5:Tr(h,f,a),a&&o===null&&v&4&&Jg(f),tl(f,f.return);break;case 12:Tr(h,f,a);break;case 13:Tr(h,f,a),a&&v&4&&sy(h,f);break;case 22:f.memoizedState===null&&Tr(h,f,a),tl(f,f.return);break;case 30:break;default:Tr(h,f,a)}n=n.sibling}}function zf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zo(a))}function Bf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&zo(e))}function hi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ly(e,n,a,o),n=n.sibling}function ly(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:hi(e,n,a,o),h&2048&&$o(9,n);break;case 1:hi(e,n,a,o);break;case 3:hi(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&zo(e)));break;case 12:if(h&2048){hi(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){ee(n,n.return,b)}}else hi(e,n,a,o);break;case 13:hi(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,v=n.alternate,n.memoizedState!==null?f._visibility&2?hi(e,n,a,o):el(e,n):f._visibility&2?hi(e,n,a,o):(f._visibility|=2,Ia(e,n,a,o,(n.subtreeFlags&10256)!==0)),h&2048&&zf(v,n);break;case 24:hi(e,n,a,o),h&2048&&Bf(n.alternate,n);break;default:hi(e,n,a,o)}}function Ia(e,n,a,o,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=e,v=n,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ia(f,v,E,b,h),$o(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?Ia(f,v,E,b,h):el(f,v):(G._visibility|=2,Ia(f,v,E,b,h)),h&&L&2048&&zf(v.alternate,v);break;case 24:Ia(f,v,E,b,h),h&&L&2048&&Bf(v.alternate,v);break;default:Ia(f,v,E,b,h)}n=n.sibling}}function el(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:el(a,o),h&2048&&zf(o.alternate,o);break;case 24:el(a,o),h&2048&&Bf(o.alternate,o);break;default:el(a,o)}n=n.sibling}}var nl=8192;function Ca(e){if(e.subtreeFlags&nl)for(e=e.child;e!==null;)uy(e),e=e.sibling}function uy(e){switch(e.tag){case 26:Ca(e),e.flags&nl&&e.memoizedState!==null&&US(Fn,e.memoizedState,e.memoizedProps);break;case 5:Ca(e);break;case 3:case 4:var n=Fn;Fn=lc(e.stateNode.containerInfo),Ca(e),Fn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=nl,nl=16777216,Ca(e),nl=n):Ca(e));break;default:Ca(e)}}function cy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function il(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];ze=o,fy(o,e)}cy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)hy(e),e=e.sibling}function hy(e){switch(e.tag){case 0:case 11:case 15:il(e),e.flags&2048&&vr(9,e,e.return);break;case 3:il(e);break;case 12:il(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Wu(e)):il(e);break;default:il(e)}}function Wu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];ze=o,fy(o,e)}cy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:vr(8,n,n.return),Wu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Wu(n));break;default:Wu(n)}e=e.sibling}}function fy(e,n){for(;ze!==null;){var a=ze;switch(a.tag){case 0:case 11:case 15:vr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:zo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,ze=o;else t:for(a=e;ze!==null;){o=ze;var h=o.sibling,f=o.return;if(iy(o),o===a){ze=null;break t}if(h!==null){h.return=f,ze=h;break t}ze=f}}}var $0={getCacheForType:function(e){var n=Ze(Me),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a}},tS=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ne=null,Ot=null,zt=0,Wt=0,Sn=null,Sr=!1,Da=!1,jf=!1,Xi=0,fe=0,Ar=0,Vs=0,Hf=0,Un=0,Oa=0,rl=null,hn=null,qf=!1,Gf=0,Zu=1/0,Ju=null,br=null,Qe=0,wr=null,Na=null,Ma=0,Ff=0,Qf=null,dy=null,sl=0,Kf=null;function An(){if((Xt&2)!==0&&zt!==0)return zt&-zt;if(H.T!==null){var e=va;return e!==0?e:td()}return ar()}function my(){Un===0&&(Un=(zt&536870912)===0||Qt?mo():536870912);var e=Pn.current;return e!==null&&(e.flags|=32),Un}function bn(e,n,a){(e===ne&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)&&(xa(e,0),Rr(e,zt,Un,!1)),Ii(e,a),((Xt&2)===0||e!==ne)&&(e===ne&&((Xt&2)===0&&(Vs|=a),fe===4&&Rr(e,zt,Un,!1)),fi(e))}function py(e,n,a){if((Xt&6)!==0)throw Error(s(327));var o=!a&&(n&124)===0&&(n&e.expiredLanes)===0||as(e,n),h=o?iS(e,n):Wf(e,n,!0),f=o;do{if(h===0){Da&&!o&&Rr(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!eS(a)){h=Wf(e,n,!1),f=!1;continue}if(h===2){if(f=n,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;h=rl;var b=E.current.memoizedState.isDehydrated;if(b&&(xa(E,v).flags|=256),v=Wf(E,v,!1),v!==2){if(jf&&!b){E.errorRecoveryDisabledLanes|=f,Vs|=f,h=4;break t}f=hn,hn=h,f!==null&&(hn===null?hn=f:hn.push.apply(hn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){xa(e,0),Rr(e,n,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Rr(o,n,Un,!Sr);break t;case 2:hn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(h=Gf+300-ln(),10<h)){if(Rr(o,n,Un,!Sr),Ws(o,0,!0)!==0)break t;o.timeoutHandle=Gy(gy.bind(null,o,a,hn,Ju,qf,n,Un,Vs,Oa,Sr,f,2,-0,0),h);break t}gy(o,a,hn,Ju,qf,n,Un,Vs,Oa,Sr,f,0,-0,0)}}break}while(!0);fi(e)}function gy(e,n,a,o,h,f,v,E,b,L,G,K,z,B){if(e.timeoutHandle=-1,K=n.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(fl={stylesheets:null,count:0,unsuspend:PS},uy(n),K=LS(),K!==null)){e.cancelPendingCommit=K(Ay.bind(null,e,n,f,a,o,h,v,E,b,G,1,z,B)),Rr(e,f,v,!L);return}Ay(e,n,f,a,o,h,v,E,b)}function eS(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!_n(f(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Rr(e,n,a,o){n&=~Hf,n&=~Vs,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var f=31-Ce(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Zn(e,a,n)}function $u(){return(Xt&6)===0?(al(0),!1):!0}function Yf(){if(Ot!==null){if(Wt===0)var e=Ot.return;else e=Ot,ji=Cs=null,hf(e),wa=null,Wo=0,e=Ot;for(;e!==null;)Xg(e.alternate,e),e=e.return;Ot=null}}function xa(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,vS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Yf(),ne=e,Ot=a=Li(e.current,null),zt=n,Wt=0,Sn=null,Sr=!1,Da=as(e,n),jf=!1,Oa=Un=Hf=Vs=Ar=fe=0,hn=rl=null,qf=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-Ce(o),f=1<<h;n|=e[h],o&=~f}return Xi=n,Tu(),a}function yy(e,n){Ct=null,H.H=Bu,n===jo||n===Ou?(n=Vp(),Wt=3):n===Np?(n=Vp(),Wt=4):Wt=n===kg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Sn=n,Ot===null&&(fe=1,Fu(e,Mn(n,e.current)))}function _y(){var e=H.H;return H.H=Bu,e===null?Bu:e}function vy(){var e=H.A;return H.A=$0,e}function Xf(){fe=4,Sr||(zt&4194048)!==zt&&Pn.current!==null||(Da=!0),(Ar&134217727)===0&&(Vs&134217727)===0||ne===null||Rr(ne,zt,Un,!1)}function Wf(e,n,a){var o=Xt;Xt|=2;var h=_y(),f=vy();(ne!==e||zt!==n)&&(Ju=null,xa(e,n)),n=!1;var v=fe;t:do try{if(Wt!==0&&Ot!==null){var E=Ot,b=Sn;switch(Wt){case 8:Yf(),v=6;break t;case 3:case 2:case 9:case 6:Pn.current===null&&(n=!0);var L=Wt;if(Wt=0,Sn=null,Va(e,E,b,L),a&&Da){v=0;break t}break;default:L=Wt,Wt=0,Sn=null,Va(e,E,b,L)}}nS(),v=fe;break}catch(G){yy(e,G)}while(!0);return n&&e.shellSuspendCounter++,ji=Cs=null,Xt=o,H.H=h,H.A=f,Ot===null&&(ne=null,zt=0,Tu()),v}function nS(){for(;Ot!==null;)Ey(Ot)}function iS(e,n){var a=Xt;Xt|=2;var o=_y(),h=vy();ne!==e||zt!==n?(Ju=null,Zu=ln()+500,xa(e,n)):Da=as(e,n);t:do try{if(Wt!==0&&Ot!==null){n=Ot;var f=Sn;e:switch(Wt){case 1:Wt=0,Sn=null,Va(e,n,f,1);break;case 2:case 9:if(Mp(f)){Wt=0,Sn=null,Ty(n);break}n=function(){Wt!==2&&Wt!==9||ne!==e||(Wt=7),fi(e)},f.then(n,n);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:Mp(f)?(Wt=0,Sn=null,Ty(n)):(Wt=0,Sn=null,Va(e,n,f,7));break;case 5:var v=null;switch(Ot.tag){case 26:v=Ot.memoizedState;case 5:case 27:var E=Ot;if(!v||n_(v)){Wt=0,Sn=null;var b=E.sibling;if(b!==null)Ot=b;else{var L=E.return;L!==null?(Ot=L,tc(L)):Ot=null}break e}}Wt=0,Sn=null,Va(e,n,f,5);break;case 6:Wt=0,Sn=null,Va(e,n,f,6);break;case 8:Yf(),fe=6;break t;default:throw Error(s(462))}}rS();break}catch(G){yy(e,G)}while(!0);return ji=Cs=null,H.H=o,H.A=h,Xt=a,Ot!==null?0:(ne=null,zt=0,Tu(),fe)}function rS(){for(;Ot!==null&&!es();)Ey(Ot)}function Ey(e){var n=Kg(e.alternate,e,Xi);e.memoizedProps=e.pendingProps,n===null?tc(e):Ot=n}function Ty(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=jg(a,n,n.pendingProps,n.type,void 0,zt);break;case 11:n=jg(a,n,n.pendingProps,n.type.render,n.ref,zt);break;case 5:hf(n);default:Xg(a,n),n=Ot=Sp(n,Xi),n=Kg(a,n,Xi)}e.memoizedProps=e.pendingProps,n===null?tc(e):Ot=n}function Va(e,n,a,o){ji=Cs=null,hf(n),wa=null,Wo=0;var h=n.return;try{if(K0(e,h,n,a,zt)){fe=1,Fu(e,Mn(a,e.current)),Ot=null;return}}catch(f){if(h!==null)throw Ot=h,f;fe=1,Fu(e,Mn(a,e.current)),Ot=null;return}n.flags&32768?(Qt||o===1?e=!0:Da||(zt&536870912)!==0?e=!1:(Sr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Pn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Sy(n,e)):tc(n)}function tc(e){var n=e;do{if((n.flags&32768)!==0){Sy(n,Sr);return}e=n.return;var a=X0(n.alternate,n,Xi);if(a!==null){Ot=a;return}if(n=n.sibling,n!==null){Ot=n;return}Ot=n=e}while(n!==null);fe===0&&(fe=5)}function Sy(e,n){do{var a=W0(e.alternate,e);if(a!==null){a.flags&=32767,Ot=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Ot=e;return}Ot=e=a}while(e!==null);fe=6,Ot=null}function Ay(e,n,a,o,h,f,v,E,b){e.cancelPendingCommit=null;do ec();while(Qe!==0);if((Xt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=zh,go(e,a,f,v,E,b),e===ne&&(Ot=ne=null,zt=0),Na=n,wr=e,Ma=a,Ff=f,Qf=h,dy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,lS(wi,function(){return Cy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=nt.p,nt.p=2,v=Xt,Xt|=4;try{Z0(e,n,a)}finally{Xt=v,nt.p=h,H.T=o}}Qe=1,by(),wy(),Ry()}}function by(){if(Qe===1){Qe=0;var e=wr,n=Na,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=nt.p;nt.p=2;var h=Xt;Xt|=4;try{ay(n,e);var f=ld,v=fp(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&hp(E.ownerDocument.documentElement,E)){if(b!==null&&Vh(E)){var L=b.start,G=b.end;if(G===void 0&&(G=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,z=K&&K.defaultView||window;if(z.getSelection){var B=z.getSelection(),Et=E.textContent.length,dt=Math.min(b.start,Et),te=b.end===void 0?dt:Math.min(b.end,Et);!B.extend&&dt>te&&(v=te,te=dt,dt=v);var k=cp(E,dt),O=cp(E,te);if(k&&O&&(B.rangeCount!==1||B.anchorNode!==k.node||B.anchorOffset!==k.offset||B.focusNode!==O.node||B.focusOffset!==O.offset)){var U=K.createRange();U.setStart(k.node,k.offset),B.removeAllRanges(),dt>te?(B.addRange(U),B.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),B.addRange(U))}}}}for(K=[],B=E;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var F=K[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}dc=!!od,ld=od=null}finally{Xt=h,nt.p=o,H.T=a}}e.current=n,Qe=2}}function wy(){if(Qe===2){Qe=0;var e=wr,n=Na,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=nt.p;nt.p=2;var h=Xt;Xt|=4;try{ny(e,n.alternate,n)}finally{Xt=h,nt.p=o,H.T=a}}Qe=3}}function Ry(){if(Qe===4||Qe===3){Qe=0,Xs();var e=wr,n=Na,a=Ma,o=dy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Qe=5:(Qe=0,Na=wr=null,Iy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(br=null),Zs(a),n=n.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Mt,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=H.T,h=nt.p,nt.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{H.T=n,nt.p=h}}(Ma&3)!==0&&ec(),fi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Kf?sl++:(sl=0,Kf=e):sl=0,al(0)}}function Iy(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,zo(n)))}function ec(e){return by(),wy(),Ry(),Cy()}function Cy(){if(Qe!==5)return!1;var e=wr,n=Ff;Ff=0;var a=Zs(Ma),o=H.T,h=nt.p;try{nt.p=32>a?32:a,H.T=null,a=Qf,Qf=null;var f=wr,v=Ma;if(Qe=0,Na=wr=null,Ma=0,(Xt&6)!==0)throw Error(s(331));var E=Xt;if(Xt|=4,hy(f.current),ly(f,f.current,v,a),Xt=E,al(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Mt,f)}catch{}return!0}finally{nt.p=h,H.T=o,Iy(e,n)}}function Dy(e,n,a){n=Mn(a,n),n=wf(e.stateNode,n,2),e=pr(e,n,2),e!==null&&(Ii(e,2),fi(e))}function ee(e,n,a){if(e.tag===3)Dy(e,e,a);else for(;n!==null;){if(n.tag===3){Dy(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(br===null||!br.has(o))){e=Mn(a,e),a=xg(2),o=pr(n,a,2),o!==null&&(Vg(a,o,n,e),Ii(o,2),fi(o));break}}n=n.return}}function Zf(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new tS;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(jf=!0,h.add(a),e=sS.bind(null,e,n,a),n.then(e,e))}function sS(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ne===e&&(zt&a)===a&&(fe===4||fe===3&&(zt&62914560)===zt&&300>ln()-Gf?(Xt&2)===0&&xa(e,0):Hf|=a,Oa===zt&&(Oa=0)),fi(e)}function Oy(e,n){n===0&&(n=po()),e=pa(e,n),e!==null&&(Ii(e,n),fi(e))}function aS(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Oy(e,a)}function oS(e,n){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Oy(e,a)}function lS(e,n){return Xn(e,n)}var nc=null,ka=null,Jf=!1,ic=!1,$f=!1,ks=0;function fi(e){e!==ka&&e.next===null&&(ka===null?nc=ka=e:ka=ka.next=e),ic=!0,Jf||(Jf=!0,cS())}function al(e,n){if(!$f&&ic){$f=!0;do for(var a=!1,o=nc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Ce(42|e)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Vy(o,f))}else f=zt,f=Ws(o,o===ne?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||as(o,f)||(a=!0,Vy(o,f));o=o.next}while(a);$f=!1}}function uS(){Ny()}function Ny(){ic=Jf=!1;var e=0;ks!==0&&(_S()&&(e=ks),ks=0);for(var n=ln(),a=null,o=nc;o!==null;){var h=o.next,f=My(o,n);f===0?(o.next=null,a===null?nc=h:a.next=h,h===null&&(ka=a)):(a=o,(e!==0||(f&3)!==0)&&(ic=!0)),o=h}al(e)}function My(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Ce(f),E=1<<v,b=h[v];b===-1?((E&a)===0||(E&o)!==0)&&(h[v]=fo(E,n)):b<=n&&(e.expiredLanes|=E),f&=~E}if(n=ne,a=zt,a=Ws(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Rn(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||as(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Rn(o),Zs(a)){case 2:case 8:a=bi;break;case 32:a=wi;break;case 268435456:a=tt;break;default:a=wi}return o=xy.bind(null,e),a=Xn(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Rn(o),e.callbackPriority=2,e.callbackNode=null,2}function xy(e,n){if(Qe!==0&&Qe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ec()&&e.callbackNode!==a)return null;var o=zt;return o=Ws(e,e===ne?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(py(e,o,n),My(e,ln()),e.callbackNode!=null&&e.callbackNode===a?xy.bind(null,e):null)}function Vy(e,n){if(ec())return null;py(e,n,!0)}function cS(){ES(function(){(Xt&6)!==0?Xn(ns,uS):Ny()})}function td(){return ks===0&&(ks=mo()),ks}function ky(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ia(""+e)}function Py(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function hS(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var f=ky((h[Te]||null).action),v=o.submitter;v&&(n=(n=v[Te]||null)?ky(n.formAction):v.getAttribute("formAction"),n!==null&&(f=n,v=null));var E=new ra("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ks!==0){var b=v?Py(h,v):new FormData(h);Ef(a,{pending:!0,data:b,method:h.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?Py(h,v):new FormData(h),Ef(a,{pending:!0,data:b,method:h.method,action:f},f,b))},currentTarget:h}]})}}for(var ed=0;ed<Lh.length;ed++){var nd=Lh[ed],fS=nd.toLowerCase(),dS=nd[0].toUpperCase()+nd.slice(1);Gn(fS,"on"+dS)}Gn(pp,"onAnimationEnd"),Gn(gp,"onAnimationIteration"),Gn(yp,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(O0,"onTransitionRun"),Gn(N0,"onTransitionStart"),Gn(M0,"onTransitionCancel"),Gn(_p,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ol));function Uy(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){Gu(G)}h.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(G){Gu(G)}h.currentTarget=null,f=b}}}}function Nt(e,n){var a=n[_o];a===void 0&&(a=n[_o]=new Set);var o=e+"__bubble";a.has(o)||(Ly(n,e,2,!1),a.add(o))}function id(e,n,a){var o=0;n&&(o|=4),Ly(a,e,o,n)}var rc="_reactListening"+Math.random().toString(36).slice(2);function rd(e){if(!e[rc]){e[rc]=!0,vo.forEach(function(a){a!=="selectionchange"&&(mS.has(a)||id(a,!1,e),id(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[rc]||(n[rc]=!0,id("selectionchange",!1,n))}}function Ly(e,n,a,o){switch(l_(n)){case 2:var h=jS;break;case 8:h=HS;break;default:h=_d}a=h.bind(null,n,a,e),h=void 0,!On||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function sd(e,n,a,o,h){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ci(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}au(function(){var L=f,G=Dn(a),K=[];t:{var z=vp.get(e);if(z!==void 0){var B=ra,Et=e;switch(e){case"keypress":if(ii(a)===0)break t;case"keydown":case"keyup":B=ca;break;case"focusin":Et="focus",B=oa;break;case"focusout":Et="blur",B=oa;break;case"beforeblur":case"afterblur":B=oa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=mu;break;case pp:case gp:case yp:B=la;break;case _p:B=gu;break;case"scroll":case"scrollend":B=ou;break;case"wheel":B=ha;break;case"copy":case"cut":case"paste":B=ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=No;break;case"toggle":case"beforetoggle":B=_u}var dt=(n&4)!==0,te=!dt&&(e==="scroll"||e==="scrollend"),k=dt?z!==null?z+"Capture":null:z;dt=[];for(var O=L,U;O!==null;){var F=O;if(U=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||U===null||k===null||(F=ms(O,k),F!=null&&dt.push(ll(O,F,U))),te)break;O=O.return}0<dt.length&&(z=new B(z,Et,null,a,G),K.push({event:z,listeners:dt}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==Mi&&(Et=a.relatedTarget||a.fromElement)&&(Ci(Et)||Et[In]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(Et=a.relatedTarget||a.toElement,B=L,Et=Et?Ci(Et):null,Et!==null&&(te=c(Et),dt=Et.tag,Et!==te||dt!==5&&dt!==27&&dt!==6)&&(Et=null)):(B=null,Et=L),B!==Et)){if(dt=Nn,F="onMouseLeave",k="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(dt=No,F="onPointerLeave",k="onPointerEnter",O="pointer"),te=B==null?z:$n(B),U=Et==null?z:$n(Et),z=new dt(F,O+"leave",B,a,G),z.target=te,z.relatedTarget=U,F=null,Ci(G)===L&&(dt=new dt(k,O+"enter",Et,a,G),dt.target=U,dt.relatedTarget=te,F=dt),te=F,B&&Et)e:{for(dt=B,k=Et,O=0,U=dt;U;U=Pa(U))O++;for(U=0,F=k;F;F=Pa(F))U++;for(;0<O-U;)dt=Pa(dt),O--;for(;0<U-O;)k=Pa(k),U--;for(;O--;){if(dt===k||k!==null&&dt===k.alternate)break e;dt=Pa(dt),k=Pa(k)}dt=null}else dt=null;B!==null&&zy(K,z,B,dt,!1),Et!==null&&te!==null&&zy(K,te,Et,dt,!0)}}t:{if(z=L?$n(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var ot=rp;else if(Ne(z))if(sp)ot=I0;else{ot=w0;var Dt=b0}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&bo(L.elementType)&&(ot=rp):ot=R0;if(ot&&(ot=ot(e,L))){Ui(K,ot,a,G);break t}Dt&&Dt(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&cr(z,"number",z.value)}switch(Dt=L?$n(L):window,e){case"focusin":(Ne(Dt)||Dt.contentEditable==="true")&&(fa=Dt,kh=L,Vo=null);break;case"focusout":Vo=kh=fa=null;break;case"mousedown":Ph=!0;break;case"contextmenu":case"mouseup":case"dragend":Ph=!1,dp(K,a,G);break;case"selectionchange":if(D0)break;case"keydown":case"keyup":dp(K,a,G)}var ut;if(ai)t:{switch(e){case"compositionstart":var gt="onCompositionStart";break t;case"compositionend":gt="onCompositionEnd";break t;case"compositionupdate":gt="onCompositionUpdate";break t}gt=void 0}else Ut?j(e,a)&&(gt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(gt="onCompositionStart");gt&&(y&&a.locale!=="ko"&&(Ut||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Ut&&(ut=Ro()):(ni=G,hr="value"in ni?ni.value:ni.textContent,Ut=!0)),Dt=sc(L,gt),0<Dt.length&&(gt=new Do(gt,e,null,a,G),K.push({event:gt,listeners:Dt}),ut?gt.data=ut:(ut=et(a),ut!==null&&(gt.data=ut)))),(ut=m?Oe(e,a):Lt(e,a))&&(gt=sc(L,"onBeforeInput"),0<gt.length&&(Dt=new Do("onBeforeInput","beforeinput",null,a,G),K.push({event:Dt,listeners:gt}),Dt.data=ut)),hS(K,e,L,a,G)}Uy(K,n)})}function ll(e,n,a){return{instance:e,listener:n,currentTarget:a}}function sc(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ms(e,a),h!=null&&o.unshift(ll(e,h,f)),h=ms(e,n),h!=null&&o.push(ll(e,h,f))),e.tag===3)return o;e=e.return}return[]}function Pa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zy(e,n,a,o,h){for(var f=n._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,h?(L=ms(a,f),L!=null&&v.unshift(ll(a,L,b))):h||(L=ms(a,f),L!=null&&v.push(ll(a,L,b)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var pS=/\r\n?/g,gS=/\u0000|\uFFFD/g;function By(e){return(typeof e=="string"?e:""+e).replace(pS,`
`).replace(gS,"")}function jy(e,n){return n=By(n),By(e)===n}function ac(){}function $t(e,n,a,o,h,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Cn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Cn(e,""+o);break;case"className":ti(e,"class",o);break;case"tabIndex":ti(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(e,a,o);break;case"style":Ao(e,o,f);break;case"data":if(n!=="object"){ti(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&$t(e,n,"name",h.name,h,null),$t(e,n,"formEncType",h.formEncType,h,null),$t(e,n,"formMethod",h.formMethod,h,null),$t(e,n,"formTarget",h.formTarget,h,null)):($t(e,n,"encType",h.encType,h,null),$t(e,n,"method",h.method,h,null),$t(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=ac);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ia(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),ur(e,"popover",o);break;case"xlinkActuate":qe(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":qe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":qe(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":qe(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":qe(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":qe(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":qe(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":qe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":qe(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ur(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ch.get(a)||a,ur(e,a,o))}}function ad(e,n,a,o,h,f){switch(a){case"style":Ao(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Cn(e,o):(typeof o=="number"||typeof o=="bigint")&&Cn(e,""+o);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ac);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Js.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),f=e[Te]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ur(e,a,o)}}}function Ke(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:$t(e,n,f,v,a,null)}}h&&$t(e,n,"srcSet",a.srcSet,a,null),o&&$t(e,n,"src",a.src,a,null);return;case"input":Nt("invalid",e);var E=f=v=h=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":L=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:$t(e,n,o,G,a,null)}}hs(e,f,E,b,L,v,h,!1),na(e);return;case"select":Nt("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:$t(e,n,h,E,a,null)}n=f,a=v,e.multiple=!!o,n!=null?Ni(e,!!o,n,!1):a!=null&&Ni(e,!!o,a,!0);return;case"textarea":Nt("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:$t(e,n,v,E,a,null)}fs(e,o,h,f),na(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$t(e,n,b,o,a,null)}return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(o=0;o<ol.length;o++)Nt(ol[o],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:$t(e,n,L,o,a,null)}return;default:if(bo(n)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&ad(e,n,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&$t(e,n,E,o,a,null))}function yS(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,b=null,L=null,G=null;for(B in a){var K=a[B];if(a.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=K;default:o.hasOwnProperty(B)||$t(e,n,B,null,o,K)}}for(var z in o){var B=o[z];if(K=a[z],o.hasOwnProperty(z)&&(B!=null||K!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,n));break;default:B!==K&&$t(e,n,z,B,o,K)}}yn(e,v,E,b,L,G,f,h);return;case"select":B=v=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(f)||$t(e,n,f,null,o,b)}for(h in o)if(f=o[h],b=a[h],o.hasOwnProperty(h)&&(f!=null||b!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&$t(e,n,h,f,o,b)}n=E,a=v,o=B,z!=null?Ni(e,!!a,z,!1):!!o!=!!a&&(n!=null?Ni(e,!!a,n,!0):Ni(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:$t(e,n,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&$t(e,n,v,h,o,f)}Zt(e,z,B);return;case"option":for(var Et in a)if(z=a[Et],a.hasOwnProperty(Et)&&z!=null&&!o.hasOwnProperty(Et))switch(Et){case"selected":e.selected=!1;break;default:$t(e,n,Et,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:$t(e,n,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in a)z=a[dt],a.hasOwnProperty(dt)&&z!=null&&!o.hasOwnProperty(dt)&&$t(e,n,dt,null,o,z);for(L in o)if(z=o[L],B=a[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,n));break;default:$t(e,n,L,z,o,B)}return;default:if(bo(n)){for(var te in a)z=a[te],a.hasOwnProperty(te)&&z!==void 0&&!o.hasOwnProperty(te)&&ad(e,n,te,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||ad(e,n,G,z,o,B);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!o.hasOwnProperty(k)&&$t(e,n,k,null,o,z);for(K in o)z=o[K],B=a[K],!o.hasOwnProperty(K)||z===B||z==null&&B==null||$t(e,n,K,z,o,B)}var od=null,ld=null;function oc(e){return e.nodeType===9?e:e.ownerDocument}function Hy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function ud(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var cd=null;function _S(){var e=window.event;return e&&e.type==="popstate"?e===cd?!1:(cd=e,!0):(cd=null,!1)}var Gy=typeof setTimeout=="function"?setTimeout:void 0,vS=typeof clearTimeout=="function"?clearTimeout:void 0,Fy=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof Fy<"u"?function(e){return Fy.resolve(null).then(e).catch(TS)}:Gy;function TS(e){setTimeout(function(){throw e})}function Ir(e){return e==="head"}function Qy(e,n){var a=n,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&ul(v.documentElement),a&2&&ul(v.body),a&4)for(a=v.head,ul(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[os]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(f),yl(n);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);yl(n)}function hd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hd(a),lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function SS(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[os])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Qn(e.nextSibling),e===null)break}return null}function AS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qn(e.nextSibling),e===null))return null;return e}function fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function bS(e,n){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Qn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var dd=null;function Ky(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}function Yy(e,n,a){switch(n=oc(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ul(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);lr(e)}var Ln=new Map,Xy=new Set;function lc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Wi=nt.d;nt.d={f:wS,r:RS,D:IS,C:CS,L:DS,m:OS,X:MS,S:NS,M:xS};function wS(){var e=Wi.f(),n=$u();return e||n}function RS(e){var n=Jn(e);n!==null&&n.tag===5&&n.type==="form"?pg(n):Wi.r(e)}var Ua=typeof document>"u"?null:document;function Wy(e,n,a){var o=Ua;if(o&&typeof n=="string"&&n){var h=Se(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Xy.has(h)||(Xy.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Ke(n,"link",e),me(n),o.head.appendChild(n)))}}function IS(e){Wi.D(e),Wy("dns-prefetch",e,null)}function CS(e,n){Wi.C(e,n),Wy("preconnect",e,n)}function DS(e,n,a){Wi.L(e,n,a);var o=Ua;if(o&&e&&n){var h='link[rel="preload"][as="'+Se(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Se(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Se(a.imageSizes)+'"]')):h+='[href="'+Se(e)+'"]';var f=h;switch(n){case"style":f=La(e);break;case"script":f=za(e)}Ln.has(f)||(e=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Ln.set(f,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(cl(f))||n==="script"&&o.querySelector(hl(f))||(n=o.createElement("link"),Ke(n,"link",e),me(n),o.head.appendChild(n)))}}function OS(e,n){Wi.m(e,n);var a=Ua;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+Se(o)+'"][href="'+Se(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=za(e)}if(!Ln.has(f)&&(e=S({rel:"modulepreload",href:e},n),Ln.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(hl(f)))return}o=a.createElement("link"),Ke(o,"link",e),me(o),a.head.appendChild(o)}}}function NS(e,n,a){Wi.S(e,n,a);var o=Ua;if(o&&e){var h=rn(o).hoistableStyles,f=La(e);n=n||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(cl(f)))E.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Ln.get(f))&&md(e,a);var b=v=o.createElement("link");me(b),Ke(b,"link",e),b._p=new Promise(function(L,G){b.onload=L,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,uc(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function MS(e,n){Wi.X(e,n);var a=Ua;if(a&&e){var o=rn(a).hoistableScripts,h=za(e),f=o.get(h);f||(f=a.querySelector(hl(h)),f||(e=S({src:e,async:!0},n),(n=Ln.get(h))&&pd(e,n),f=a.createElement("script"),me(f),Ke(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function xS(e,n){Wi.M(e,n);var a=Ua;if(a&&e){var o=rn(a).hoistableScripts,h=za(e),f=o.get(h);f||(f=a.querySelector(hl(h)),f||(e=S({src:e,async:!0,type:"module"},n),(n=Ln.get(h))&&pd(e,n),f=a.createElement("script"),me(f),Ke(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function Zy(e,n,a,o){var h=(h=mt.current)?lc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=La(a.href),a=rn(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=La(a.href);var f=rn(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(cl(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Ln.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ln.set(e,a),f||VS(h,e,a,v.state))),n&&o===null)throw Error(s(528,""));return v}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=za(a),a=rn(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function La(e){return'href="'+Se(e)+'"'}function cl(e){return'link[rel="stylesheet"]['+e+"]"}function Jy(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function VS(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ke(n,"link",a),me(n),e.head.appendChild(n))}function za(e){return'[src="'+Se(e)+'"]'}function hl(e){return"script[async]"+e}function $y(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Se(a.href)+'"]');if(o)return n.instance=o,me(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),me(o),Ke(o,"style",h),uc(o,a.precedence,e),n.instance=o;case"stylesheet":h=La(a.href);var f=e.querySelector(cl(h));if(f)return n.state.loading|=4,n.instance=f,me(f),f;o=Jy(a),(h=Ln.get(h))&&md(o,h),f=(e.ownerDocument||e).createElement("link"),me(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Ke(f,"link",o),n.state.loading|=4,uc(f,a.precedence,e),n.instance=f;case"script":return f=za(a.src),(h=e.querySelector(hl(f)))?(n.instance=h,me(h),h):(o=a,(h=Ln.get(f))&&(o=S({},a),pd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),me(h),Ke(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,uc(o,a.precedence,e));return n.instance}function uc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===n)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function md(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function pd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var cc=null;function t_(e,n,a){if(cc===null){var o=new Map,h=cc=new Map;h.set(a,o)}else h=cc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[os]||f[De]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(n)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function e_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function kS(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function n_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var fl=null;function PS(){}function US(e,n,a){if(fl===null)throw Error(s(475));var o=fl;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=La(a.href),f=e.querySelector(cl(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=hc.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=f,me(f);return}f=e.ownerDocument||e,a=Jy(a),(h=Ln.get(h))&&md(a,h),f=f.createElement("link"),me(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Ke(f,"link",a),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=hc.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function LS(){if(fl===null)throw Error(s(475));var e=fl;return e.stylesheets&&e.count===0&&gd(e,e.stylesheets),0<e.count?function(n){var a=setTimeout(function(){if(e.stylesheets&&gd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a)}}:null}function hc(){if(this.count--,this.count===0){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fc=null;function gd(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fc=new Map,n.forEach(zS,e),fc=null,hc.call(e))}function zS(e,n){if(!(n.state.loading&4)){var a=fc.get(e);if(a)var o=a.get(null);else{a=new Map,fc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=n.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=hc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var dl={$$typeof:ht,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function BS(e,n,a,o,h,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function i_(e,n,a,o,h,f,v,E,b,L,G,K){return e=new BS(e,n,a,v,E,b,L,K),n=1,f===!0&&(n|=24),f=vn(3,null,null,n),e.current=f,f.stateNode=e,n=Wh(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},tf(f),e}function r_(e){return e?(e=ga,e):ga}function s_(e,n,a,o,h,f){h=r_(h),o.context===null?o.context=h:o.pendingContext=h,o=mr(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=pr(e,o,n),a!==null&&(bn(a,e,n),qo(a,e,n))}function a_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function yd(e,n){a_(e,n),(e=e.alternate)&&a_(e,n)}function o_(e){if(e.tag===13){var n=pa(e,67108864);n!==null&&bn(n,e,67108864),yd(e,67108864)}}var dc=!0;function jS(e,n,a,o){var h=H.T;H.T=null;var f=nt.p;try{nt.p=2,_d(e,n,a,o)}finally{nt.p=f,H.T=h}}function HS(e,n,a,o){var h=H.T;H.T=null;var f=nt.p;try{nt.p=8,_d(e,n,a,o)}finally{nt.p=f,H.T=h}}function _d(e,n,a,o){if(dc){var h=vd(o);if(h===null)sd(e,n,o,mc,a),u_(e,o);else if(GS(h,e,n,a,o))o.stopPropagation();else if(u_(e,o),n&4&&-1<qS.indexOf(e)){for(;h!==null;){var f=Jn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=jn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-Ce(v);E.entanglements[1]|=b,v&=~b}fi(f),(Xt&6)===0&&(Zu=ln()+500,al(0))}}break;case 13:E=pa(f,2),E!==null&&bn(E,f,2),$u(),yd(f,2)}if(f=vd(o),f===null&&sd(e,n,o,mc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else sd(e,n,o,null,a)}}function vd(e){return e=Dn(e),Ed(e)}var mc=null;function Ed(e){if(mc=null,e=Ci(e),e!==null){var n=c(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return mc=e,null}function l_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(co()){case ns:return 2;case bi:return 8;case wi:case ho:return 32;case tt:return 268435456;default:return 32}default:return 32}}var Td=!1,Cr=null,Dr=null,Or=null,ml=new Map,pl=new Map,Nr=[],qS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u_(e,n){switch(e){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":ml.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(n.pointerId)}}function gl(e,n,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},n!==null&&(n=Jn(n),n!==null&&o_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function GS(e,n,a,o,h){switch(n){case"focusin":return Cr=gl(Cr,e,n,a,o,h),!0;case"dragenter":return Dr=gl(Dr,e,n,a,o,h),!0;case"mouseover":return Or=gl(Or,e,n,a,o,h),!0;case"pointerover":var f=h.pointerId;return ml.set(f,gl(ml.get(f)||null,e,n,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,pl.set(f,gl(pl.get(f)||null,e,n,a,o,h)),!0}return!1}function c_(e){var n=Ci(e.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,$l(e.priority,function(){if(a.tag===13){var o=An();o=sr(o);var h=pa(a,o);h!==null&&bn(h,a,o),yd(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=vd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Mi=o,a.target.dispatchEvent(o),Mi=null}else return n=Jn(a),n!==null&&o_(n),e.blockedOn=a,!1;n.shift()}return!0}function h_(e,n,a){pc(e)&&a.delete(n)}function FS(){Td=!1,Cr!==null&&pc(Cr)&&(Cr=null),Dr!==null&&pc(Dr)&&(Dr=null),Or!==null&&pc(Or)&&(Or=null),ml.forEach(h_),pl.forEach(h_)}function gc(e,n){e.blockedOn===n&&(e.blockedOn=null,Td||(Td=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,FS)))}var yc=null;function f_(e){yc!==e&&(yc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yc===e&&(yc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Ed(o||a)===null)continue;break}var f=Jn(a);f!==null&&(e.splice(n,3),n-=3,Ef(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function yl(e){function n(b){return gc(b,e)}Cr!==null&&gc(Cr,e),Dr!==null&&gc(Dr,e),Or!==null&&gc(Or,e),ml.forEach(n),pl.forEach(n);for(var a=0;a<Nr.length;a++){var o=Nr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Nr.length&&(a=Nr[0],a.blockedOn===null);)c_(a),a.blockedOn===null&&Nr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[Te]||null;if(typeof f=="function")v||f_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[Te]||null)E=v.formAction;else if(Ed(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),f_(a)}}}function Sd(e){this._internalRoot=e}_c.prototype.render=Sd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=An();s_(a,o,e,n,null,null)},_c.prototype.unmount=Sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;s_(e.current,2,null,e,null,null),$u(),n[In]=null}};function _c(e){this._internalRoot=e}_c.prototype.unstable_scheduleHydration=function(e){if(e){var n=ar();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Nr.length&&n!==0&&n<Nr[a].priority;a++);Nr.splice(a,0,e),a===0&&c_(e)}};var d_=t.version;if(d_!=="19.1.0")throw Error(s(527,d_,"19.1.0"));nt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(n),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var QS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{Mt=vc.inject(QS),wt=vc}catch{}}return vl.createRoot=function(e,n){if(!l(e))throw Error(s(299));var a=!1,o="",h=Dg,f=Og,v=Ng,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=i_(e,1,!1,null,null,a,o,h,f,v,E,null),e[In]=n.current,rd(e),new Sd(n)},vl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=Dg,v=Og,E=Ng,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),n=i_(e,1,!0,n,a??null,o,h,f,v,E,b,L),n.context=r_(null),a=n.current,o=An(),o=sr(o),h=mr(o),h.callback=null,pr(a,h,o),a=o,n.current.lanes=a,Ii(n,a),fi(n),e[In]=n.current,rd(e),new _c(n)},vl.version="19.1.0",vl}var A_;function nA(){if(A_)return wd.exports;A_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),wd.exports=eA(),wd.exports}var iA=nA();const rA=()=>{};var b_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=function(r){const t=[];let i=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},sA=function(r){const t=[];let i=0,s=0;for(;i<r.length;){const l=r[i++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[i++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[i++],d=r[i++],p=r[i++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[i++],d=r[i++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},eE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,g=l+2<r.length,_=g?r[l+2]:0,S=c>>2,C=(c&3)<<4|p>>4;let D=(p&15)<<2|_>>6,q=_&63;g||(q=64,d||(D=64)),s.push(i[S],i[C],i[D],i[q])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(tE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):sA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=i[r.charAt(l++)],p=l<r.length?i[r.charAt(l)]:0;++l;const _=l<r.length?i[r.charAt(l)]:64;++l;const C=l<r.length?i[r.charAt(l)]:64;if(++l,c==null||p==null||_==null||C==null)throw new aA;const D=c<<2|p>>4;if(s.push(D),_!==64){const q=p<<4&240|_>>2;if(s.push(q),C!==64){const W=_<<6&192|C;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class aA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oA=function(r){const t=tE(r);return eE.encodeByteArray(t,!0)},Uc=function(r){return oA(r).replace(/\./g,"")},nE=function(r){try{return eE.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=()=>lA().__FIREBASE_DEFAULTS__,cA=()=>{if(typeof process>"u"||typeof b_>"u")return;const r=b_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},hA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&nE(r[1]);return t&&JSON.parse(t)},ih=()=>{try{return rA()||uA()||cA()||hA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iE=r=>ih()?.emulatorHosts?.[r],fA=r=>{const t=iE(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),s]:[t.substring(0,i),s]},rE=()=>ih()?.config,sE=r=>ih()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Uc(JSON.stringify(i)),Uc(JSON.stringify(d)),""].join(".")}const Rl={};function pA(){const r={prod:[],emulator:[]};for(const t of Object.keys(Rl))Rl[t]?r.emulator.push(t):r.prod.push(t);return r}function gA(r){let t=document.getElementById(r),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),i=!0),{created:i,element:t}}let w_=!1;function oE(r,t){if(typeof window>"u"||typeof document>"u"||!io(window.location.host)||Rl[r]===t||Rl[r]||w_)return;Rl[r]=t;function i(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=pA().prod.length>0;function d(){const D=document.getElementById(s);D&&D.remove()}function p(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function g(D,q){D.setAttribute("width","24"),D.setAttribute("id",q),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function _(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{w_=!0,d()},D}function S(D,q){D.setAttribute("id",q),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function C(){const D=gA(s),q=i("text"),W=document.getElementById(q)||document.createElement("span"),rt=i("learnmore"),J=document.getElementById(rt)||document.createElement("a"),Tt=i("preprendIcon"),yt=document.getElementById(Tt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const ht=D.element;p(ht),S(J,rt);const qt=_();g(yt,Tt),ht.append(yt,W,J,qt),document.body.appendChild(ht)}c?(W.innerText="Preview backend disconnected.",yt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(yt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function _A(){const r=ih()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function TA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SA(){const r=nn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function AA(){return!_A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bA(){try{return typeof indexedDB=="object"}catch{return!1}}function wA(){return new Promise((r,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="FirebaseError";class rr extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=RA,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?IA(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new rr(l,p,s)}}function IA(r,t){return r.replace(CA,(i,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const CA=/\{\$([^}]+)}/g;function DA(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Bs(r,t){if(r===t)return!0;const i=Object.keys(r),s=Object.keys(t);for(const l of i){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(R_(c)&&R_(d)){if(!Bs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!i.includes(l))return!1;return!0}function R_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(r){const t=[];for(const[i,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function El(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function Tl(r){const t=r.indexOf("?");if(!t)return"";const i=r.indexOf("#",t);return r.substring(t,i>0?i:void 0)}function OA(r,t){const i=new NA(r,t);return i.subscribe.bind(i)}class NA{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,s){let l;if(t===void 0&&i===void 0&&s===void 0)throw new Error("Missing Observer.");MA(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:s},l.next===void 0&&(l.next=Dd),l.error===void 0&&(l.error=Dd),l.complete===void 0&&(l.complete=Dd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MA(r,t){if(typeof r!="object"||r===null)return!1;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1}function Dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(r){return r&&r._delegate?r._delegate:r}class js{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new dA;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kA(t))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Ps){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ps){return this.instances.has(t)}getOptions(t=Ps){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(t,i){const s=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(s)for(const l of s)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:VA(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ps){return this.component?this.component.multipleInstances?t:Ps:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VA(r){return r===Ps?void 0:r}function kA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new xA(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(xt||(xt={}));const UA={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},LA=xt.INFO,zA={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},BA=(r,t,...i)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=zA[t];if(l)console[l](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ym{constructor(t){this.name=t,this._logLevel=LA,this._logHandler=BA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in xt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?UA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...t),this._logHandler(this,xt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...t),this._logHandler(this,xt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...t),this._logHandler(this,xt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...t),this._logHandler(this,xt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...t),this._logHandler(this,xt.ERROR,...t)}}const jA=(r,t)=>t.some(i=>r instanceof i);let I_,C_;function HA(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qA(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lE=new WeakMap,Gd=new WeakMap,uE=new WeakMap,Od=new WeakMap,_m=new WeakMap;function GA(r){const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{i(zr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&lE.set(i,r)}).catch(()=>{}),_m.set(t,r),t}function FA(r){if(Gd.has(r))return;const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{i(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Gd.set(r,t)}let Fd={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return Gd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||uE.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return zr(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function QA(r){Fd=r(Fd)}function KA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const s=r.call(Nd(this),t,...i);return uE.set(s,t.sort?t.sort():[t]),zr(s)}:qA().includes(r)?function(...t){return r.apply(Nd(this),t),zr(lE.get(this))}:function(...t){return zr(r.apply(Nd(this),t))}}function YA(r){return typeof r=="function"?KA(r):(r instanceof IDBTransaction&&FA(r),jA(r,HA())?new Proxy(r,Fd):r)}function zr(r){if(r instanceof IDBRequest)return GA(r);if(Od.has(r))return Od.get(r);const t=YA(r);return t!==r&&(Od.set(r,t),_m.set(t,r)),t}const Nd=r=>_m.get(r);function XA(r,t,{blocked:i,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),p=zr(d);return s&&d.addEventListener("upgradeneeded",g=>{s(zr(d.result),g.oldVersion,g.newVersion,zr(d.transaction),g)}),i&&d.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const WA=["get","getKey","getAll","getAllKeys","count"],ZA=["put","add","delete","clear"],Md=new Map;function D_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Md.get(t))return Md.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,l=ZA.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(l||WA.includes(i)))return;const c=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(p.shift())),(await Promise.all([_[i](...p),l&&g.done]))[0]};return Md.set(t,c),c}QA(r=>({...r,get:(t,i,s)=>D_(t,i)||r.get(t,i,s),has:(t,i)=>!!D_(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if($A(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function $A(r){return r.getComponent()?.type==="VERSION"}const Qd="@firebase/app",O_="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new ym("@firebase/app"),t1="@firebase/app-compat",e1="@firebase/analytics-compat",n1="@firebase/analytics",i1="@firebase/app-check-compat",r1="@firebase/app-check",s1="@firebase/auth",a1="@firebase/auth-compat",o1="@firebase/database",l1="@firebase/data-connect",u1="@firebase/database-compat",c1="@firebase/functions",h1="@firebase/functions-compat",f1="@firebase/installations",d1="@firebase/installations-compat",m1="@firebase/messaging",p1="@firebase/messaging-compat",g1="@firebase/performance",y1="@firebase/performance-compat",_1="@firebase/remote-config",v1="@firebase/remote-config-compat",E1="@firebase/storage",T1="@firebase/storage-compat",S1="@firebase/firestore",A1="@firebase/ai",b1="@firebase/firestore-compat",w1="firebase",R1="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="[DEFAULT]",I1={[Qd]:"fire-core",[t1]:"fire-core-compat",[n1]:"fire-analytics",[e1]:"fire-analytics-compat",[r1]:"fire-app-check",[i1]:"fire-app-check-compat",[s1]:"fire-auth",[a1]:"fire-auth-compat",[o1]:"fire-rtdb",[l1]:"fire-data-connect",[u1]:"fire-rtdb-compat",[c1]:"fire-fn",[h1]:"fire-fn-compat",[f1]:"fire-iid",[d1]:"fire-iid-compat",[m1]:"fire-fcm",[p1]:"fire-fcm-compat",[g1]:"fire-perf",[y1]:"fire-perf-compat",[_1]:"fire-rc",[v1]:"fire-rc-compat",[E1]:"fire-gcs",[T1]:"fire-gcs-compat",[S1]:"fire-fst",[b1]:"fire-fst-compat",[A1]:"fire-vertex","fire-js":"fire-js",[w1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,C1=new Map,Yd=new Map;function N_(r,t){try{r.container.addComponent(t)}catch(i){tr.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function Wa(r){const t=r.name;if(Yd.has(t))return tr.debug(`There were multiple attempts to register component ${t}.`),!1;Yd.set(t,r);for(const i of Lc.values())N_(i,r);for(const i of C1.values())N_(i,r);return!0}function vm(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function zn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new Hl("app","Firebase",D1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(t,i,s){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=R1;function cE(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const s={name:Kd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Br.create("bad-app-name",{appName:String(l)});if(i||(i=rE()),!i)throw Br.create("no-options");const c=Lc.get(l);if(c){if(Bs(i,c.options)&&Bs(s,c.config))return c;throw Br.create("duplicate-app",{appName:l})}const d=new PA(l);for(const g of Yd.values())d.addComponent(g);const p=new O1(i,s,d);return Lc.set(l,p),p}function hE(r=Kd){const t=Lc.get(r);if(!t&&r===Kd&&rE())return cE();if(!t)throw Br.create("no-app",{appName:r});return t}function jr(r,t,i){let s=I1[r]??r;i&&(s+=`-${i}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),tr.warn(d.join(" "));return}Wa(new js(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="firebase-heartbeat-database",M1=1,Ml="firebase-heartbeat-store";let xd=null;function fE(){return xd||(xd=XA(N1,M1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Ml)}catch(i){console.warn(i)}}}}).catch(r=>{throw Br.create("idb-open",{originalErrorMessage:r.message})})),xd}async function x1(r){try{const i=(await fE()).transaction(Ml),s=await i.objectStore(Ml).get(dE(r));return await i.done,s}catch(t){if(t instanceof rr)tr.warn(t.message);else{const i=Br.create("idb-get",{originalErrorMessage:t?.message});tr.warn(i.message)}}}async function M_(r,t){try{const s=(await fE()).transaction(Ml,"readwrite");await s.objectStore(Ml).put(t,dE(r)),await s.done}catch(i){if(i instanceof rr)tr.warn(i.message);else{const s=Br.create("idb-set",{originalErrorMessage:i?.message});tr.warn(s.message)}}}function dE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=1024,k1=30;class P1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new L1(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=x_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>k1){const l=z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){tr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=x_(),{heartbeatsToSend:i,unsentEntries:s}=U1(this._heartbeatsCache.heartbeats),l=Uc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return tr.warn(t),""}}}function x_(){return new Date().toISOString().substring(0,10)}function U1(r,t=V1){const i=[];let s=r.slice();for(const l of r){const c=i.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),V_(i)>t){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),V_(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class L1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bA()?wA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await x1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return M_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return M_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function V_(r){return Uc(JSON.stringify({version:2,heartbeats:r})).length}function z1(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(r){Wa(new js("platform-logger",t=>new JA(t),"PRIVATE")),Wa(new js("heartbeat",t=>new P1(t),"PRIVATE")),jr(Qd,O_,r),jr(Qd,O_,"esm2020"),jr("fire-js","")}B1("");var j1="firebase",H1="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(j1,H1,"app");function mE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q1=mE,pE=new Hl("auth","Firebase",mE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new ym("@firebase/auth");function G1(r,...t){zc.logLevel<=xt.WARN&&zc.warn(`Auth (${ro}): ${r}`,...t)}function Ic(r,...t){zc.logLevel<=xt.ERROR&&zc.error(`Auth (${ro}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(r,...t){throw Em(r,...t)}function mi(r,...t){return Em(r,...t)}function gE(r,t,i){const s={...q1(),[t]:i};return new Hl("auth","Firebase",s).create(t,{appName:r.name})}function $i(r){return gE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Em(r,...t){if(typeof r!="string"){const i=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(i,...s)}return pE.create(r,...t)}function _t(r,t,...i){if(!r)throw Em(t,...i)}function Zi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Ic(t),new Error(t)}function er(r,t){r||Zi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(){return typeof self<"u"&&self.location?.href||""}function F1(){return k_()==="http:"||k_()==="https:"}function k_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F1()||EA()||"connection"in navigator)?navigator.onLine:!0}function K1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t,i){this.shortDelay=t,this.longDelay=i,er(i>t,"Short delay should be less than long delay!"),this.isMobile=yA()||TA()}get(){return Q1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(r,t){er(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{static initialize(t,i,s){this.fetchImpl=t,i&&(this.headersImpl=i),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],W1=new Gl(3e4,6e4);function Zr(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Jr(r,t,i,s,l={}){return _E(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const p=ql({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _={method:t,headers:g,...c};return vA()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&io(r.emulatorConfig.host)&&(_.credentials="include"),yE.fetch()(await vE(r,r.config.apiHost,i,p),_)})}async function _E(r,t,i){r._canInitEmulator=!1;const s={...Y1,...t};try{const l=new J1(r),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Ec(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,_]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Ec(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Ec(r,"user-disabled",d);const S=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw gE(r,S,_);Yn(r,S)}}catch(l){if(l instanceof rr)throw l;Yn(r,"network-request-failed",{message:String(l)})}}async function Fl(r,t,i,s,l={}){const c=await Jr(r,t,i,s,l);return"mfaPendingCredential"in c&&Yn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function vE(r,t,i,s){const l=`${t}${i}?${s}`,c=r,d=c.config.emulator?Tm(r.config,l):`${r.config.apiScheme}://${l}`;return X1.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function Z1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class J1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,s)=>{this.timer=setTimeout(()=>s(mi(this.auth,"network-request-failed")),W1.get())})}}function Ec(r,t,i){const s={appName:r.name};i.email&&(s.email=i.email),i.phoneNumber&&(s.phoneNumber=i.phoneNumber);const l=mi(r,t,s);return l.customData._tokenResponse=i,l}function P_(r){return r!==void 0&&r.enterprise!==void 0}class $1{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return Z1(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tb(r,t){return Jr(r,"GET","/v2/recaptchaConfig",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(r,t){return Jr(r,"POST","/v1/accounts:delete",t)}async function Bc(r,t){return Jr(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function nb(r,t=!1){const i=He(r),s=await i.getIdToken(t),l=Sm(s);_t(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Il(Vd(l.auth_time)),issuedAtTime:Il(Vd(l.iat)),expirationTime:Il(Vd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Vd(r){return Number(r)*1e3}function Sm(r){const[t,i,s]=r.split(".");if(t===void 0||i===void 0||s===void 0)return Ic("JWT malformed, contained fewer than 3 sections"),null;try{const l=nE(i);return l?JSON.parse(l):(Ic("Failed to decode base64 JWT payload"),null)}catch(l){return Ic("Caught error parsing JWT payload as JSON",l?.toString()),null}}function U_(r){const t=Sm(r);return _t(t,"internal-error"),_t(typeof t.exp<"u","internal-error"),_t(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(r,t,i=!1){if(i)return t;try{return await t}catch(s){throw s instanceof rr&&ib(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function ib({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Il(this.lastLoginAt),this.creationTime=Il(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(r){const t=r.auth,i=await r.getIdToken(),s=await xl(r,Bc(t,{idToken:i}));_t(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?EE(l.providerUserInfo):[],d=ab(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,_=p?g:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Wd(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,S)}async function sb(r){const t=He(r);await jc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ab(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function EE(r){return r.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(r,t){const i=await _E(r,{},async()=>{const s=ql({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await vE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&io(r.emulatorConfig.host)&&(g.credentials="include"),yE.fetch()(d,g)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function lb(r,t){return Jr(r,"POST","/v2/accounts:revokeToken",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){_t(t.idToken,"internal-error"),_t(typeof t.idToken<"u","internal-error"),_t(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):U_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){_t(t.length!==0,"internal-error");const i=U_(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:s,refreshToken:l,expiresIn:c}=await ob(t,i);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,i,s){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,i){const{refreshToken:s,accessToken:l,expirationTime:c}=i,d=new Fa;return s&&(_t(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(_t(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(_t(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Fa,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(r,t){_t(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Kn{constructor({uid:t,auth:i,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new rb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Wd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await xl(this,this.stsTokenManager.getToken(this.auth,t));return _t(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return nb(this,t)}reload(){return sb(this)}_assign(t){this!==t&&(_t(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Kn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),i&&await jc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject($i(this.auth));const t=await this.getIdToken();return await xl(this,eb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const s=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,d=i.photoURL??void 0,p=i.tenantId??void 0,g=i._redirectEventId??void 0,_=i.createdAt??void 0,S=i.lastLoginAt??void 0,{uid:C,emailVerified:D,isAnonymous:q,providerData:W,stsTokenManager:rt}=i;_t(C&&rt,t,"internal-error");const J=Fa.fromJSON(this.name,rt);_t(typeof C=="string",t,"internal-error"),xr(s,t.name),xr(l,t.name),_t(typeof D=="boolean",t,"internal-error"),_t(typeof q=="boolean",t,"internal-error"),xr(c,t.name),xr(d,t.name),xr(p,t.name),xr(g,t.name),xr(_,t.name),xr(S,t.name);const Tt=new Kn({uid:C,auth:t,email:l,emailVerified:D,displayName:s,isAnonymous:q,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:J,createdAt:_,lastLoginAt:S});return W&&Array.isArray(W)&&(Tt.providerData=W.map(yt=>({...yt}))),g&&(Tt._redirectEventId=g),Tt}static async _fromIdTokenResponse(t,i,s=!1){const l=new Fa;l.updateFromServerResponse(i);const c=new Kn({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await jc(c),c}static async _fromGetAccountInfoResponse(t,i,s){const l=i.users[0];_t(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?EE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new Fa;p.updateFromIdToken(s);const g=new Kn({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Wd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=new Map;function Ji(r){er(r instanceof Function,"Expected a class definition");let t=L_.get(r);return t?(er(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,L_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}TE.type="NONE";const z_=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(r,t,i){return`firebase:${r}:${t}:${i}`}class Qa{constructor(t,i,s){this.persistence=t,this.auth=i,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Cc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Cc("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Bc(this.auth,{idToken:t}).catch(()=>{});return i?Kn._fromGetAccountInfoResponse(this.auth,i,t):null}return Kn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,s="authUser"){if(!i.length)return new Qa(Ji(z_),t,s);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||Ji(z_);const d=Cc(s,t.config.apiKey,t.name);let p=null;for(const _ of i)try{const S=await _._get(d);if(S){let C;if(typeof S=="string"){const D=await Bc(t,{idToken:S}).catch(()=>{});if(!D)break;C=await Kn._fromGetAccountInfoResponse(t,D,S)}else C=Kn._fromJSON(t,S);_!==c&&(p=C),c=_;break}}catch{}const g=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Qa(c,t,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(i.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Qa(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(wE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(SE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(IE(t))return"Blackberry";if(CE(t))return"Webos";if(AE(t))return"Safari";if((t.includes("chrome/")||bE(t))&&!t.includes("edge/"))return"Chrome";if(RE(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(i);if(s?.length===2)return s[1]}return"Other"}function SE(r=nn()){return/firefox\//i.test(r)}function AE(r=nn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function bE(r=nn()){return/crios\//i.test(r)}function wE(r=nn()){return/iemobile/i.test(r)}function RE(r=nn()){return/android/i.test(r)}function IE(r=nn()){return/blackberry/i.test(r)}function CE(r=nn()){return/webos/i.test(r)}function Am(r=nn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ub(r=nn()){return Am(r)&&!!window.navigator?.standalone}function cb(){return SA()&&document.documentMode===10}function DE(r=nn()){return Am(r)||RE(r)||CE(r)||IE(r)||/windows phone/i.test(r)||wE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(r,t=[]){let i;switch(r){case"Browser":i=B_(nn());break;case"Worker":i=`${B_(nn())}-${r}`;break;default:i=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${ro}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const s=c=>new Promise((d,p)=>{try{const g=t(c);d(g)}catch(g){p(g)}});s.onAbort=i,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const s of this.queue)await s(t),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(r,t={}){return Jr(r,"GET","/v2/passwordPolicy",Zr(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=6;class mb{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??db,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(i.meetsMinPasswordLength=t.length>=s),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,i,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t,i,s,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j_(this),this.idTokenSubscription=new j_(this),this.beforeStateQueue=new hb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Ji(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Bc(this,{idToken:t}),s=await Kn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(s)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(zn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await jc(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=K1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(zn(this.app))return Promise.reject($i(this));const i=t?He(t):null;return i&&_t(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&_t(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject($i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return zn(this.app)?Promise.reject($i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await fb(this),i=new mb(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Hl("auth","Firebase",t())}onAuthStateChanged(t,i,s){return this.registerStateListener(this.authStateSubscription,t,i,s)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,s){return this.registerStateListener(this.idTokenSubscription,t,i,s)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(s.tenantId=this.tenantId),await lb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const s=await this.getOrInitRedirectPersistenceManager(i);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Ji(t)||this._popupRedirectResolver;_t(i,this,"argument-error"),this.redirectPersistenceManager=await Qa.create(this,[Ji(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,s,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof i=="function"){const g=t.addObserver(i,s,l);return()=>{d=!0,g()}}else{const g=t.addObserver(i);return()=>{d=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=OE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&G1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Qs(r){return He(r)}class j_{constructor(t){this.auth=t,this.observer=null,this.addObserver=OA(i=>this.observer=i)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gb(r){rh=r}function NE(r){return rh.loadJS(r)}function yb(){return rh.recaptchaEnterpriseScript}function _b(){return rh.gapiScript}function vb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Eb{constructor(){this.enterprise=new Tb}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class Tb{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const Sb="recaptcha-enterprise",ME="NO_RECAPTCHA";class Ab{constructor(t){this.type=Sb,this.auth=Qs(t)}async verify(t="verify",i=!1){async function s(c){if(!i){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{tb(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const _=new $1(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(g=>{p(g)})})}function l(c,d,p){const g=window.grecaptcha;P_(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:t}).then(_=>{d(_)}).catch(()=>{d(ME)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Eb().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!i&&P_(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=yb();g.length!==0&&(g+=p),NE(g).then(()=>{l(p,c,d)}).catch(_=>{d(_)})}}).catch(p=>{d(p)})})}}async function H_(r,t,i,s=!1,l=!1){const c=new Ab(r);let d;if(l)d=ME;else try{d=await c.verify(i)}catch{d=await c.verify(i,!0)}const p={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,_=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Zd(r,t,i,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await H_(r,t,i,i==="getOobCode");return s(r,c)}else return s(r,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await H_(r,t,i,i==="getOobCode");return s(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(r,t){const i=vm(r,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(Bs(c,t??{}))return l;Yn(l,"already-initialized")}return i.initialize({options:t})}function wb(r,t){const i=t?.persistence||[],s=(Array.isArray(i)?i:[i]).map(Ji);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function Rb(r,t,i){const s=Qs(r);_t(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=xE(t),{host:d,port:p}=Ib(t),g=p===null?"":`:${p}`,_={url:`${c}//${d}${g}/`},S=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){_t(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_t(Bs(_,s.config.emulator)&&Bs(S,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=S,s.settings.appVerificationDisabledForTesting=!0,io(d)?(aE(`${c}//${d}${g}`),oE("Auth",!0)):Cb()}function xE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function Ib(r){const t=xE(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!i)return{host:"",port:null};const s=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:q_(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:q_(d)}}}function q_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function Cb(){function r(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Zi("not implemented")}_getIdTokenResponse(t){return Zi("not implemented")}_linkToIdToken(t,i){return Zi("not implemented")}_getReauthenticationResolver(t){return Zi("not implemented")}}async function Db(r,t){return Jr(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(r,t){return Fl(r,"POST","/v1/accounts:signInWithPassword",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(r,t){return Fl(r,"POST","/v1/accounts:signInWithEmailLink",Zr(r,t))}async function Mb(r,t){return Fl(r,"POST","/v1/accounts:signInWithEmailLink",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends bm{constructor(t,i,s,l=null){super("password",s),this._email=t,this._password=i,this._tenantId=l}static _fromEmailAndPassword(t,i){return new Vl(t,i,"password")}static _fromEmailAndCode(t,i,s=null){return new Vl(t,i,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zd(t,i,"signInWithPassword",Ob);case"emailLink":return Nb(t,{email:this._email,oobCode:this._password});default:Yn(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const s={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zd(t,s,"signUpPassword",Db);case"emailLink":return Mb(t,{idToken:i,email:this._email,oobCode:this._password});default:Yn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(r,t){return Fl(r,"POST","/v1/accounts:signInWithIdp",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="http://localhost";class Hs extends bm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Hs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Yn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=i;if(!s||!l)return null;const d=new Hs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return Ka(t,i)}_linkToIdToken(t,i){const s=this.buildRequest();return s.idToken=i,Ka(t,s)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Ka(t,i)}buildRequest(){const t={requestUri:xb,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=ql(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kb(r){const t=El(Tl(r)).link,i=t?El(Tl(t)).deep_link_id:null,s=El(Tl(r)).deep_link_id;return(s?El(Tl(s)).link:null)||s||i||t||r}class wm{constructor(t){const i=El(Tl(t)),s=i.apiKey??null,l=i.oobCode??null,c=Vb(i.mode??null);_t(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=kb(t);try{return new wm(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.providerId=so.PROVIDER_ID}static credential(t,i){return Vl._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const s=wm.parseLink(i);return _t(s,"argument-error"),Vl._fromEmailAndCode(t,s.code,s.tenantId)}}so.PROVIDER_ID="password";so.EMAIL_PASSWORD_SIGN_IN_METHOD="password";so.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends VE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Ql{constructor(){super("facebook.com")}static credential(t){return Hs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vr.credentialFromTaggedObject(t)}static credentialFromError(t){return Vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vr.credential(t.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Hs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return kr.credentialFromTaggedObject(t)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:s}=t;if(!i&&!s)return null;try{return kr.credential(i,s)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ql{constructor(){super("github.com")}static credential(t){return Hs._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pr.credentialFromTaggedObject(t)}static credentialFromError(t){return Pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pr.credential(t.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Ql{constructor(){super("twitter.com")}static credential(t,i){return Hs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Ur.credentialFromTaggedObject(t)}static credentialFromError(t){return Ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:s}=t;if(!i||!s)return null;try{return Ur.credential(i,s)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(r,t){return Fl(r,"POST","/v1/accounts:signUp",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,s,l=!1){const c=await Kn._fromIdTokenResponse(t,s,l),d=G_(s);return new qs({user:c,providerId:d,_tokenResponse:s,operationType:i})}static async _forOperation(t,i,s){await t._updateTokensIfNecessary(s,!0);const l=G_(s);return new qs({user:t,providerId:l,_tokenResponse:s,operationType:i})}}function G_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends rr{constructor(t,i,s,l){super(i.code,i.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Hc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,i,s,l){return new Hc(t,i,s,l)}}function kE(r,t,i,s){return(t==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Hc._fromErrorAndOperation(r,c,t,s):c})}async function Ub(r,t,i=!1){const s=await xl(r,t._linkToIdToken(r.auth,await r.getIdToken()),i);return qs._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(r,t,i=!1){const{auth:s}=r;if(zn(s.app))return Promise.reject($i(s));const l="reauthenticate";try{const c=await xl(r,kE(s,l,t,r),i);_t(c.idToken,s,"internal-error");const d=Sm(c.idToken);_t(d,s,"internal-error");const{sub:p}=d;return _t(r.uid===p,s,"user-mismatch"),qs._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Yn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PE(r,t,i=!1){if(zn(r.app))return Promise.reject($i(r));const s="signIn",l=await kE(r,s,t),c=await qs._fromIdTokenResponse(r,s,l);return i||await r._updateCurrentUser(c.user),c}async function zb(r,t){return PE(Qs(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(r){const t=Qs(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Bb(r,t,i){if(zn(r.app))return Promise.reject($i(r));const s=Qs(r),d=await Zd(s,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pb).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&UE(r),g}),p=await qs._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function jb(r,t,i){return zn(r.app)?Promise.reject($i(r)):zb(He(r),so.credential(t,i)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&UE(r),s})}function Hb(r,t,i,s){return He(r).onIdTokenChanged(t,i,s)}function qb(r,t,i){return He(r).beforeAuthStateChanged(t,i)}function Gb(r,t,i,s){return He(r).onAuthStateChanged(t,i,s)}function Fb(r){return He(r).signOut()}const qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=1e3,Kb=10;class zE extends LE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const s=this.storage.getItem(i),l=this.localCache[i];s!==l&&t(i,l,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!i&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);cb()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Kb):l()}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},Qb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}zE.type="LOCAL";const Yb=zE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends LE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}BE.type="SESSION";const jE=BE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const s=new sh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:s,eventType:l,data:c}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async _=>_(i.origin,c)),g=await Xb(p);i.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(r="",t=10){let i="";for(let s=0;s<t;s++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const _=Rm("",20);l.port1.start();const S=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(C){const D=C;if(D.data.eventId===_)switch(D.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(D.data.response);break;default:clearTimeout(S),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:_,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function Zb(r){pi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function Jb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $b(){return navigator?.serviceWorker?.controller||null}function tw(){return HE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="firebaseLocalStorageDb",ew=1,Gc="firebaseLocalStorage",GE="fbase_key";class Kl{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function ah(r,t){return r.transaction([Gc],t?"readwrite":"readonly").objectStore(Gc)}function nw(){const r=indexedDB.deleteDatabase(qE);return new Kl(r).toPromise()}function Jd(){const r=indexedDB.open(qE,ew);return new Promise((t,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Gc,{keyPath:GE})}catch(l){i(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Gc)?t(s):(s.close(),await nw(),t(await Jd()))})})}async function F_(r,t,i){const s=ah(r,!0).put({[GE]:t,value:i});return new Kl(s).toPromise()}async function iw(r,t){const i=ah(r,!1).get(t),s=await new Kl(i).toPromise();return s===void 0?null:s.value}function Q_(r,t){const i=ah(r,!0).delete(t);return new Kl(i).toPromise()}const rw=800,sw=3;class FE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jd(),this.db)}async _withRetries(t){let i=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(i++>sw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sh._getInstance(tw()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Jb(),!this.activeServiceWorker)return;this.sender=new Wb(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||$b()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Jd();return await F_(t,qc,"1"),await Q_(t,qc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>F_(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(s=>iw(s,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Q_(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=ah(l,!1).getAll();return new Kl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FE.type="LOCAL";const aw=FE;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(r,t){return t?Ji(t):(_t(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends bm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ka(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Ka(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Ka(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function lw(r){return PE(r.auth,new Im(r),r.bypassAuthState)}function uw(r){const{auth:t,user:i}=r;return _t(i,t,"internal-error"),Lb(i,new Im(r),r.bypassAuthState)}async function cw(r){const{auth:t,user:i}=r;return _t(i,t,"internal-error"),Ub(i,new Im(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(t,i,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=t;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:i,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return lw;case"linkViaPopup":case"linkViaRedirect":return cw;case"reauthViaPopup":case"reauthViaRedirect":return uw;default:Yn(this.auth,"internal-error")}}resolve(t){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new Gl(2e3,1e4);class Ga extends QE{constructor(t,i,s,l,c){super(t,i,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return _t(t,this.auth,"internal-error"),t}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const t=Rm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,hw.get())};t()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="pendingRedirect",Dc=new Map;class dw extends QE{constructor(t,i,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,s),this.eventId=null}async execute(){let t=Dc.get(this.auth._key());if(!t){try{const s=await mw(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(i){t=()=>Promise.reject(i)}Dc.set(this.auth._key(),t)}return this.bypassAuthState||Dc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mw(r,t){const i=yw(t),s=gw(r);if(!await s._isAvailable())return!1;const l=await s._get(i)==="true";return await s._remove(i),l}function pw(r,t){Dc.set(r._key(),t)}function gw(r){return Ji(r._redirectPersistence)}function yw(r){return Cc(fw,r.config.apiKey,r.name)}async function _w(r,t,i=!1){if(zn(r.app))return Promise.reject($i(r));const s=Qs(r),l=ow(s,t),d=await new dw(s,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=600*1e3;class Ew{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(i=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Tw(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!KE(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";i.onError(mi(this.auth,s))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const s=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=vw&&this.cachedEventUids.clear(),this.cachedEventUids.has(K_(t))}saveEventToCache(t){this.cachedEventUids.add(K_(t)),this.lastProcessedEventTime=Date.now()}}function K_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function KE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function Tw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(r,t={}){return Jr(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bw=/^https?/;async function ww(r){if(r.config.emulator)return;const{authorizedDomains:t}=await Sw(r);for(const i of t)try{if(Rw(i))return}catch{}Yn(r,"unauthorized-domain")}function Rw(r){const t=Xd(),{protocol:i,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===s}if(!bw.test(i))return!1;if(Aw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Gl(3e4,6e4);function Y_(){const r=pi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function Cw(r){return new Promise((t,i)=>{function s(){Y_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Y_(),i(mi(r,"network-request-failed"))},timeout:Iw.get()})}if(pi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(pi().gapi?.load)s();else{const l=vb("iframefcb");return pi()[l]=()=>{gapi.load?s():i(mi(r,"network-request-failed"))},NE(`${_b()}?onload=${l}`).catch(c=>i(c))}}).catch(t=>{throw Oc=null,t})}let Oc=null;function Dw(r){return Oc=Oc||Cw(r),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=new Gl(5e3,15e3),Nw="__/auth/iframe",Mw="emulator/auth/iframe",xw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kw(r){const t=r.config;_t(t.authDomain,r,"auth-domain-config-required");const i=t.emulator?Tm(t,Mw):`https://${r.config.authDomain}/${Nw}`,s={apiKey:t.apiKey,appName:r.name,v:ro},l=Vw.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${i}?${ql(s).slice(1)}`}async function Pw(r){const t=await Dw(r),i=pi().gapi;return _t(i,r,"internal-error"),t.open({where:document.body,url:kw(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xw,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=mi(r,"network-request-failed"),p=pi().setTimeout(()=>{c(d)},Ow.get());function g(){pi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lw=500,zw=600,Bw="_blank",jw="http://localhost";class X_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hw(r,t,i,s=Lw,l=zw){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...Uw,width:s.toString(),height:l.toString(),top:c,left:d},_=nn().toLowerCase();i&&(p=bE(_)?Bw:i),SE(_)&&(t=t||jw,g.scrollbars="yes");const S=Object.entries(g).reduce((D,[q,W])=>`${D}${q}=${W},`,"");if(ub(_)&&p!=="_self")return qw(t||"",p),new X_(null);const C=window.open(t||"",p,S);_t(C,r,"popup-blocked");try{C.focus()}catch{}return new X_(C)}function qw(r,t){const i=document.createElement("a");i.href=r,i.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="__/auth/handler",Fw="emulator/auth/handler",Qw=encodeURIComponent("fac");async function W_(r,t,i,s,l,c){_t(r.config.authDomain,r,"auth-domain-config-required"),_t(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:s,v:ro,eventId:l};if(t instanceof VE){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",DA(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[S,C]of Object.entries({}))d[S]=C}if(t instanceof Ql){const S=t.getScopes().filter(C=>C!=="");S.length>0&&(d.scopes=S.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const S of Object.keys(p))p[S]===void 0&&delete p[S];const g=await r._getAppCheckToken(),_=g?`#${Qw}=${encodeURIComponent(g)}`:"";return`${Kw(r)}?${ql(p).slice(1)}${_}`}function Kw({config:r}){return r.emulator?Tm(r,Fw):`https://${r.authDomain}/${Gw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="webStorageSupport";class Yw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jE,this._completeRedirectFn=_w,this._overrideRedirectResult=pw}async _openPopup(t,i,s,l){er(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await W_(t,i,s,Xd(),l);return Hw(t,c,Rm())}async _openRedirect(t,i,s,l){await this._originValidation(t);const c=await W_(t,i,s,Xd(),l);return Zb(c),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(er(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[i]={promise:s},s.catch(()=>{delete this.eventManagers[i]}),s}async initAndGetManager(t){const i=await Pw(t),s=new Ew(t);return i.register("authEvent",l=>(_t(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=i,s}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(kd,{type:kd},l=>{const c=l?.[0]?.[kd];c!==void 0&&i(!!c),Yn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=ww(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return DE()||AE()||Am()}}const Xw=Yw;var Z_="@firebase/auth",J_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jw(r){Wa(new js("auth",(t,{options:i})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;_t(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OE(r)},_=new pb(s,l,c,g);return wb(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,s)=>{t.getProvider("auth-internal").initialize()})),Wa(new js("auth-internal",t=>{const i=Qs(t.getProvider("auth").getImmediate());return(s=>new Ww(s))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(Z_,J_,Zw(r)),jr(Z_,J_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=300,tR=sE("authIdTokenMaxAge")||$w;let $_=null;const eR=r=>async t=>{const i=t&&await t.getIdTokenResult(),s=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(s&&s>tR)return;const l=i?.token;$_!==l&&($_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function nR(r=hE()){const t=vm(r,"auth");if(t.isInitialized())return t.getImmediate();const i=bb(r,{popupRedirectResolver:Xw,persistence:[aw,Yb,jE]}),s=sE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=eR(c.toString());qb(i,d,()=>d(i.currentUser)),Hb(i,p=>d(p))}}const l=iE("auth");return l&&Rb(i,`http://${l}`),i}function iR(){return document.getElementsByTagName("head")?.[0]??document}gb({loadJS(r){return new Promise((t,i)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=mi("internal-error");c.customData=l,i(c)},s.type="text/javascript",s.charset="UTF-8",iR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jw("Browser");var tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,YE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,A){function w(){}w.prototype=A.prototype,x.D=A.prototype,x.prototype=new w,x.prototype.constructor=x,x.C=function(N,M,V){for(var R=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)R[ce-2]=arguments[ce];return A.prototype[M].apply(N,R)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,i),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(x,A,w){w||(w=0);var N=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)N[M]=A.charCodeAt(w++)|A.charCodeAt(w++)<<8|A.charCodeAt(w++)<<16|A.charCodeAt(w++)<<24;else for(M=0;16>M;++M)N[M]=A[w++]|A[w++]<<8|A[w++]<<16|A[w++]<<24;A=x.g[0],w=x.g[1],M=x.g[2];var V=x.g[3],R=A+(V^w&(M^V))+N[0]+3614090360&4294967295;A=w+(R<<7&4294967295|R>>>25),R=V+(M^A&(w^M))+N[1]+3905402710&4294967295,V=A+(R<<12&4294967295|R>>>20),R=M+(w^V&(A^w))+N[2]+606105819&4294967295,M=V+(R<<17&4294967295|R>>>15),R=w+(A^M&(V^A))+N[3]+3250441966&4294967295,w=M+(R<<22&4294967295|R>>>10),R=A+(V^w&(M^V))+N[4]+4118548399&4294967295,A=w+(R<<7&4294967295|R>>>25),R=V+(M^A&(w^M))+N[5]+1200080426&4294967295,V=A+(R<<12&4294967295|R>>>20),R=M+(w^V&(A^w))+N[6]+2821735955&4294967295,M=V+(R<<17&4294967295|R>>>15),R=w+(A^M&(V^A))+N[7]+4249261313&4294967295,w=M+(R<<22&4294967295|R>>>10),R=A+(V^w&(M^V))+N[8]+1770035416&4294967295,A=w+(R<<7&4294967295|R>>>25),R=V+(M^A&(w^M))+N[9]+2336552879&4294967295,V=A+(R<<12&4294967295|R>>>20),R=M+(w^V&(A^w))+N[10]+4294925233&4294967295,M=V+(R<<17&4294967295|R>>>15),R=w+(A^M&(V^A))+N[11]+2304563134&4294967295,w=M+(R<<22&4294967295|R>>>10),R=A+(V^w&(M^V))+N[12]+1804603682&4294967295,A=w+(R<<7&4294967295|R>>>25),R=V+(M^A&(w^M))+N[13]+4254626195&4294967295,V=A+(R<<12&4294967295|R>>>20),R=M+(w^V&(A^w))+N[14]+2792965006&4294967295,M=V+(R<<17&4294967295|R>>>15),R=w+(A^M&(V^A))+N[15]+1236535329&4294967295,w=M+(R<<22&4294967295|R>>>10),R=A+(M^V&(w^M))+N[1]+4129170786&4294967295,A=w+(R<<5&4294967295|R>>>27),R=V+(w^M&(A^w))+N[6]+3225465664&4294967295,V=A+(R<<9&4294967295|R>>>23),R=M+(A^w&(V^A))+N[11]+643717713&4294967295,M=V+(R<<14&4294967295|R>>>18),R=w+(V^A&(M^V))+N[0]+3921069994&4294967295,w=M+(R<<20&4294967295|R>>>12),R=A+(M^V&(w^M))+N[5]+3593408605&4294967295,A=w+(R<<5&4294967295|R>>>27),R=V+(w^M&(A^w))+N[10]+38016083&4294967295,V=A+(R<<9&4294967295|R>>>23),R=M+(A^w&(V^A))+N[15]+3634488961&4294967295,M=V+(R<<14&4294967295|R>>>18),R=w+(V^A&(M^V))+N[4]+3889429448&4294967295,w=M+(R<<20&4294967295|R>>>12),R=A+(M^V&(w^M))+N[9]+568446438&4294967295,A=w+(R<<5&4294967295|R>>>27),R=V+(w^M&(A^w))+N[14]+3275163606&4294967295,V=A+(R<<9&4294967295|R>>>23),R=M+(A^w&(V^A))+N[3]+4107603335&4294967295,M=V+(R<<14&4294967295|R>>>18),R=w+(V^A&(M^V))+N[8]+1163531501&4294967295,w=M+(R<<20&4294967295|R>>>12),R=A+(M^V&(w^M))+N[13]+2850285829&4294967295,A=w+(R<<5&4294967295|R>>>27),R=V+(w^M&(A^w))+N[2]+4243563512&4294967295,V=A+(R<<9&4294967295|R>>>23),R=M+(A^w&(V^A))+N[7]+1735328473&4294967295,M=V+(R<<14&4294967295|R>>>18),R=w+(V^A&(M^V))+N[12]+2368359562&4294967295,w=M+(R<<20&4294967295|R>>>12),R=A+(w^M^V)+N[5]+4294588738&4294967295,A=w+(R<<4&4294967295|R>>>28),R=V+(A^w^M)+N[8]+2272392833&4294967295,V=A+(R<<11&4294967295|R>>>21),R=M+(V^A^w)+N[11]+1839030562&4294967295,M=V+(R<<16&4294967295|R>>>16),R=w+(M^V^A)+N[14]+4259657740&4294967295,w=M+(R<<23&4294967295|R>>>9),R=A+(w^M^V)+N[1]+2763975236&4294967295,A=w+(R<<4&4294967295|R>>>28),R=V+(A^w^M)+N[4]+1272893353&4294967295,V=A+(R<<11&4294967295|R>>>21),R=M+(V^A^w)+N[7]+4139469664&4294967295,M=V+(R<<16&4294967295|R>>>16),R=w+(M^V^A)+N[10]+3200236656&4294967295,w=M+(R<<23&4294967295|R>>>9),R=A+(w^M^V)+N[13]+681279174&4294967295,A=w+(R<<4&4294967295|R>>>28),R=V+(A^w^M)+N[0]+3936430074&4294967295,V=A+(R<<11&4294967295|R>>>21),R=M+(V^A^w)+N[3]+3572445317&4294967295,M=V+(R<<16&4294967295|R>>>16),R=w+(M^V^A)+N[6]+76029189&4294967295,w=M+(R<<23&4294967295|R>>>9),R=A+(w^M^V)+N[9]+3654602809&4294967295,A=w+(R<<4&4294967295|R>>>28),R=V+(A^w^M)+N[12]+3873151461&4294967295,V=A+(R<<11&4294967295|R>>>21),R=M+(V^A^w)+N[15]+530742520&4294967295,M=V+(R<<16&4294967295|R>>>16),R=w+(M^V^A)+N[2]+3299628645&4294967295,w=M+(R<<23&4294967295|R>>>9),R=A+(M^(w|~V))+N[0]+4096336452&4294967295,A=w+(R<<6&4294967295|R>>>26),R=V+(w^(A|~M))+N[7]+1126891415&4294967295,V=A+(R<<10&4294967295|R>>>22),R=M+(A^(V|~w))+N[14]+2878612391&4294967295,M=V+(R<<15&4294967295|R>>>17),R=w+(V^(M|~A))+N[5]+4237533241&4294967295,w=M+(R<<21&4294967295|R>>>11),R=A+(M^(w|~V))+N[12]+1700485571&4294967295,A=w+(R<<6&4294967295|R>>>26),R=V+(w^(A|~M))+N[3]+2399980690&4294967295,V=A+(R<<10&4294967295|R>>>22),R=M+(A^(V|~w))+N[10]+4293915773&4294967295,M=V+(R<<15&4294967295|R>>>17),R=w+(V^(M|~A))+N[1]+2240044497&4294967295,w=M+(R<<21&4294967295|R>>>11),R=A+(M^(w|~V))+N[8]+1873313359&4294967295,A=w+(R<<6&4294967295|R>>>26),R=V+(w^(A|~M))+N[15]+4264355552&4294967295,V=A+(R<<10&4294967295|R>>>22),R=M+(A^(V|~w))+N[6]+2734768916&4294967295,M=V+(R<<15&4294967295|R>>>17),R=w+(V^(M|~A))+N[13]+1309151649&4294967295,w=M+(R<<21&4294967295|R>>>11),R=A+(M^(w|~V))+N[4]+4149444226&4294967295,A=w+(R<<6&4294967295|R>>>26),R=V+(w^(A|~M))+N[11]+3174756917&4294967295,V=A+(R<<10&4294967295|R>>>22),R=M+(A^(V|~w))+N[2]+718787259&4294967295,M=V+(R<<15&4294967295|R>>>17),R=w+(V^(M|~A))+N[9]+3951481745&4294967295,x.g[0]=x.g[0]+A&4294967295,x.g[1]=x.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+V&4294967295}s.prototype.u=function(x,A){A===void 0&&(A=x.length);for(var w=A-this.blockSize,N=this.B,M=this.h,V=0;V<A;){if(M==0)for(;V<=w;)l(this,x,V),V+=this.blockSize;if(typeof x=="string"){for(;V<A;)if(N[M++]=x.charCodeAt(V++),M==this.blockSize){l(this,N),M=0;break}}else for(;V<A;)if(N[M++]=x[V++],M==this.blockSize){l(this,N),M=0;break}}this.h=M,this.o+=A},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var A=1;A<x.length-8;++A)x[A]=0;var w=8*this.o;for(A=x.length-8;A<x.length;++A)x[A]=w&255,w/=256;for(this.u(x),x=Array(16),A=w=0;4>A;++A)for(var N=0;32>N;N+=8)x[w++]=this.g[A]>>>N&255;return x};function c(x,A){var w=p;return Object.prototype.hasOwnProperty.call(w,x)?w[x]:w[x]=A(x)}function d(x,A){this.h=A;for(var w=[],N=!0,M=x.length-1;0<=M;M--){var V=x[M]|0;N&&V==A||(w[M]=V,N=!1)}this.g=w}var p={};function g(x){return-128<=x&&128>x?c(x,function(A){return new d([A|0],0>A?-1:0)}):new d([x|0],0>x?-1:0)}function _(x){if(isNaN(x)||!isFinite(x))return C;if(0>x)return J(_(-x));for(var A=[],w=1,N=0;x>=w;N++)A[N]=x/w|0,w*=4294967296;return new d(A,0)}function S(x,A){if(x.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(x.charAt(0)=="-")return J(S(x.substring(1),A));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=_(Math.pow(A,8)),N=C,M=0;M<x.length;M+=8){var V=Math.min(8,x.length-M),R=parseInt(x.substring(M,M+V),A);8>V?(V=_(Math.pow(A,V)),N=N.j(V).add(_(R))):(N=N.j(w),N=N.add(_(R)))}return N}var C=g(0),D=g(1),q=g(16777216);r=d.prototype,r.m=function(){if(rt(this))return-J(this).m();for(var x=0,A=1,w=0;w<this.g.length;w++){var N=this.i(w);x+=(0<=N?N:4294967296+N)*A,A*=4294967296}return x},r.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(W(this))return"0";if(rt(this))return"-"+J(this).toString(x);for(var A=_(Math.pow(x,6)),w=this,N="";;){var M=qt(w,A).g;w=Tt(w,M.j(A));var V=((0<w.g.length?w.g[0]:w.h)>>>0).toString(x);if(w=M,W(w))return V+N;for(;6>V.length;)V="0"+V;N=V+N}},r.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function W(x){if(x.h!=0)return!1;for(var A=0;A<x.g.length;A++)if(x.g[A]!=0)return!1;return!0}function rt(x){return x.h==-1}r.l=function(x){return x=Tt(this,x),rt(x)?-1:W(x)?0:1};function J(x){for(var A=x.g.length,w=[],N=0;N<A;N++)w[N]=~x.g[N];return new d(w,~x.h).add(D)}r.abs=function(){return rt(this)?J(this):this},r.add=function(x){for(var A=Math.max(this.g.length,x.g.length),w=[],N=0,M=0;M<=A;M++){var V=N+(this.i(M)&65535)+(x.i(M)&65535),R=(V>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);N=R>>>16,V&=65535,R&=65535,w[M]=R<<16|V}return new d(w,w[w.length-1]&-2147483648?-1:0)};function Tt(x,A){return x.add(J(A))}r.j=function(x){if(W(this)||W(x))return C;if(rt(this))return rt(x)?J(this).j(J(x)):J(J(this).j(x));if(rt(x))return J(this.j(J(x)));if(0>this.l(q)&&0>x.l(q))return _(this.m()*x.m());for(var A=this.g.length+x.g.length,w=[],N=0;N<2*A;N++)w[N]=0;for(N=0;N<this.g.length;N++)for(var M=0;M<x.g.length;M++){var V=this.i(N)>>>16,R=this.i(N)&65535,ce=x.i(M)>>>16,ie=x.i(M)&65535;w[2*N+2*M]+=R*ie,yt(w,2*N+2*M),w[2*N+2*M+1]+=V*ie,yt(w,2*N+2*M+1),w[2*N+2*M+1]+=R*ce,yt(w,2*N+2*M+1),w[2*N+2*M+2]+=V*ce,yt(w,2*N+2*M+2)}for(N=0;N<A;N++)w[N]=w[2*N+1]<<16|w[2*N];for(N=A;N<2*A;N++)w[N]=0;return new d(w,0)};function yt(x,A){for(;(x[A]&65535)!=x[A];)x[A+1]+=x[A]>>>16,x[A]&=65535,A++}function ht(x,A){this.g=x,this.h=A}function qt(x,A){if(W(A))throw Error("division by zero");if(W(x))return new ht(C,C);if(rt(x))return A=qt(J(x),A),new ht(J(A.g),J(A.h));if(rt(A))return A=qt(x,J(A)),new ht(J(A.g),A.h);if(30<x.g.length){if(rt(x)||rt(A))throw Error("slowDivide_ only works with positive integers.");for(var w=D,N=A;0>=N.l(x);)w=St(w),N=St(N);var M=Ht(w,1),V=Ht(N,1);for(N=Ht(N,2),w=Ht(w,2);!W(N);){var R=V.add(N);0>=R.l(x)&&(M=M.add(w),V=R),N=Ht(N,1),w=Ht(w,1)}return A=Tt(x,M.j(A)),new ht(M,A)}for(M=C;0<=x.l(A);){for(w=Math.max(1,Math.floor(x.m()/A.m())),N=Math.ceil(Math.log(w)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),V=_(w),R=V.j(A);rt(R)||0<R.l(x);)w-=N,V=_(w),R=V.j(A);W(V)&&(V=D),M=M.add(V),x=Tt(x,R)}return new ht(M,x)}r.A=function(x){return qt(this,x).h},r.and=function(x){for(var A=Math.max(this.g.length,x.g.length),w=[],N=0;N<A;N++)w[N]=this.i(N)&x.i(N);return new d(w,this.h&x.h)},r.or=function(x){for(var A=Math.max(this.g.length,x.g.length),w=[],N=0;N<A;N++)w[N]=this.i(N)|x.i(N);return new d(w,this.h|x.h)},r.xor=function(x){for(var A=Math.max(this.g.length,x.g.length),w=[],N=0;N<A;N++)w[N]=this.i(N)^x.i(N);return new d(w,this.h^x.h)};function St(x){for(var A=x.g.length+1,w=[],N=0;N<A;N++)w[N]=x.i(N)<<1|x.i(N-1)>>>31;return new d(w,x.h)}function Ht(x,A){var w=A>>5;A%=32;for(var N=x.g.length-w,M=[],V=0;V<N;V++)M[V]=0<A?x.i(V+w)>>>A|x.i(V+w+1)<<32-A:x.i(V+w);return new d(M,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,YE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=S,Hr=d}).apply(typeof tv<"u"?tv:typeof self<"u"?self:typeof window<"u"?window:{});var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XE,Sl,WE,Nc,$d,ZE,JE,$E;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tc=="object"&&Tc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=i(this);function l(u,m){if(m)t:{var y=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var P=u[T];if(!(P in y))break t;y=y[P]}u=u[u.length-1],T=y[u],m=m(T),m!=T&&m!=null&&t(y,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var y=0,T=!1,P={next:function(){if(!T&&y<u.length){var j=y++;return{value:m(j,u[j]),done:!1}}return T=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function S(u,m,y){return u.call.apply(u.bind,arguments)}function C(u,m,y){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,T),u.apply(m,P)}}return function(){return u.apply(m,arguments)}}function D(u,m,y){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:C,D.apply(null,arguments)}function q(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function W(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(T,P,j){for(var et=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)et[Ut-2]=arguments[Ut];return m.prototype[P].apply(T,et)}}function rt(u){const m=u.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=u[T];return y}return[]}function J(u,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(g(T)){const P=u.length||0,j=T.length||0;u.length=P+j;for(let et=0;et<j;et++)u[P+et]=T[et]}else u.push(T)}}class Tt{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function yt(u){return/^[\s\xa0]*$/.test(u)}function ht(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function qt(u){return qt[" "](u),u}qt[" "]=function(){};var St=ht().indexOf("Gecko")!=-1&&!(ht().toLowerCase().indexOf("webkit")!=-1&&ht().indexOf("Edge")==-1)&&!(ht().indexOf("Trident")!=-1||ht().indexOf("MSIE")!=-1)&&ht().indexOf("Edge")==-1;function Ht(u,m,y){for(const T in u)m.call(y,u[T],T,u)}function x(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function A(u){const m={};for(const y in u)m[y]=u[y];return m}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let y,T;for(let P=1;P<arguments.length;P++){T=arguments[P];for(y in T)u[y]=T[y];for(let j=0;j<w.length;j++)y=w[j],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function M(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function V(u){p.setTimeout(()=>{throw u},0)}function R(){var u=Pt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ce{constructor(){this.h=this.g=null}add(m,y){const T=ie.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var ie=new Tt(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,st=!1,Pt=new ce,I=()=>{const u=p.Promise.resolve(void 0);nt=()=>{u.then(X)}};var X=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){V(y)}var m=ie;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}st=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};p.addEventListener("test",y,m),p.removeEventListener("test",y,m)}catch{}return u}();function Rt(u,m){if($.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(St){t:{try{qt(m.nodeName);var P=!0;break t}catch{}P=!1}P||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:mt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Rt.aa.h.call(this)}}W(Rt,$);var mt={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function mn(u,m,y,T,P){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=P,this.key=++Ft,this.da=this.fa=!1}function pn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function gn(u){this.src=u,this.g={},this.h=0}gn.prototype.add=function(u,m,y,T,P){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var et=Xn(u,m,T,P);return-1<et?(m=u[et],y||(m.fa=!1)):(m=new mn(m,this.src,j,!!T,P),m.fa=y,u.push(m)),m};function Ai(u,m){var y=m.type;if(y in u.g){var T=u.g[y],P=Array.prototype.indexOf.call(T,m,void 0),j;(j=0<=P)&&Array.prototype.splice.call(T,P,1),j&&(pn(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Xn(u,m,y,T){for(var P=0;P<u.length;++P){var j=u[P];if(!j.da&&j.listener==m&&j.capture==!!y&&j.ha==T)return P}return-1}var Rn="closure_lm_"+(1e6*Math.random()|0),es={};function Xs(u,m,y,T,P){if(Array.isArray(m)){for(var j=0;j<m.length;j++)Xs(u,m[j],y,T,P);return null}return y=Ee(y),u&&u[ve]?u.K(m,y,_(T)?!!T.capture:!1,P):ln(u,m,y,!1,T,P)}function ln(u,m,y,T,P,j){if(!m)throw Error("Invalid event type");var et=_(P)?!!P.capture:!!P,Ut=tt(u);if(Ut||(u[Rn]=Ut=new gn(u)),y=Ut.add(m,y,T,et,j),y.proxy)return y;if(T=co(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)ct||(P=et),P===void 0&&(P=!1),u.addEventListener(m.toString(),T,P);else if(u.attachEvent)u.attachEvent(wi(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function co(){function u(y){return m.call(u.src,u.listener,y)}const m=ho;return u}function ns(u,m,y,T,P){if(Array.isArray(m))for(var j=0;j<m.length;j++)ns(u,m[j],y,T,P);else T=_(T)?!!T.capture:!!T,y=Ee(y),u&&u[ve]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],y=Xn(j,y,T,P),-1<y&&(pn(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=tt(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Xn(m,y,T,P)),(y=-1<u?m[u]:null)&&bi(y))}function bi(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ve])Ai(m.i,u);else{var y=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(y,T,u.capture):m.detachEvent?m.detachEvent(wi(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=tt(m))?(Ai(y,u),y.h==0&&(y.src=null,m[Rn]=null)):pn(u)}}}function wi(u){return u in es?es[u]:es[u]="on"+u}function ho(u,m){if(u.da)u=!0;else{m=new Rt(m,this);var y=u.listener,T=u.ha||u.src;u.fa&&bi(u),u=y.call(T,m)}return u}function tt(u){return u=u[Rn],u instanceof gn?u:null}var pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ee(u){return typeof u=="function"?u:(u[pt]||(u[pt]=function(m){return u.handleEvent(m)}),u[pt])}function Mt(){it.call(this),this.i=new gn(this),this.M=this,this.F=null}W(Mt,it),Mt.prototype[ve]=!0,Mt.prototype.removeEventListener=function(u,m,y,T){ns(this,u,m,y,T)};function wt(u,m){var y,T=u.F;if(T)for(y=[];T;T=T.F)y.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new $(m,u);else if(m instanceof $)m.target=m.target||u;else{var P=m;m=new $(T,u),N(m,P)}if(P=!0,y)for(var j=y.length-1;0<=j;j--){var et=m.g=y[j];P=de(et,T,!0,m)&&P}if(et=m.g=u,P=de(et,T,!0,m)&&P,P=de(et,T,!1,m)&&P,y)for(j=0;j<y.length;j++)et=m.g=y[j],P=de(et,T,!1,m)&&P}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],T=0;T<y.length;T++)pn(y[T]);delete u.g[m],u.h--}}this.F=null},Mt.prototype.K=function(u,m,y,T){return this.i.add(String(u),m,!1,y,T)},Mt.prototype.L=function(u,m,y,T){return this.i.add(String(u),m,!0,y,T)};function de(u,m,y,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,j=0;j<m.length;++j){var et=m[j];if(et&&!et.da&&et.capture==y){var Ut=et.listener,Oe=et.ha||et.src;et.fa&&Ai(u.i,et),P=Ut.call(Oe,T)!==!1&&P}}return P&&!T.defaultPrevented}function Ce(u,m,y){if(typeof u=="function")y&&(u=D(u,y));else if(u&&typeof u.handleEvent=="function")u=D(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function Wn(u){u.g=Ce(()=>{u.g=null,u.i&&(u.i=!1,Wn(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class bh extends it{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Wn(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(u){it.call(this),this.h=u,this.g={}}W(is,it);var rs=[];function ss(u){Ht(u.g,function(m,y){this.g.hasOwnProperty(y)&&bi(m)},u),u.g={}}is.prototype.N=function(){is.aa.N.call(this),ss(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=p.JSON.stringify,Ws=p.JSON.parse,as=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function fo(){}fo.prototype.h=null;function mo(u){return u.h||(u.h=u.i())}function po(){}var Ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ii(){$.call(this,"d")}W(Ii,$);function go(){$.call(this,"c")}W(go,$);var Zn={},yo=null;function sr(){return yo=yo||new Mt}Zn.La="serverreachability";function Zs(u){$.call(this,Zn.La,u)}W(Zs,$);function ar(u){const m=sr();wt(m,new Zs(m))}Zn.STAT_EVENT="statevent";function $l(u,m){$.call(this,Zn.STAT_EVENT,u),this.stat=m}W($l,$);function ae(u){const m=sr();wt(m,new $l(m,u))}Zn.Ma="timingevent";function De(u,m){$.call(this,Zn.Ma,u),this.size=m}W(De,$);function Te(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function _o(u,m,y,T,P,j){u.info(function(){if(u.g)if(j)for(var et="",Ut=j.split("&"),Oe=0;Oe<Ut.length;Oe++){var Lt=Ut[Oe].split("=");if(1<Lt.length){var Ue=Lt[0];Lt=Lt[1];var Ne=Ue.split("_");et=2<=Ne.length&&Ne[1]=="type"?et+(Ue+"="+Lt+"&"):et+(Ue+"=redacted&")}}else et=null;else et=j;return"XMLHTTP REQ ("+T+") [attempt "+P+"]: "+m+`
`+y+`
`+et})}function wh(u,m,y,T,P,j,et){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+P+"]: "+m+`
`+y+`
`+j+" "+et})}function or(u,m,y,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+os(u,y)+(T?" "+T:"")})}function tu(u,m){u.info(function(){return"TIMEOUT: "+m})}In.prototype.info=function(){};function os(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var T=y[u];if(!(2>T.length)){var P=T[1];if(Array.isArray(P)&&!(1>P.length)){var j=P[0];if(j!="noop"&&j!="stop"&&j!="close")for(var et=1;et<P.length;et++)P[et]=""}}}}return jn(y)}catch{return m}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ci={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function $n(){}W($n,fo),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},Jn=new $n;function rn(u,m,y,T){this.j=u,this.i=m,this.l=y,this.R=T||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new me}function me(){this.i=null,this.g="",this.h=!1}var vo={},Js={};function Hn(u,m,y){u.L=1,u.v=fs(yn(m)),u.m=y,u.P=!0,Di(u,null)}function Di(u,m){u.F=Date.now(),ls(u),u.A=yn(u.v);var y=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),wo(y.i,"t",T),u.C=0,y=u.j.J,u.h=new me,u.g=gu(u.j,y?m:null,!u.m),0<u.O&&(u.M=new bh(D(u.Y,u,u.g),u.O)),m=u.U,y=u.g,T=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(rs[0]=P.toString()),P=rs);for(var j=0;j<P.length;j++){var et=Xs(y,P[j],T||m.handleEvent,!1,m.h||m);if(!et)break;m.g[et.key]=et}m=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ar(),_o(u.i,u.u,u.A,u.l,u.R,u.m)}rn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Nn(u)==3?m.j():this.Y(u)},rn.prototype.Y=function(u){try{if(u==this.g)t:{const Ne=Nn(this.g);var m=this.g.Ba();const Ui=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||lu(this.g)))){this.J||Ne!=4||m==7||(m==8||0>=Ui?ar(3):ar(2)),ur(this);var y=this.g.Z();this.X=y;e:if(eu(this)){var T=lu(this.g);u="";var P=T.length,j=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qe(this),ti(this);var et="";break e}this.h.i=new p.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(j&&m==P-1)});T.length=0,this.h.g+=u,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=y==200,wh(this.i,this.u,this.A,this.l,this.R,Ne,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Ut,Oe=this.g;if((Ut=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yt(Ut)){var Lt=Ut;break e}}Lt=null}if(y=Lt)or(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,us(this,y);else{this.o=!1,this.s=3,ae(12),qe(this),ti(this);break t}}if(this.P){y=!0;let Ge;for(;!this.J&&this.C<et.length;)if(Ge=nu(this,et),Ge==Js){Ne==4&&(this.s=4,ae(14),y=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==vo){this.s=4,ae(15),or(this.i,this.l,et,"[Invalid Chunk]"),y=!1;break}else or(this.i,this.l,Ge,null),us(this,Ge);if(eu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||et.length!=0||this.h.h||(this.s=1,ae(16),y=!1),this.o=this.o&&y,!y)or(this.i,this.l,et,"[Invalid Chunked Response]"),qe(this),ti(this);else if(0<et.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),Es(Ue),Ue.M=!0,ae(11))}}else or(this.i,this.l,et,null),us(this,et);Ne==4&&qe(this),this.o&&!this.J&&(Ne==4?du(this.j,this):(this.o=!1,ls(this)))}else Oh(this.g),y==400&&0<et.indexOf("Unknown SID")?(this.s=3,ae(12)):(this.s=0,ae(13)),qe(this),ti(this)}}}catch{}finally{}};function eu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function nu(u,m){var y=u.C,T=m.indexOf(`
`,y);return T==-1?Js:(y=Number(m.substring(y,T)),isNaN(y)?vo:(T+=1,T+y>m.length?Js:(m=m.slice(T,T+y),u.C=T+y,m)))}rn.prototype.cancel=function(){this.J=!0,qe(this)};function ls(u){u.S=Date.now()+u.I,iu(u,u.I)}function iu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Te(D(u.ba,u),m)}function ur(u){u.B&&(p.clearTimeout(u.B),u.B=null)}rn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(tu(this.i,this.A),this.L!=2&&(ar(),ae(17)),qe(this),this.s=2,ti(this)):iu(this,this.S-u)};function ti(u){u.j.G==0||u.J||du(u.j,u)}function qe(u){ur(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ss(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function us(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||Eo(y.h,u))){if(!u.K&&Eo(y.h,u)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var P=T;if(P[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)ca(y),la(y);else break t;Oo(y),ae(18)}}else y.za=P[1],0<y.za-y.T&&37500>P[2]&&y.F&&y.v==0&&!y.C&&(y.C=Te(D(y.Za,y),6e3));if(1>=ta(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Pi(y,11)}else if((u.K||y.g==u)&&ca(y),!yt(m))for(P=y.Da.g.parse(m),m=0;m<P.length;m++){let Lt=P[m];if(y.T=Lt[0],Lt=Lt[1],y.G==2)if(Lt[0]=="c"){y.K=Lt[1],y.ia=Lt[2];const Ue=Lt[3];Ue!=null&&(y.la=Ue,y.j.info("VER="+y.la));const Ne=Lt[4];Ne!=null&&(y.Aa=Ne,y.j.info("SVER="+y.Aa));const Ui=Lt[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(T=1.5*Ui,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Ge=u.g;if(Ge){const oi=Ge.g?Ge.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var j=T.h;j.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ea(j,j.h),j.h=null))}if(T.D){const Mo=Ge.g?Ge.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(T.ya=Mo,Zt(T.I,T.D,Mo))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var et=u;if(T.qa=pu(T,T.J?T.ia:null,T.W),et.K){sn(T.h,et);var Ut=et,Oe=T.L;Oe&&(Ut.I=Oe),Ut.B&&(ur(Ut),ls(Ut)),T.g=et}else hu(T);0<y.i.length&&ua(y)}else Lt[0]!="stop"&&Lt[0]!="close"||Pi(y,7);else y.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Pi(y,7):Co(y):Lt[0]!="noop"&&y.l&&y.l.ta(Lt),y.v=0)}}ar(4)}catch{}}var ru=class{constructor(u,m){this.g=u,this.map=m}};function Oi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $s(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ta(u){return u.h?1:u.g?u.g.size:0}function Eo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ea(u,m){u.g?u.g.add(m):u.h=m}function sn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Oi.prototype.cancel=function(){if(this.i=To(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function To(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return rt(u.i)}function Rh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],y=u.length,T=0;T<y;T++)m.push(u[T]);return m}m=[],y=0;for(T in u)m[y++]=u[T];return m}function na(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const T in u)m[y++]=T;return m}}}function So(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=na(u),T=Rh(u),P=T.length,j=0;j<P;j++)m.call(void 0,T[j],y&&y[j],u)}var cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ih(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var T=u[y].indexOf("="),P=null;if(0<=T){var j=u[y].substring(0,T);P=u[y].substring(T+1)}else j=u[y];m(j,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Se(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Se){this.h=u.h,hs(this,u.j),this.o=u.o,this.g=u.g,cr(this,u.s),this.l=u.l;var m=u.i,y=new Mi;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Ni(this,y),this.m=u.m}else u&&(m=String(u).match(cs))?(this.h=!1,hs(this,m[1]||"",!0),this.o=Cn(m[2]||""),this.g=Cn(m[3]||"",!0),cr(this,m[4]),this.l=Cn(m[5]||"",!0),Ni(this,m[6]||"",!0),this.m=Cn(m[7]||"")):(this.h=!1,this.i=new Mi(null,this.h))}Se.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ds(m,Ao,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ds(m,Ao,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(ds(y,y.charAt(0)=="/"?Ch:bo,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",ds(y,ia)),u.join("")};function yn(u){return new Se(u)}function hs(u,m,y){u.j=y?Cn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function cr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ni(u,m,y){m instanceof Mi?(u.i=m,au(u.i,u.h)):(y||(m=ds(m,Dh)),u.i=new Mi(m,u.h))}function Zt(u,m,y){u.i.set(m,y)}function fs(u){return Zt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Cn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ds(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,su),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function su(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ao=/[#\/\?@]/g,bo=/[#\?:]/g,Ch=/[#\?]/g,Dh=/[#\?@]/g,ia=/#/g;function Mi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Dn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ih(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}r=Mi.prototype,r.add=function(u,m){Dn(this),this.i=null,u=ei(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function xi(u,m){Dn(u),m=ei(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Vi(u,m){return Dn(u),m=ei(u,m),u.g.has(m)}r.forEach=function(u,m){Dn(this),this.g.forEach(function(y,T){y.forEach(function(P){u.call(m,P,T,this)},this)},this)},r.na=function(){Dn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const P=u[T];for(let j=0;j<P.length;j++)y.push(m[T])}return y},r.V=function(u){Dn(this);let m=[];if(typeof u=="string")Vi(this,u)&&(m=m.concat(this.g.get(ei(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},r.set=function(u,m){return Dn(this),this.i=null,u=ei(this,u),Vi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function wo(u,m,y){xi(u,m),0<y.length&&(u.i=null,u.g.set(ei(u,m),rt(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const j=encodeURIComponent(String(T)),et=this.V(T);for(T=0;T<et.length;T++){var P=j;et[T]!==""&&(P+="="+encodeURIComponent(String(et[T]))),u.push(P)}}return this.i=u.join("&")};function ei(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function au(u,m){m&&!u.j&&(Dn(u),u.i=null,u.g.forEach(function(y,T){var P=T.toLowerCase();T!=P&&(xi(this,T),wo(this,P,y))},u)),u.j=m}function ms(u,m){const y=new In;if(p.Image){const T=new Image;T.onload=q(On,y,"TestLoadImage: loaded",!0,m,T),T.onerror=q(On,y,"TestLoadImage: error",!1,m,T),T.onabort=q(On,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=q(On,y,"TestLoadImage: timeout",!1,m,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function qn(u,m){const y=new In,T=new AbortController,P=setTimeout(()=>{T.abort(),On(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(j=>{clearTimeout(P),j.ok?On(y,"TestPingServer: ok",!0,m):On(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),On(y,"TestPingServer: error",!1,m)})}function On(u,m,y,T,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),T(y)}catch{}}function ps(){this.g=new as}function ni(u,m,y){const T=y||"";try{So(u,function(P,j){let et=P;_(P)&&(et=jn(P)),m.push(T+j+"="+encodeURIComponent(et))})}catch(P){throw m.push(T+"type="+encodeURIComponent("_badmap")),P}}function hr(u){this.l=u.Ub||null,this.j=u.eb||!1}W(hr,fo),hr.prototype.g=function(){return new ki(this.l,this.j)},hr.prototype.i=function(u){return function(){return u}}({});function ki(u,m){Mt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(ki,Mt),r=ki.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ri(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ro(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ro(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ii(this):ri(this),this.readyState==3&&Ro(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ii(this))},r.Qa=function(u){this.g&&(this.response=u,ii(this))},r.ga=function(){this.g&&ii(this)};function ii(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ri(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function ri(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Io(u){let m="";return Ht(u,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function Pe(u,m,y){t:{for(T in y){var T=!1;break t}T=!0}T||(y=Io(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Zt(u,m,y))}function Kt(u){Mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(Kt,Mt);var ra=/^https?$/i,gs=["POST","PUT"];r=Kt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?mo(this.o):mo(Jn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){ou(this,j);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var P in T)y.set(P,T[P]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())y.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),P=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(gs,m,void 0))||T||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,et]of y)this.g.setRequestHeader(j,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ys(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){ou(this,j)}};function ou(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,sa(u),si(u)}function sa(u){u.A||(u.A=!0,wt(u,"complete"),wt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,wt(this,"complete"),wt(this,"abort"),si(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),si(this,!0)),Kt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?aa(this):this.bb())},r.bb=function(){aa(this)};function aa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Nn(u)!=4||u.Z()!=2)){if(u.u&&Nn(u)==4)Ce(u.Ea,0,u);else if(wt(u,"readystatechange"),Nn(u)==4){u.h=!1;try{const et=u.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var y;if(!(y=m)){var T;if(T=et===0){var P=String(u.D).match(cs)[1]||null;!P&&p.self&&p.self.location&&(P=p.self.location.protocol.slice(0,-1)),T=!ra.test(P?P.toLowerCase():"")}y=T}if(y)wt(u,"complete"),wt(u,"success");else{u.m=6;try{var j=2<Nn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",sa(u)}}finally{si(u)}}}}function si(u,m){if(u.g){ys(u);const y=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||wt(u,"ready");try{y.onreadystatechange=T}catch{}}}function ys(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Nn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ws(m)}};function lu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Oh(u){const m={};u=(u.g&&2<=Nn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(yt(u[T]))continue;var y=M(u[T]);const P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=m[P]||[];m[P]=j,j.push(y)}x(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function oa(u){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,u),this.cb=_s("retryDelaySeedMs",1e4,u),this.Wa=_s("forwardChannelMaxRetries",2,u),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Oi(u&&u.concurrentRequestLimit),this.Da=new ps,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=oa.prototype,r.la=8,r.G=1,r.connect=function(u,m,y,T){ae(0),this.W=u,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=pu(this,null,this.W),ua(this)};function Co(u){if(uu(u),u.G==3){var m=u.U++,y=yn(u.I);if(Zt(y,"SID",u.K),Zt(y,"RID",m),Zt(y,"TYPE","terminate"),vs(u,y),m=new rn(u,u.j,m),m.L=2,m.v=fs(yn(y)),y=!1,p.navigator&&p.navigator.sendBeacon)try{y=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&p.Image&&(new Image().src=m.v,y=!0),y||(m.g=gu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ls(m)}mu(u)}function la(u){u.g&&(Es(u),u.g.cancel(),u.g=null)}function uu(u){la(u),u.u&&(p.clearTimeout(u.u),u.u=null),ca(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ua(u){if(!$s(u.h)&&!u.s){u.s=!0;var m=u.Ga;nt||I(),st||(nt(),st=!0),Pt.add(m,u),u.B=0}}function Nh(u,m){return ta(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Te(D(u.Ga,u,m),No(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const P=new rn(this,this.j,u);let j=this.o;if(this.S&&(j?(j=A(j),N(j,this.S)):j=this.S),this.m!==null||this.O||(P.H=j,j=null),this.P)t:{for(var m=0,y=0;y<this.i.length;y++){e:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break t}if(m===4096||y===this.i.length-1){m=y+1;break t}}m=1e3}else m=1e3;m=cu(this,P,m),y=yn(this.I),Zt(y,"RID",u),Zt(y,"CVER",22),this.D&&Zt(y,"X-HTTP-Session-Id",this.D),vs(this,y),j&&(this.O?m="headers="+encodeURIComponent(String(Io(j)))+"&"+m:this.m&&Pe(y,this.m,j)),ea(this.h,P),this.Ua&&Zt(y,"TYPE","init"),this.P?(Zt(y,"$req",m),Zt(y,"SID","null"),P.T=!0,Hn(P,y,null)):Hn(P,y,m),this.G=2}}else this.G==3&&(u?Do(this,u):this.i.length==0||$s(this.h)||Do(this))};function Do(u,m){var y;m?y=m.l:y=u.U++;const T=yn(u.I);Zt(T,"SID",u.K),Zt(T,"RID",y),Zt(T,"AID",u.T),vs(u,T),u.m&&u.o&&Pe(T,u.m,u.o),y=new rn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=cu(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ea(u.h,y),Hn(y,T,m)}function vs(u,m){u.H&&Ht(u.H,function(y,T){Zt(m,T,y)}),u.l&&So({},function(y,T){Zt(m,T,y)})}function cu(u,m,y){y=Math.min(u.i.length,y);var T=u.l?D(u.l.Na,u.l,u):null;t:{var P=u.i;let j=-1;for(;;){const et=["count="+y];j==-1?0<y?(j=P[0].g,et.push("ofs="+j)):j=0:et.push("ofs="+j);let Ut=!0;for(let Oe=0;Oe<y;Oe++){let Lt=P[Oe].g;const Ue=P[Oe].map;if(Lt-=j,0>Lt)j=Math.max(0,P[Oe].g-100),Ut=!1;else try{ni(Ue,et,"req"+Lt+"_")}catch{T&&T(Ue)}}if(Ut){T=et.join("&");break t}}}return u=u.i.splice(0,y),m.D=u,T}function hu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;nt||I(),st||(nt(),st=!0),Pt.add(m,u),u.v=0}}function Oo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Te(D(u.Fa,u),No(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Te(D(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ae(10),la(this),fu(this))};function Es(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function fu(u){u.g=new rn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=yn(u.qa);Zt(m,"RID","rpc"),Zt(m,"SID",u.K),Zt(m,"AID",u.T),Zt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Zt(m,"TO",u.ja),Zt(m,"TYPE","xmlhttp"),vs(u,m),u.m&&u.o&&Pe(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=fs(yn(m)),y.m=null,y.P=!0,Di(y,u)}r.Za=function(){this.C!=null&&(this.C=null,la(this),Oo(this),ae(19))};function ca(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function du(u,m){var y=null;if(u.g==m){ca(u),Es(u),u.g=null;var T=2}else if(Eo(u.h,m))y=m.D,sn(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var P=u.B;T=sr(),wt(T,new De(T,y)),ua(u)}else hu(u);else if(P=m.s,P==3||P==0&&0<m.X||!(T==1&&Nh(u,m)||T==2&&Oo(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),P){case 1:Pi(u,5);break;case 4:Pi(u,10);break;case 3:Pi(u,6);break;default:Pi(u,2)}}}function No(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function Pi(u,m){if(u.j.info("Error code "+m),m==2){var y=D(u.fb,u),T=u.Xa;const P=!T;T=new Se(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||hs(T,"https"),fs(T),P?ms(T.toString(),y):qn(T.toString(),y)}else ae(2);u.G=0,u.l&&u.l.sa(m),mu(u),uu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ae(2)):(this.j.info("Failed to ping google.com"),ae(1))};function mu(u){if(u.G=0,u.ka=[],u.l){const m=To(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ka,m),J(u.ka,u.i),u.h.i.length=0,rt(u.i),u.i.length=0),u.l.ra()}}function pu(u,m,y){var T=y instanceof Se?yn(y):new Se(y);if(T.g!="")m&&(T.g=m+"."+T.g),cr(T,T.s);else{var P=p.location;T=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var j=new Se(null);T&&hs(j,T),m&&(j.g=m),P&&cr(j,P),y&&(j.l=y),T=j}return y=u.D,m=u.ya,y&&m&&Zt(T,y,m),Zt(T,"VER",u.la),vs(u,T),T}function gu(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Kt(new hr({eb:y})):new Kt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function yu(){}r=yu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ha(){}ha.prototype.g=function(u,m){return new an(u,m)};function an(u,m){Mt.call(this),this.g=new oa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!yt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!yt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ai(this)}W(an,Mt),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Co(this.g)},an.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=jn(u),u=y);m.i.push(new ru(m.Ya++,u)),m.G==3&&ua(m)},an.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,an.aa.N.call(this)};function _u(u){Ii.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const y in m){u=y;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}W(_u,Ii);function vu(){go.call(this),this.status=1}W(vu,go);function ai(u){this.g=u}W(ai,yu),ai.prototype.ua=function(){wt(this.g,"a")},ai.prototype.ta=function(u){wt(this.g,new _u(u))},ai.prototype.sa=function(u){wt(this.g,new vu)},ai.prototype.ra=function(){wt(this.g,"b")},ha.prototype.createWebChannel=ha.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,$E=function(){return new ha},JE=function(){return sr()},ZE=Zn,$d={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,Nc=lr,Ci.COMPLETE="complete",WE=Ci,po.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,Sl=po,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,XE=Kt}).apply(typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{});const ev="@firebase/firestore",nv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new ym("@firebase/firestore");function Ba(){return Gs.logLevel}function at(r,...t){if(Gs.logLevel<=xt.DEBUG){const i=t.map(Cm);Gs.debug(`Firestore (${ao}): ${r}`,...i)}}function nr(r,...t){if(Gs.logLevel<=xt.ERROR){const i=t.map(Cm);Gs.error(`Firestore (${ao}): ${r}`,...i)}}function Za(r,...t){if(Gs.logLevel<=xt.WARN){const i=t.map(Cm);Gs.warn(`Firestore (${ao}): ${r}`,...i)}}function Cm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,tT(r,s,i)}function tT(r,t,i){let s=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw nr(s),new Error(s)}function Yt(r,t,i,s){let l="Unexpected state";typeof i=="string"?l=i:s=i,r||tT(t,l,s)}function bt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends rr{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class rR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(tn.UNAUTHENTICATED))}shutdown(){}}class sR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class aR{constructor(t){this.t=t,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Yt(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,i(g)):Promise.resolve();let c=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ls,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const g=c;t.enqueueRetryable(async()=>{await g.promise,await l(this.currentUser)})},p=g=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ls)}},0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(s=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Yt(typeof s.accessToken=="string",31837,{l:s}),new eT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string",2055,{h:t}),new tn(t)}}class oR{constructor(t,i,s){this.P=t,this.T=i,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lR{constructor(t,i,s){this.P=t,this.T=i,this.I=s}getToken(){return Promise.resolve(new oR(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uR{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Yt(this.o===void 0,3512);const s=c=>{c.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,at("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>s(c))};const l=c=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Yt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new iv(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=cR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<i&&(s+=t.charAt(l[c]%62))}return s}}function Vt(r,t){return r<t?-1:r>t?1:0}function tm(r,t){const i=Math.min(r.length,t.length);for(let s=0;s<i;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return Pd(l)===Pd(c)?Vt(l,c):Pd(l)?1:-1}return Vt(r.length,t.length)}const hR=55296,fR=57343;function Pd(r){const t=r.charCodeAt(0);return t>=hR&&t<=fR}function Ja(r,t,i){return r.length===t.length&&r.every((s,l)=>i(s,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="__name__";class di{constructor(t,i,s){i===void 0?i=0:i>t.length&&vt(637,{offset:i,range:t.length}),s===void 0?s=t.length-i:s>t.length-i&&vt(1746,{length:s,range:t.length-i}),this.segments=t,this.offset=i,this.len=s}get length(){return this.len}isEqual(t){return di.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof di?t.forEach(s=>{i.push(s)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,s=this.limit();i<s;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const s=Math.min(t.length,i.length);for(let l=0;l<s;l++){const c=di.compareSegments(t.get(l),i.get(l));if(c!==0)return c}return Vt(t.length,i.length)}static compareSegments(t,i){const s=di.isNumericId(t),l=di.isNumericId(i);return s&&!l?-1:!s&&l?1:s&&l?di.extractNumericId(t).compare(di.extractNumericId(i)):tm(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Hr.fromString(t.substring(4,t.length-2))}}class re extends di{construct(t,i,s){return new re(t,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const s of t){if(s.indexOf("//")>=0)throw new lt(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter(l=>l.length>0))}return new re(i)}static emptyPath(){return new re([])}}const dR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends di{construct(t,i,s){return new Xe(t,i,s)}static isValidIdentifier(t){return dR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rv}static keyField(){return new Xe([rv])}static fromServerFormat(t){const i=[];let s="",l=0;const c=()=>{if(s.length===0)throw new lt(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let d=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new lt(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new lt(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new lt(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xe(i)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.path=t}static fromPath(t){return new ft(re.fromString(t))}static fromName(t){return new ft(re.fromString(t).popFirst(5))}static empty(){return new ft(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return re.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new re(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(r,t,i){if(!i)throw new lt(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function mR(r,t,i,s){if(t===!0&&s===!0)throw new lt(Z.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function sv(r){if(!ft.isDocumentKey(r))throw new lt(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function av(r){if(ft.isDocumentKey(r))throw new lt(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function iT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Om(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":vt(12329,{type:typeof r})}function qr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new lt(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Om(r);throw new lt(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(r,t){const i={typeString:r};return t&&(i.value=t),i}function Yl(r,t){if(!iT(r))throw new lt(Z.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){i=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){i=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){i=`Expected '${s}' field to equal '${c.value}'`;break}}if(i)throw new lt(Z.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=-62135596800,lv=1e6;class se{static now(){return se.fromMillis(Date.now())}static fromDate(t){return se.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),s=Math.floor((t-1e3*i)*lv);return new se(i,s)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new lt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new lt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<ov)throw new lt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lv}_compareTo(t){return this.seconds===t.seconds?Vt(this.nanoseconds,t.nanoseconds):Vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Yl(t,se._jsonSchema))return new se(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ov;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}se._jsonSchemaVersion="firestore/timestamp/1.0",se._jsonSchema={type:Re("string",se._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new se(0,0))}static max(){return new At(new se(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;function pR(r,t){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=At.fromTimestamp(s===1e9?new se(i+1,0):new se(i,s));return new Fr(l,ft.empty(),t)}function gR(r){return new Fr(r.readTime,r.key,kl)}class Fr{constructor(t,i,s){this.readTime=t,this.documentKey=i,this.largestBatchId=s}static min(){return new Fr(At.min(),ft.empty(),kl)}static max(){return new Fr(At.max(),ft.empty(),kl)}}function yR(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=ft.comparator(r.documentKey,t.documentKey),i!==0?i:Vt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==_R)throw r;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Y((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(s,l)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof Y?i:Y.resolve(i)}catch(i){return Y.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):Y.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):Y.reject(i)}static resolve(t){return new Y((i,s)=>{i(t)})}static reject(t){return new Y((i,s)=>{s(t)})}static waitFor(t){return new Y((i,s)=>{let l=0,c=0,d=!1;t.forEach(p=>{++l,p.next(()=>{++c,d&&c===l&&i()},g=>s(g))}),d=!0,c===l&&i()})}static or(t){let i=Y.resolve(!1);for(const s of t)i=i.next(l=>l?Y.resolve(l):s());return i}static forEach(t,i){const s=[];return t.forEach((l,c)=>{s.push(i.call(this,l,c))}),this.waitFor(s)}static mapArray(t,i){return new Y((s,l)=>{const c=t.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const _=g;i(t[_]).next(S=>{d[_]=S,++p,p===c&&s(d)},S=>l(S))}})}static doWhile(t,i){return new Y((s,l)=>{const c=()=>{t()===!0?i().next(()=>{c()},l):s()};c()})}}function ER(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function lo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>i.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}oh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=-1;function lh(r){return r==null}function Fc(r){return r===0&&1/r==-1/0}function TR(r){return typeof r=="number"&&Number.isInteger(r)&&!Fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="";function SR(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=uv(t)),t=AR(r.get(i),t);return uv(t)}function AR(r,t){let i=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":i+="";break;case rT:i+="";break;default:i+=c}}return i}function uv(r){return r+rT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function $r(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function sT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,i){this.comparator=t,this.root=i||Ye.EMPTY}insert(t,i){return new ue(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(t){let i=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return i+s.left.size;l<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,s)=>(t(i,s),!1))}toString(){const t=[];return this.inorderTraversal((i,s)=>(t.push(`${i}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Sc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Sc(this.root,t,this.comparator,!0)}}class Sc{constructor(t,i,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=i?s(t.key,i):1,i&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ye{constructor(t,i,s,l,c){this.key=t,this.value=i,this.color=s??Ye.RED,this.left=l??Ye.EMPTY,this.right=c??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,s,l,c){return new Ye(t??this.key,i??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,i,s),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let s,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return Ye.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw vt(27949);return t+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(t,i,s,l,c){return this}insert(t,i,s){return new Ye(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,s)=>(t(i),!1))}forEachInRange(t,i){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(t){return new hv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(s=>{i=i.add(s)}),i}isEqual(t){if(!(t instanceof ke)||this.size!==t.size)return!1;const i=this.data.getIterator(),s=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new ke(this.comparator);return i.data=t,i}}class hv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.fields=t,t.sort(Xe.comparator)}static empty(){return new wn([])}unionWith(t){let i=new ke(Xe.comparator);for(const s of this.fields)i=i.add(s);for(const s of t)i=i.add(s);return new wn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Ja(this.fields,t.fields,(i,s)=>i.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new aT("Invalid base64 string: "+c):c}}(t);return new We(i)}static fromUint8Array(t){const i=function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c}(t);return new We(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}We.EMPTY_BYTE_STRING=new We("");const bR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(r){if(Yt(!!r,39018),typeof r=="string"){let t=0;const i=bR.exec(r);if(Yt(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:_e(r.seconds),nanos:_e(r.nanos)}}function _e(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Kr(r){return typeof r=="string"?We.fromBase64String(r):We.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="server_timestamp",lT="__type__",uT="__previous_value__",cT="__local_write_time__";function Mm(r){return(r?.mapValue?.fields||{})[lT]?.stringValue===oT}function uh(r){const t=r.mapValue.fields[uT];return Mm(t)?uh(t):t}function Pl(r){const t=Qr(r.mapValue.fields[cT].timestampValue);return new se(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,i,s,l,c,d,p,g,_,S){this.databaseId=t,this.appId=i,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=S}}const Qc="(default)";class Ul{constructor(t,i){this.projectId=t,this.database=i||Qc}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database===Qc}isEqual(t){return t instanceof Ul&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="__type__",RR="__max__",Ac={mapValue:{}},fT="__vector__",Kc="value";function Yr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mm(r)?4:CR(r)?9007199254740991:IR(r)?10:11:vt(28295,{value:r})}function Ti(r,t){if(r===t)return!0;const i=Yr(r);if(i!==Yr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Pl(r).isEqual(Pl(t));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Qr(l.timestampValue),p=Qr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(l,c){return Kr(l.bytesValue).isEqual(Kr(c.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(l,c){return _e(l.geoPointValue.latitude)===_e(c.geoPointValue.latitude)&&_e(l.geoPointValue.longitude)===_e(c.geoPointValue.longitude)}(r,t);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return _e(l.integerValue)===_e(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=_e(l.doubleValue),p=_e(c.doubleValue);return d===p?Fc(d)===Fc(p):isNaN(d)&&isNaN(p)}return!1}(r,t);case 9:return Ja(r.arrayValue.values||[],t.arrayValue.values||[],Ti);case 10:case 11:return function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(cv(d)!==cv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Ti(d[g],p[g])))return!1;return!0}(r,t);default:return vt(52216,{left:r})}}function Ll(r,t){return(r.values||[]).find(i=>Ti(i,t))!==void 0}function $a(r,t){if(r===t)return 0;const i=Yr(r),s=Yr(t);if(i!==s)return Vt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Vt(r.booleanValue,t.booleanValue);case 2:return function(c,d){const p=_e(c.integerValue||c.doubleValue),g=_e(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(r,t);case 3:return fv(r.timestampValue,t.timestampValue);case 4:return fv(Pl(r),Pl(t));case 5:return tm(r.stringValue,t.stringValue);case 6:return function(c,d){const p=Kr(c),g=Kr(d);return p.compareTo(g)}(r.bytesValue,t.bytesValue);case 7:return function(c,d){const p=c.split("/"),g=d.split("/");for(let _=0;_<p.length&&_<g.length;_++){const S=Vt(p[_],g[_]);if(S!==0)return S}return Vt(p.length,g.length)}(r.referenceValue,t.referenceValue);case 8:return function(c,d){const p=Vt(_e(c.latitude),_e(d.latitude));return p!==0?p:Vt(_e(c.longitude),_e(d.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return dv(r.arrayValue,t.arrayValue);case 10:return function(c,d){const p=c.fields||{},g=d.fields||{},_=p[Kc]?.arrayValue,S=g[Kc]?.arrayValue,C=Vt(_?.values?.length||0,S?.values?.length||0);return C!==0?C:dv(_,S)}(r.mapValue,t.mapValue);case 11:return function(c,d){if(c===Ac.mapValue&&d===Ac.mapValue)return 0;if(c===Ac.mapValue)return 1;if(d===Ac.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),_=d.fields||{},S=Object.keys(_);g.sort(),S.sort();for(let C=0;C<g.length&&C<S.length;++C){const D=tm(g[C],S[C]);if(D!==0)return D;const q=$a(p[g[C]],_[S[C]]);if(q!==0)return q}return Vt(g.length,S.length)}(r.mapValue,t.mapValue);default:throw vt(23264,{he:i})}}function fv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Vt(r,t);const i=Qr(r),s=Qr(t),l=Vt(i.seconds,s.seconds);return l!==0?l:Vt(i.nanos,s.nanos)}function dv(r,t){const i=r.values||[],s=t.values||[];for(let l=0;l<i.length&&l<s.length;++l){const c=$a(i[l],s[l]);if(c)return c}return Vt(i.length,s.length)}function to(r){return em(r)}function em(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const s=Qr(i);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return Kr(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return ft.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let s="[",l=!0;for(const c of i.values||[])l?l=!1:s+=",",s+=em(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(i){const s=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${em(i.fields[d])}`;return l+"}"}(r.mapValue):vt(61005,{value:r})}function Mc(r){switch(Yr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=uh(r);return t?16+Mc(t):16;case 5:return 2*r.stringValue.length;case 6:return Kr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,c)=>l+Mc(c),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return $r(s.fields,(c,d)=>{l+=c.length+Mc(d)}),l}(r.mapValue);default:throw vt(13486,{value:r})}}function nm(r){return!!r&&"integerValue"in r}function xm(r){return!!r&&"arrayValue"in r}function mv(r){return!!r&&"nullValue"in r}function pv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function xc(r){return!!r&&"mapValue"in r}function IR(r){return(r?.mapValue?.fields||{})[hT]?.stringValue===fT}function Cl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return $r(r.mapValue.fields,(i,s)=>t.mapValue.fields[i]=Cl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Cl(r.arrayValue.values[i]);return t}return{...r}}function CR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===RR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.value=t}static empty(){return new dn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let s=0;s<t.length-1;++s)if(i=(i.mapValue.fields||{})[t.get(s)],!xc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Cl(i)}setAll(t){let i=Xe.emptyPath(),s={},l=[];t.forEach((d,p)=>{if(!i.isImmediateParentOf(p)){const g=this.getFieldsMap(i);this.applyChanges(g,s,l),s={},l=[],i=p.popLast()}d?s[p.lastSegment()]=Cl(d):l.push(p.lastSegment())});const c=this.getFieldsMap(i);this.applyChanges(c,s,l)}delete(t){const i=this.field(t.popLast());xc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ti(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=i.mapValue.fields[t.get(s)];xc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(s)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,s){$r(i,(l,c)=>t[l]=c);for(const l of s)delete t[l]}clone(){return new dn(Cl(this.value))}}function dT(r){const t=[];return $r(r.fields,(i,s)=>{const l=new Xe([i]);if(xc(s)){const c=dT(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)}),new wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t,i,s,l,c,d,p){this.key=t,this.documentType=i,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(t){return new en(t,0,At.min(),At.min(),At.min(),dn.empty(),0)}static newFoundDocument(t,i,s,l){return new en(t,1,i,At.min(),s,l,0)}static newNoDocument(t,i){return new en(t,2,i,At.min(),At.min(),dn.empty(),0)}static newUnknownDocument(t,i){return new en(t,3,i,At.min(),At.min(),dn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof en&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t,i){this.position=t,this.inclusive=i}}function gv(r,t,i){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ft.comparator(ft.fromName(d.referenceValue),i.key):s=$a(d,i.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function yv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Ti(r.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t,i="asc"){this.field=t,this.dir=i}}function DR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{}class Ve extends mT{constructor(t,i,s){super(),this.field=t,this.op=i,this.value=s}static create(t,i,s){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,s):new NR(t,i,s):i==="array-contains"?new VR(t,s):i==="in"?new kR(t,s):i==="not-in"?new PR(t,s):i==="array-contains-any"?new UR(t,s):new Ve(t,i,s)}static createKeyFieldInFilter(t,i,s){return i==="in"?new MR(t,s):new xR(t,s)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison($a(i,this.value)):i!==null&&Yr(this.value)===Yr(i)&&this.matchesComparison($a(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends mT{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Si(t,i)}matches(t){return pT(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pT(r){return r.op==="and"}function gT(r){return OR(r)&&pT(r)}function OR(r){for(const t of r.filters)if(t instanceof Si)return!1;return!0}function im(r){if(r instanceof Ve)return r.field.canonicalString()+r.op.toString()+to(r.value);if(gT(r))return r.filters.map(t=>im(t)).join(",");{const t=r.filters.map(i=>im(i)).join(",");return`${r.op}(${t})`}}function yT(r,t){return r instanceof Ve?function(s,l){return l instanceof Ve&&s.op===l.op&&s.field.isEqual(l.field)&&Ti(s.value,l.value)}(r,t):r instanceof Si?function(s,l){return l instanceof Si&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((c,d,p)=>c&&yT(d,l.filters[p]),!0):!1}(r,t):void vt(19439)}function _T(r){return r instanceof Ve?function(i){return`${i.field.canonicalString()} ${i.op} ${to(i.value)}`}(r):r instanceof Si?function(i){return i.op.toString()+" {"+i.getFilters().map(_T).join(" ,")+"}"}(r):"Filter"}class NR extends Ve{constructor(t,i,s){super(t,i,s),this.key=ft.fromName(s.referenceValue)}matches(t){const i=ft.comparator(t.key,this.key);return this.matchesComparison(i)}}class MR extends Ve{constructor(t,i){super(t,"in",i),this.keys=vT("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class xR extends Ve{constructor(t,i){super(t,"not-in",i),this.keys=vT("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function vT(r,t){return(t.arrayValue?.values||[]).map(i=>ft.fromName(i.referenceValue))}class VR extends Ve{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return xm(i)&&Ll(i.arrayValue,this.value)}}class kR extends Ve{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Ll(this.value.arrayValue,i)}}class PR extends Ve{constructor(t,i){super(t,"not-in",i)}matches(t){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Ll(this.value.arrayValue,i)}}class UR extends Ve{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!xm(i)||!i.arrayValue.values)&&i.arrayValue.values.some(s=>Ll(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(t,i=null,s=[],l=[],c=null,d=null,p=null){this.path=t,this.collectionGroup=i,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function _v(r,t=null,i=[],s=[],l=null,c=null,d=null){return new LR(r,t,i,s,l,c,d)}function Vm(r){const t=bt(r);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(s=>im(s)).join(","),i+="|ob:",i+=t.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),lh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>to(s)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>to(s)).join(",")),t.Te=i}return t.Te}function km(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!DR(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!yT(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!yv(r.startAt,t.startAt)&&yv(r.endAt,t.endAt)}function rm(r){return ft.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t,i=null,s=[],l=[],c=null,d="F",p=null,g=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zR(r,t,i,s,l,c,d,p){return new ch(r,t,i,s,l,c,d,p)}function Pm(r){return new ch(r)}function vv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function BR(r){return r.collectionGroup!==null}function Dl(r){const t=bt(r);if(t.Ie===null){t.Ie=[];const i=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),i.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new ke(Xe.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(p=p.add(_.field))})}),p})(t).forEach(c=>{i.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new Xc(c,s))}),i.has(Xe.keyField().canonicalString())||t.Ie.push(new Xc(Xe.keyField(),s))}return t.Ie}function gi(r){const t=bt(r);return t.Ee||(t.Ee=jR(t,Dl(r))),t.Ee}function jR(r,t){if(r.limitType==="F")return _v(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Xc(l.field,c)});const i=r.endAt?new Yc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Yc(r.startAt.position,r.startAt.inclusive):null;return _v(r.path,r.collectionGroup,t,r.filters,r.limit,i,s)}}function sm(r,t,i){return new ch(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function hh(r,t){return km(gi(r),gi(t))&&r.limitType===t.limitType}function ET(r){return`${Vm(gi(r))}|lt:${r.limitType}`}function ja(r){return`Query(target=${function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map(l=>_T(l)).join(", ")}]`),lh(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map(l=>to(l)).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map(l=>to(l)).join(",")),`Target(${s})`}(gi(r))}; limitType=${r.limitType})`}function fh(r,t){return t.isFoundDocument()&&function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ft.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,t)&&function(s,l){for(const c of Dl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(r,t)&&function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0}(r,t)&&function(s,l){return!(s.startAt&&!function(d,p,g){const _=gv(d,p,g);return d.inclusive?_<=0:_<0}(s.startAt,Dl(s),l)||s.endAt&&!function(d,p,g){const _=gv(d,p,g);return d.inclusive?_>=0:_>0}(s.endAt,Dl(s),l))}(r,t)}function HR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function TT(r){return(t,i)=>{let s=!1;for(const l of Dl(r)){const c=qR(l,t,i);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function qR(r,t,i){const s=r.field.isKeyField()?ft.comparator(t.key,i.key):function(c,d,p){const g=d.data.field(c),_=p.data.field(c);return g!==null&&_!==null?$a(g,_):vt(42886)}(r.field,t,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return vt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,i){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[i]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){$r(this.inner,(i,s)=>{for(const[l,c]of s)t(l,c)})}isEmpty(){return sT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=new ue(ft.comparator);function ir(){return GR}const ST=new ue(ft.comparator);function Al(...r){let t=ST;for(const i of r)t=t.insert(i.key,i);return t}function AT(r){let t=ST;return r.forEach((i,s)=>t=t.insert(i,s.overlayedDocument)),t}function Us(){return Ol()}function bT(){return Ol()}function Ol(){return new Ks(r=>r.toString(),(r,t)=>r.isEqual(t))}const FR=new ue(ft.comparator),QR=new ke(ft.comparator);function kt(...r){let t=QR;for(const i of r)t=t.add(i);return t}const KR=new ke(Vt);function YR(){return KR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(t)?"-0":t}}function wT(r){return{integerValue:""+r}}function XR(r,t){return TR(t)?wT(t):Um(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function WR(r,t,i){return r instanceof Wc?function(l,c){const d={fields:{[lT]:{stringValue:oT},[cT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Mm(c)&&(c=uh(c)),c&&(d.fields[uT]=c),{mapValue:d}}(i,t):r instanceof zl?IT(r,t):r instanceof Bl?CT(r,t):function(l,c){const d=RT(l,c),p=Ev(d)+Ev(l.Ae);return nm(d)&&nm(l.Ae)?wT(p):Um(l.serializer,p)}(r,t)}function ZR(r,t,i){return r instanceof zl?IT(r,t):r instanceof Bl?CT(r,t):i}function RT(r,t){return r instanceof Zc?function(s){return nm(s)||function(c){return!!c&&"doubleValue"in c}(s)}(t)?t:{integerValue:0}:null}class Wc extends dh{}class zl extends dh{constructor(t){super(),this.elements=t}}function IT(r,t){const i=DT(t);for(const s of r.elements)i.some(l=>Ti(l,s))||i.push(s);return{arrayValue:{values:i}}}class Bl extends dh{constructor(t){super(),this.elements=t}}function CT(r,t){let i=DT(t);for(const s of r.elements)i=i.filter(l=>!Ti(l,s));return{arrayValue:{values:i}}}class Zc extends dh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function Ev(r){return _e(r.integerValue||r.doubleValue)}function DT(r){return xm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function JR(r,t){return r.field.isEqual(t.field)&&function(s,l){return s instanceof zl&&l instanceof zl||s instanceof Bl&&l instanceof Bl?Ja(s.elements,l.elements,Ti):s instanceof Zc&&l instanceof Zc?Ti(s.Ae,l.Ae):s instanceof Wc&&l instanceof Wc}(r.transform,t.transform)}class $R{constructor(t,i){this.version=t,this.transformResults=i}}class yi{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new yi}static exists(t){return new yi(void 0,t)}static updateTime(t){return new yi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Vc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class mh{}function OT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new MT(r.key,yi.none()):new Xl(r.key,r.data,yi.none());{const i=r.data,s=dn.empty();let l=new ke(Xe.comparator);for(let c of t.fields)if(!l.has(c)){let d=i.field(c);d===null&&c.length>1&&(c=c.popLast(),d=i.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new ts(r.key,s,new wn(l.toArray()),yi.none())}}function tI(r,t,i){r instanceof Xl?function(l,c,d){const p=l.value.clone(),g=Sv(l.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,t,i):r instanceof ts?function(l,c,d){if(!Vc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Sv(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(NT(l)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,t,i):function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,i)}function Nl(r,t,i,s){return r instanceof Xl?function(c,d,p,g){if(!Vc(c.precondition,d))return p;const _=c.value.clone(),S=Av(c.fieldTransforms,g,d);return _.setAll(S),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null}(r,t,i,s):r instanceof ts?function(c,d,p,g){if(!Vc(c.precondition,d))return p;const _=Av(c.fieldTransforms,g,d),S=d.data;return S.setAll(NT(c)),S.setAll(_),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(C=>C.field))}(r,t,i,s):function(c,d,p){return Vc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p}(r,t,i)}function eI(r,t){let i=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=RT(s.transform,l||null);c!=null&&(i===null&&(i=dn.empty()),i.set(s.field,c))}return i||null}function Tv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ja(s,l,(c,d)=>JR(c,d))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Xl extends mh{constructor(t,i,s,l=[]){super(),this.key=t,this.value=i,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ts extends mh{constructor(t,i,s,l,c=[]){super(),this.key=t,this.data=i,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function NT(r){const t=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const s=r.data.field(i);t.set(i,s)}}),t}function Sv(r,t,i){const s=new Map;Yt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const c=r[l],d=c.transform,p=t.data.field(c.field);s.set(c.field,ZR(d,p,i[l]))}return s}function Av(r,t,i){const s=new Map;for(const l of r){const c=l.transform,d=i.data.field(l.field);s.set(l.field,WR(c,d,t))}return s}class MT extends mh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends mh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t,i,s,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,i){const s=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&tI(c,t,s[l])}}applyToLocalView(t,i){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(i=Nl(s,t,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(i=Nl(s,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const s=bT();return this.mutations.forEach(l=>{const c=t.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=i.has(l.key)?null:p;const g=OT(d,p);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(At.min())}),s}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),kt())}isEqual(t){return this.batchId===t.batchId&&Ja(this.mutations,t.mutations,(i,s)=>Tv(i,s))&&Ja(this.baseMutations,t.baseMutations,(i,s)=>Tv(i,s))}}class Lm{constructor(t,i,s,l){this.batch=t,this.commitVersion=i,this.mutationResults=s,this.docVersions=l}static from(t,i,s){Yt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=function(){return FR}();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Lm(t,i,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Bt;function aI(r){switch(r){case Z.OK:return vt(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return vt(15467,{code:r})}}function xT(r){if(r===void 0)return nr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case we.OK:return Z.OK;case we.CANCELLED:return Z.CANCELLED;case we.UNKNOWN:return Z.UNKNOWN;case we.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case we.INTERNAL:return Z.INTERNAL;case we.UNAVAILABLE:return Z.UNAVAILABLE;case we.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case we.NOT_FOUND:return Z.NOT_FOUND;case we.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case we.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case we.ABORTED:return Z.ABORTED;case we.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case we.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case we.DATA_LOSS:return Z.DATA_LOSS;default:return vt(39323,{code:r})}}(Bt=we||(we={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Hr([4294967295,4294967295],0);function bv(r){const t=oI().encode(r),i=new YE;return i.update(t),new Uint8Array(i.digest())}function wv(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Hr([i,s],0),new Hr([l,c],0)]}class zm{constructor(t,i,s){if(this.bitmap=t,this.padding=i,this.hashCount=s,i<0||i>=8)throw new bl(`Invalid padding: ${i}`);if(s<0)throw new bl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${s}`);if(t.length===0&&i!==0)throw new bl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=Hr.fromNumber(this.ge)}ye(t,i,s){let l=t.add(i.multiply(Hr.fromNumber(s)));return l.compare(lI)===1&&(l=new Hr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=bv(t),[s,l]=wv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,i,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new zm(c,l,i);return s.forEach(p=>d.insert(p)),d}insert(t){if(this.ge===0)return;const i=bv(t),[s,l]=wv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const i=Math.floor(t/8),s=t%8;this.bitmap[i]|=1<<s}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t,i,s,l,c){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,i,s){const l=new Map;return l.set(t,Wl.createSynthesizedTargetChangeForCurrentChange(t,i,s)),new ph(At.min(),l,new ue(Vt),ir(),kt())}}class Wl{constructor(t,i,s,l,c){this.resumeToken=t,this.current=i,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,i,s){return new Wl(s,i,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t,i,s,l){this.be=t,this.removedTargetIds=i,this.key=s,this.De=l}}class VT{constructor(t,i){this.targetId=t,this.Ce=i}}class kT{constructor(t,i,s=We.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=s,this.cause=l}}class Rv{constructor(){this.ve=0,this.Fe=Iv(),this.Me=We.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=kt(),i=kt(),s=kt();return this.Fe.forEach((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:s=s.add(l);break;default:vt(38017,{changeType:c})}}),new Wl(this.Me,this.xe,t,i,s)}qe(){this.Oe=!1,this.Fe=Iv()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uI{constructor(t){this.Ge=t,this.ze=new Map,this.je=ir(),this.Je=bc(),this.He=bc(),this.Ye=new ue(Vt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,i=>{const s=this.nt(i);switch(t.state){case 0:this.rt(i)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),s.Le(t.resumeToken));break;default:vt(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach((s,l)=>{this.rt(l)&&i(l)})}st(t){const i=t.targetId,s=t.Ce.count,l=this.ot(i);if(l){const c=l.target;if(rm(c))if(s===0){const d=new ft(c.path);this.et(i,d,en.newNoDocument(d,At.min()))}else Yt(s===1,20013,{expectedCount:s});else{const d=this._t(i);if(d!==s){const p=this.ut(t),g=p?this.ct(p,t,d):1;if(g!==0){this.it(i);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=i;let d,p;try{d=Kr(s).toUint8Array()}catch(g){if(g instanceof aT)return Za("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new zm(d,l,c)}catch(g){return Za(g instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(t,i,s){return i.Ce.count===s-this.Pt(t,i.targetId)?0:2}Pt(t,i){const s=this.Ge.getRemoteKeysForTarget(i);let l=0;return s.forEach(c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(p)||(this.et(i,c,null),l++)}),l}Tt(t){const i=new Map;this.ze.forEach((c,d)=>{const p=this.ot(d);if(p){if(c.current&&rm(p.target)){const g=new ft(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,en.newNoDocument(g,t))}c.Be&&(i.set(d,c.ke()),c.qe())}});let s=kt();this.He.forEach((c,d)=>{let p=!0;d.forEachWhile(g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(s=s.add(c))}),this.je.forEach((c,d)=>d.setReadTime(t));const l=new ph(t,i,this.Ye,this.je,s);return this.je=ir(),this.Je=bc(),this.He=bc(),this.Ye=new ue(Vt),l}Xe(t,i){if(!this.rt(t))return;const s=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,s),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),s&&(this.je=this.je.insert(i,s))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new Rv,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new ke(Vt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new ke(Vt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||at("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Rv),this.Ge.getRemoteKeysForTarget(t).forEach(i=>{this.et(t,i,null)})}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function bc(){return new ue(ft.comparator)}function Iv(){return new ue(ft.comparator)}const cI={asc:"ASCENDING",desc:"DESCENDING"},hI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fI={and:"AND",or:"OR"};class dI{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function am(r,t){return r.useProto3Json||lh(t)?t:{value:t}}function Jc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function PT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function mI(r,t){return Jc(r,t.toTimestamp())}function _i(r){return Yt(!!r,49232),At.fromTimestamp(function(i){const s=Qr(i);return new se(s.seconds,s.nanos)}(r))}function Bm(r,t){return om(r,t).canonicalString()}function om(r,t){const i=function(l){return new re(["projects",l.projectId,"databases",l.database])}(r).child("documents");return t===void 0?i:i.child(t)}function UT(r){const t=re.fromString(r);return Yt(HT(t),10190,{key:t.toString()}),t}function lm(r,t){return Bm(r.databaseId,t.path)}function Ud(r,t){const i=UT(t);if(i.get(1)!==r.databaseId.projectId)throw new lt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new lt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new ft(zT(i))}function LT(r,t){return Bm(r.databaseId,t)}function pI(r){const t=UT(r);return t.length===4?re.emptyPath():zT(t)}function um(r){return new re(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function zT(r){return Yt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Cv(r,t,i){return{name:lm(r,t),fields:i.value.mapValue.fields}}function gI(r,t){let i;if("targetChange"in t){t.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:vt(39313,{state:_})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=function(_,S){return _.useProto3Json?(Yt(S===void 0||typeof S=="string",58123),We.fromBase64String(S||"")):(Yt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),We.fromUint8Array(S||new Uint8Array))}(r,t.targetChange.resumeToken),d=t.targetChange.cause,p=d&&function(_){const S=_.code===void 0?Z.UNKNOWN:xT(_.code);return new lt(S,_.message||"")}(d);i=new kT(s,l,c,p||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Ud(r,s.document.name),c=_i(s.document.updateTime),d=s.document.createTime?_i(s.document.createTime):At.min(),p=new dn({mapValue:{fields:s.document.fields}}),g=en.newFoundDocument(l,c,d,p),_=s.targetIds||[],S=s.removedTargetIds||[];i=new kc(_,S,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Ud(r,s.document),c=s.readTime?_i(s.readTime):At.min(),d=en.newNoDocument(l,c),p=s.removedTargetIds||[];i=new kc([],p,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Ud(r,s.document),c=s.removedTargetIds||[];i=new kc([],c,l,null)}else{if(!("filter"in t))return vt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new sI(l,c),p=s.targetId;i=new VT(p,d)}}return i}function yI(r,t){let i;if(t instanceof Xl)i={update:Cv(r,t.key,t.value)};else if(t instanceof MT)i={delete:lm(r,t.key)};else if(t instanceof ts)i={update:Cv(r,t.key,t.data),updateMask:RI(t.fieldMask)};else{if(!(t instanceof nI))return vt(16599,{Vt:t.type});i={verify:lm(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(s=>function(c,d){const p=d.transform;if(p instanceof Wc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof zl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Bl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Zc)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw vt(20930,{transform:d.transform})}(0,s))),t.precondition.isNone||(i.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:mI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:vt(27497)}(r,t.precondition)),i}function _I(r,t){return r&&r.length>0?(Yt(t!==void 0,14353),r.map(i=>function(l,c){let d=l.updateTime?_i(l.updateTime):_i(c);return d.isEqual(At.min())&&(d=_i(c)),new $R(d,l.transformResults||[])}(i,t))):[]}function vI(r,t){return{documents:[LT(r,t.path)]}}function EI(r,t){const i={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=LT(r,l);const c=function(_){if(_.length!==0)return jT(Si.create(_,"and"))}(t.filters);c&&(i.structuredQuery.where=c);const d=function(_){if(_.length!==0)return _.map(S=>function(D){return{field:Ha(D.field),direction:AI(D.dir)}}(S))}(t.orderBy);d&&(i.structuredQuery.orderBy=d);const p=am(r,t.limit);return p!==null&&(i.structuredQuery.limit=p),t.startAt&&(i.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ft:i,parent:l}}function TI(r){let t=pI(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let l=null;if(s>0){Yt(s===1,65062);const S=i.from[0];S.allDescendants?l=S.collectionId:t=t.child(S.collectionId)}let c=[];i.where&&(c=function(C){const D=BT(C);return D instanceof Si&&gT(D)?D.getFilters():[D]}(i.where));let d=[];i.orderBy&&(d=function(C){return C.map(D=>function(W){return new Xc(qa(W.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(W.direction))}(D))}(i.orderBy));let p=null;i.limit&&(p=function(C){let D;return D=typeof C=="object"?C.value:C,lh(D)?null:D}(i.limit));let g=null;i.startAt&&(g=function(C){const D=!!C.before,q=C.values||[];return new Yc(q,D)}(i.startAt));let _=null;return i.endAt&&(_=function(C){const D=!C.before,q=C.values||[];return new Yc(q,D)}(i.endAt)),zR(t,l,d,c,p,"F",g,_)}function SI(r,t){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:l})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function BT(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=qa(i.unaryFilter.field);return Ve.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=qa(i.unaryFilter.field);return Ve.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=qa(i.unaryFilter.field);return Ve.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=qa(i.unaryFilter.field);return Ve.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}}(r):r.fieldFilter!==void 0?function(i){return Ve.create(qa(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return Si.create(i.compositeFilter.filters.map(s=>BT(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return vt(1026)}}(i.compositeFilter.op))}(r):vt(30097,{filter:r})}function AI(r){return cI[r]}function bI(r){return hI[r]}function wI(r){return fI[r]}function Ha(r){return{fieldPath:r.canonicalString()}}function qa(r){return Xe.fromServerFormat(r.fieldPath)}function jT(r){return r instanceof Ve?function(i){if(i.op==="=="){if(pv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NAN"}};if(mv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(pv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NOT_NAN"}};if(mv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(i.field),op:bI(i.op),value:i.value}}}(r):r instanceof Si?function(i){const s=i.getFilters().map(l=>jT(l));return s.length===1?s[0]:{compositeFilter:{op:wI(i.op),filters:s}}}(r):vt(54877,{filter:r})}function RI(r){const t=[];return r.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function HT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,i,s,l,c=At.min(),d=At.min(),p=We.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=i,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(t){return new Lr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t){this.yt=t}}function CI(r){const t=TI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?sm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.Cn=new OI}addToCollectionParentIndex(t,i){return this.Cn.add(i),Y.resolve()}getCollectionParents(t,i){return Y.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return Y.resolve()}deleteFieldIndex(t,i){return Y.resolve()}deleteAllFieldIndexes(t){return Y.resolve()}createTargetIndexes(t,i){return Y.resolve()}getDocumentsMatchingTarget(t,i){return Y.resolve(null)}getIndexType(t,i){return Y.resolve(0)}getFieldIndexes(t,i){return Y.resolve([])}getNextCollectionGroupToUpdate(t){return Y.resolve(null)}getMinOffset(t,i){return Y.resolve(Fr.min())}getMinOffsetFromCollectionGroup(t,i){return Y.resolve(Fr.min())}updateCollectionGroup(t,i,s){return Y.resolve()}updateIndexEntries(t,i){return Y.resolve()}}class OI{constructor(){this.index={}}add(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i]||new ke(re.comparator),c=!l.has(s);return this.index[i]=l.add(s),c}has(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i];return l&&l.has(s)}getEntries(t){return(this.index[t]||new ke(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qT=41943040;class fn{static withCacheSize(t){return new fn(t,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(qT,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new eo(0)}static cr(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LruGarbageCollector",NI=1048576;function Nv([r,t],[i,s]){const l=Vt(r,i);return l===0?Vt(t,s):l}class MI{constructor(t){this.Ir=t,this.buffer=new ke(Nv),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();Nv(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class xI{constructor(t,i,s){this.garbageCollector=t,this.asyncQueue=i,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){at(Ov,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){lo(i)?at(Ov,"Ignoring IndexedDB error during garbage collection: ",i):await oo(i)}await this.Vr(3e5)})}}class VI{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next(s=>Math.floor(i/100*s))}nthSequenceNumber(t,i){if(i===0)return Y.resolve(oh.ce);const s=new MI(i);return this.mr.forEachTarget(t,l=>s.Ar(l.sequenceNumber)).next(()=>this.mr.pr(t,l=>s.Ar(l))).next(()=>s.maxValue)}removeTargets(t,i,s){return this.mr.removeTargets(t,i,s)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Dv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dv):this.yr(t,i))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let s,l,c,d,p,g,_;const S=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,d=Date.now(),this.nthSequenceNumber(t,l))).next(C=>(s=C,p=Date.now(),this.removeTargets(t,s,i))).next(C=>(c=C,g=Date.now(),this.removeOrphanedDocuments(t,s))).next(C=>(_=Date.now(),Ba()<=xt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-S}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${C} documents in `+(_-g)+`ms
Total Duration: ${_-S}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:C})))}}function kI(r,t){return new VI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.changes=new Ks(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,en.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?Y.resolve(s):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t,i,s,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,i){let s=null;return this.documentOverlayCache.getOverlay(t,i).next(l=>(s=l,this.remoteDocumentCache.getEntry(t,i))).next(l=>(s!==null&&Nl(s.mutation,l,wn.empty(),se.now()),l))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.getLocalViewOfDocuments(t,s,kt()).next(()=>s))}getLocalViewOfDocuments(t,i,s=kt()){const l=Us();return this.populateOverlays(t,l,i).next(()=>this.computeViews(t,i,l,s).next(c=>{let d=Al();return c.forEach((p,g)=>{d=d.insert(p,g.overlayedDocument)}),d}))}getOverlayedDocuments(t,i){const s=Us();return this.populateOverlays(t,s,i).next(()=>this.computeViews(t,i,s,kt()))}populateOverlays(t,i,s){const l=[];return s.forEach(c=>{i.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(t,l).next(c=>{c.forEach((d,p)=>{i.set(d,p)})})}computeViews(t,i,s,l){let c=ir();const d=Ol(),p=function(){return Ol()}();return i.forEach((g,_)=>{const S=s.get(_.key);l.has(_.key)&&(S===void 0||S.mutation instanceof ts)?c=c.insert(_.key,_):S!==void 0?(d.set(_.key,S.mutation.getFieldMask()),Nl(S.mutation,_,S.mutation.getFieldMask(),se.now())):d.set(_.key,wn.empty())}),this.recalculateAndSaveOverlays(t,c).next(g=>(g.forEach((_,S)=>d.set(_,S)),i.forEach((_,S)=>p.set(_,new UI(S,d.get(_)??null))),p))}recalculateAndSaveOverlays(t,i){const s=Ol();let l=new ue((d,p)=>d-p),c=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(d=>{for(const p of d)p.keys().forEach(g=>{const _=i.get(g);if(_===null)return;let S=s.get(g)||wn.empty();S=p.applyToLocalView(_,S),s.set(g,S);const C=(l.get(p.batchId)||kt()).add(g);l=l.insert(p.batchId,C)})}).next(()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),_=g.key,S=g.value,C=bT();S.forEach(D=>{if(!c.has(D)){const q=OT(i.get(D),s.get(D));q!==null&&C.set(D,q),c=c.add(D)}}),d.push(this.documentOverlayCache.saveOverlays(t,_,C))}return Y.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,i,s,l){return function(d){return ft.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):BR(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,s,l):this.getDocumentsMatchingCollectionQuery(t,i,s,l)}getNextDocuments(t,i,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,s,l).next(c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,s.largestBatchId,l-c.size):Y.resolve(Us());let p=kl,g=c;return d.next(_=>Y.forEach(_,(S,C)=>(p<C.largestBatchId&&(p=C.largestBatchId),c.get(S)?Y.resolve():this.remoteDocumentCache.getEntry(t,S).next(D=>{g=g.insert(S,D)}))).next(()=>this.populateOverlays(t,_,c)).next(()=>this.computeViews(t,g,_,kt())).next(S=>({batchId:p,changes:AT(S)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new ft(i)).next(s=>{let l=Al();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(t,i,s,l){const c=i.collectionGroup;let d=Al();return this.indexManager.getCollectionParents(t,c).next(p=>Y.forEach(p,g=>{const _=function(C,D){return new ch(D,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(i,g.child(c));return this.getDocumentsMatchingCollectionQuery(t,_,s,l).next(S=>{S.forEach((C,D)=>{d=d.insert(C,D)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,i,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,s,c,l))).next(d=>{c.forEach((g,_)=>{const S=_.getKey();d.get(S)===null&&(d=d.insert(S,en.newInvalidDocument(S)))});let p=Al();return d.forEach((g,_)=>{const S=c.get(g);S!==void 0&&Nl(S.mutation,_,wn.empty(),se.now()),fh(i,_)&&(p=p.insert(g,_))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return Y.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,function(l){return{id:l.id,version:l.version,createTime:_i(l.createTime)}}(i)),Y.resolve()}getNamedQuery(t,i){return Y.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,function(l){return{name:l.name,query:CI(l.bundledQuery),readTime:_i(l.readTime)}}(i)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.overlays=new ue(ft.comparator),this.qr=new Map}getOverlay(t,i){return Y.resolve(this.overlays.get(i))}getOverlays(t,i){const s=Us();return Y.forEach(i,l=>this.getOverlay(t,l).next(c=>{c!==null&&s.set(l,c)})).next(()=>s)}saveOverlays(t,i,s){return s.forEach((l,c)=>{this.St(t,i,c)}),Y.resolve()}removeOverlaysForBatchId(t,i,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(s)),Y.resolve()}getOverlaysForCollection(t,i,s){const l=Us(),c=i.length+1,d=new ft(i.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,_=g.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return Y.resolve(l)}getOverlaysForCollectionGroup(t,i,s,l){let c=new ue((_,S)=>_-S);const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>s){let S=c.get(_.largestBatchId);S===null&&(S=Us(),c=c.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const p=Us(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,S)=>p.set(_,S)),!(p.size()>=l)););return Y.resolve(p)}St(t,i,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new rI(i,s));let c=this.qr.get(i);c===void 0&&(c=kt(),this.qr.set(i,c)),this.qr.set(i,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(t){return Y.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(){this.Qr=new ke(je.$r),this.Ur=new ke(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const s=new je(t,i);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,i){t.forEach(s=>this.addReference(s,i))}removeReference(t,i){this.Gr(new je(t,i))}zr(t,i){t.forEach(s=>this.removeReference(s,i))}jr(t){const i=new ft(new re([])),s=new je(i,t),l=new je(i,t+1),c=[];return this.Ur.forEachInRange([s,l],d=>{this.Gr(d),c.push(d.key)}),c}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new ft(new re([])),s=new je(i,t),l=new je(i,t+1);let c=kt();return this.Ur.forEachInRange([s,l],d=>{c=c.add(d.key)}),c}containsKey(t){const i=new je(t,0),s=this.Qr.firstAfterOrEqual(i);return s!==null&&t.isEqual(s.key)}}class je{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return ft.comparator(t.key,i.key)||Vt(t.Yr,i.Yr)}static Kr(t,i){return Vt(t.Yr,i.Yr)||ft.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new ke(je.$r)}checkEmpty(t){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new iI(c,i,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new je(p.key,c)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return Y.resolve(d)}lookupMutationBatch(t,i){return Y.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const s=i+1,l=this.ei(s),c=l<0?0:l;return Y.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Nm:this.tr-1)}getAllMutationBatches(t){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const s=new je(i,0),l=new je(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],d=>{const p=this.Xr(d.Yr);c.push(p)}),Y.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,i){let s=new ke(Vt);return i.forEach(l=>{const c=new je(l,0),d=new je(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],p=>{s=s.add(p.Yr)})}),Y.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,i){const s=i.path,l=s.length+1;let c=s;ft.isDocumentKey(c)||(c=c.child(""));const d=new je(new ft(c),0);let p=new ke(Vt);return this.Zr.forEachWhile(g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(p=p.add(g.Yr)),!0)},d),Y.resolve(this.ti(p))}ti(t){const i=[];return t.forEach(s=>{const l=this.Xr(s);l!==null&&i.push(l)}),i}removeMutationBatch(t,i){Yt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Y.forEach(i.mutations,l=>{const c=new je(l.key,i.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,i){const s=new je(i,0),l=this.Zr.firstAfterOrEqual(s);return Y.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Y.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t){this.ri=t,this.docs=function(){return new ue(ft.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const s=i.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const s=this.docs.get(i);return Y.resolve(s?s.document.mutableCopy():en.newInvalidDocument(i))}getEntries(t,i){let s=ir();return i.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():en.newInvalidDocument(l))}),Y.resolve(s)}getDocumentsMatchingQuery(t,i,s,l){let c=ir();const d=i.path,p=new ft(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:_,value:{document:S}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||yR(gR(S),s)<=0||(l.has(S.key)||fh(i,S))&&(c=c.insert(S.key,S.mutableCopy()))}return Y.resolve(c)}getAllFromCollectionGroup(t,i,s,l){vt(9500)}ii(t,i){return Y.forEach(this.docs,s=>i(s))}newChangeBuffer(t){return new GI(this)}getSize(t){return Y.resolve(this.size)}}class GI extends PI{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)}),Y.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t){this.persistence=t,this.si=new Ks(i=>Vm(i),km),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.oi=0,this._i=new jm,this.targetCount=0,this.ai=eo.ur()}forEachTarget(t,i){return this.si.forEach((s,l)=>i(l)),Y.resolve()}getLastRemoteSnapshotVersion(t){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Y.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(t,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.oi&&(this.oi=i),Y.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new eo(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,Y.resolve()}updateTargetData(t,i){return this.Pr(i),Y.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Y.resolve()}removeTargets(t,i,s){let l=0;const c=[];return this.si.forEach((d,p)=>{p.sequenceNumber<=i&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)}),Y.waitFor(c).next(()=>l)}getTargetCount(t){return Y.resolve(this.targetCount)}getTargetData(t,i){const s=this.si.get(i)||null;return Y.resolve(s)}addMatchingKeys(t,i,s){return this._i.Wr(i,s),Y.resolve()}removeMatchingKeys(t,i,s){this._i.zr(i,s);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach(d=>{c.push(l.markPotentiallyOrphaned(t,d))}),Y.waitFor(c)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),Y.resolve()}getMatchingKeysForTargetId(t,i){const s=this._i.Hr(i);return Y.resolve(s)}containsKey(t,i){return Y.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t,i){this.ui={},this.overlays={},this.ci=new oh(0),this.li=!1,this.li=!0,this.hi=new jI,this.referenceDelegate=t(this),this.Pi=new FI(this),this.indexManager=new DI,this.remoteDocumentCache=function(l){return new qI(l)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new II(i),this.Ii=new zI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new BI,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let s=this.ui[t.toKey()];return s||(s=new HI(i,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,s){at("MemoryPersistence","Starting transaction:",t);const l=new QI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next(c=>this.referenceDelegate.di(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Ai(t,i){return Y.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,i)))}}class QI extends vR{constructor(t){super(),this.currentSequenceNumber=t}}class Hm{constructor(t){this.persistence=t,this.Ri=new jm,this.Vi=null}static mi(t){return new Hm(t)}get fi(){if(this.Vi)return this.Vi;throw vt(60996)}addReference(t,i,s){return this.Ri.addReference(s,i),this.fi.delete(s.toString()),Y.resolve()}removeReference(t,i,s){return this.Ri.removeReference(s,i),this.fi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),Y.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach(l=>this.fi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,i.targetId).next(l=>{l.forEach(c=>this.fi.add(c.toString()))}).next(()=>s.removeTargetData(t,i))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,s=>{const l=ft.fromPath(s);return this.gi(t,l).next(c=>{c||i.removeEntry(l,At.min())})}).next(()=>(this.Vi=null,i.apply(t)))}updateLimboDocument(t,i){return this.gi(t,i).next(s=>{s?this.fi.delete(i.toString()):this.fi.add(i.toString())})}Ti(t){return 0}gi(t,i){return Y.or([()=>Y.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class $c{constructor(t,i){this.persistence=t,this.pi=new Ks(s=>SR(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=kI(this,i)}static mi(t,i){return new $c(t,i)}Ei(){}di(t){return Y.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>i.next(l=>s+l))}wr(t){let i=0;return this.pr(t,s=>{i++}).next(()=>i)}pr(t,i){return Y.forEach(this.pi,(s,l)=>this.br(t,s,l).next(c=>c?Y.resolve():i(l)))}removeTargets(t,i,s){return this.persistence.getTargetCache().removeTargets(t,i,s)}removeOrphanedDocuments(t,i){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,d=>this.br(t,d,i).next(p=>{p||(s++,c.removeEntry(d,At.min()))})).next(()=>c.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}removeTarget(t,i){const s=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}removeReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Mc(t.data.value)),i}br(t,i,s){return Y.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return Y.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(t,i,s,l){this.targetId=t,this.fromCache=i,this.Es=s,this.ds=l}static As(t,i){let s=kt(),l=kt();for(const c of i.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new qm(t,i.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return AA()?8:ER(nn())>0?6:4}()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,s,l){const c={result:null};return this.ys(t,i).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ws(t,i,l,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new KI;return this.Ss(t,i,d).next(p=>{if(c.result=p,this.Vs)return this.bs(t,i,d,p.size)})}).next(()=>c.result)}bs(t,i,s,l){return s.documentReadCount<this.fs?(Ba()<=xt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",ja(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(Ba()<=xt.DEBUG&&at("QueryEngine","Query:",ja(i),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ba()<=xt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",ja(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gi(i))):Y.resolve())}ys(t,i){if(vv(i))return Y.resolve(null);let s=gi(i);return this.indexManager.getIndexType(t,s).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=sm(i,null,"F"),s=gi(i)),this.indexManager.getDocumentsMatchingTarget(t,s).next(c=>{const d=kt(...c);return this.ps.getDocuments(t,d).next(p=>this.indexManager.getMinOffset(t,s).next(g=>{const _=this.Ds(i,p);return this.Cs(i,_,d,g.readTime)?this.ys(t,sm(i,null,"F")):this.vs(t,_,i,g)}))})))}ws(t,i,s,l){return vv(i)||l.isEqual(At.min())?Y.resolve(null):this.ps.getDocuments(t,s).next(c=>{const d=this.Ds(i,c);return this.Cs(i,d,s,l)?Y.resolve(null):(Ba()<=xt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ja(i)),this.vs(t,d,i,pR(l,kl)).next(p=>p))})}Ds(t,i){let s=new ke(TT(t));return i.forEach((l,c)=>{fh(t,c)&&(s=s.add(c))}),s}Cs(t,i,s,l){if(t.limit===null)return!1;if(s.size!==i.size)return!0;const c=t.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,i,s){return Ba()<=xt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",ja(i)),this.ps.getDocumentsMatchingQuery(t,i,Fr.min(),s)}vs(t,i,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next(c=>(i.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="LocalStore",XI=3e8;class WI{constructor(t,i,s,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new ue(Vt),this.xs=new Ks(c=>Vm(c),km),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new LI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Ms))}}function ZI(r,t,i,s){return new WI(r,t,i,s)}async function FT(r,t){const i=bt(r);return await i.persistence.runTransaction("Handle user change","readonly",s=>{let l;return i.mutationQueue.getAllMutationBatches(s).next(c=>(l=c,i.Bs(t),i.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],p=[];let g=kt();for(const _ of l){d.push(_.batchId);for(const S of _.mutations)g=g.add(S.key)}for(const _ of c){p.push(_.batchId);for(const S of _.mutations)g=g.add(S.key)}return i.localDocuments.getDocuments(s,g).next(_=>({Ls:_,removedBatchIds:d,addedBatchIds:p}))})})}function JI(r,t){const i=bt(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=t.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return function(p,g,_,S){const C=_.batch,D=C.keys();let q=Y.resolve();return D.forEach(W=>{q=q.next(()=>S.getEntry(g,W)).next(rt=>{const J=_.docVersions.get(W);Yt(J!==null,48541),rt.version.compareTo(J)<0&&(C.applyToRemoteDocument(rt,_),rt.isValidDocument()&&(rt.setReadTime(_.commitVersion),S.addEntry(rt)))})}),q.next(()=>p.mutationQueue.removeMutationBatch(g,C))}(i,s,t,c).next(()=>c.apply(s)).next(()=>i.mutationQueue.performConsistencyCheck(s)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let g=kt();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(g=g.add(p.batch.mutations[_].key));return g}(t))).next(()=>i.localDocuments.getDocuments(s,l))})}function QT(r){const t=bt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Pi.getLastRemoteSnapshotVersion(i))}function $I(r,t){const i=bt(r),s=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const p=[];t.targetChanges.forEach((S,C)=>{const D=l.get(C);if(!D)return;p.push(i.Pi.removeMatchingKeys(c,S.removedDocuments,C).next(()=>i.Pi.addMatchingKeys(c,S.addedDocuments,C)));let q=D.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(C)!==null?q=q.withResumeToken(We.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):S.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(S.resumeToken,s)),l=l.insert(C,q),function(rt,J,Tt){return rt.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-rt.snapshotVersion.toMicroseconds()>=XI?!0:Tt.addedDocuments.size+Tt.modifiedDocuments.size+Tt.removedDocuments.size>0}(D,q,S)&&p.push(i.Pi.updateTargetData(c,q))});let g=ir(),_=kt();if(t.documentUpdates.forEach(S=>{t.resolvedLimboDocuments.has(S)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(c,S))}),p.push(tC(c,d,t.documentUpdates).next(S=>{g=S.ks,_=S.qs})),!s.isEqual(At.min())){const S=i.Pi.getLastRemoteSnapshotVersion(c).next(C=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s));p.push(S)}return Y.waitFor(p).next(()=>d.apply(c)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,g,_)).next(()=>g)}).then(c=>(i.Ms=l,c))}function tC(r,t,i){let s=kt(),l=kt();return i.forEach(c=>s=s.add(c)),t.getEntries(r,s).next(c=>{let d=ir();return i.forEach((p,g)=>{const _=c.get(p);g.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(At.min())?(t.removeEntry(p,g.readTime),d=d.insert(p,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(g),d=d.insert(p,g)):at(Gm,"Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",g.version)}),{ks:d,qs:l}})}function eC(r,t){const i=bt(r);return i.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Nm),i.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function nC(r,t){const i=bt(r);return i.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return i.Pi.getTargetData(s,t).next(c=>c?(l=c,Y.resolve(l)):i.Pi.allocateTargetId(s).next(d=>(l=new Lr(t,d,"TargetPurposeListen",s.currentSequenceNumber),i.Pi.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=i.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(s.targetId,s),i.xs.set(t,s.targetId)),s})}async function cm(r,t,i){const s=bt(r),l=s.Ms.get(t),c=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!lo(d))throw d;at(Gm,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Mv(r,t,i){const s=bt(r);let l=At.min(),c=kt();return s.persistence.runTransaction("Execute query","readwrite",d=>function(g,_,S){const C=bt(g),D=C.xs.get(S);return D!==void 0?Y.resolve(C.Ms.get(D)):C.Pi.getTargetData(_,S)}(s,d,gi(t)).next(p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next(g=>{c=g})}).next(()=>s.Fs.getDocumentsMatchingQuery(d,t,i?l:At.min(),i?c:kt())).next(p=>(iC(s,HR(t),p),{documents:p,Qs:c})))}function iC(r,t,i){let s=r.Os.get(t)||At.min();i.forEach((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Os.set(t,s)}class xv{constructor(){this.activeTargetIds=YR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class rC{constructor(){this.Mo=new xv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,s){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,s){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new xv,Promise.resolve()}handleUserChange(t,i,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="ConnectivityMonitor";class kv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){at(Vv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){at(Vv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc=null;function hm(){return wc===null?wc=function(){return 268435456+Math.round(2147483648*Math.random())}():wc++,"0x"+wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="RestConnection",aC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Qc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,i,s,l,c){const d=hm(),p=this.zo(t,i.toUriEncodedString());at(Ld,`Sending RPC '${t}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:_}=new URL(p),S=io(_);return this.Jo(t,p,g,s,S).then(C=>(at(Ld,`Received RPC '${t}' ${d}: `,C),C),C=>{throw Za(Ld,`RPC '${t}' ${d} failed with error: `,C,"url: ",p,"request:",s),C})}Ho(t,i,s,l,c,d){return this.Go(t,i,s,l,c)}jo(t,i,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ao}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),s&&s.headers.forEach((l,c)=>t[c]=l)}zo(t,i){const s=aC[t];return`${this.Uo}/v1/${i}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e="WebChannelConnection";class uC extends oC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,s,l,c){const d=hm();return new Promise((p,g)=>{const _=new XE;_.setWithCredentials(!0),_.listenOnce(WE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Nc.NO_ERROR:const C=_.getResponseJson();at($e,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(C)),p(C);break;case Nc.TIMEOUT:at($e,`RPC '${t}' ${d} timed out`),g(new lt(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const D=_.getStatus();if(at($e,`RPC '${t}' ${d} failed with status:`,D,"response text:",_.getResponseText()),D>0){let q=_.getResponseJson();Array.isArray(q)&&(q=q[0]);const W=q?.error;if(W&&W.status&&W.message){const rt=function(Tt){const yt=Tt.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(yt)>=0?yt:Z.UNKNOWN}(W.status);g(new lt(rt,W.message))}else g(new lt(Z.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new lt(Z.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:t,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{at($e,`RPC '${t}' ${d} completed.`)}});const S=JSON.stringify(l);at($e,`RPC '${t}' ${d} sending request:`,l),_.send(i,"POST",S,s,15)})}T_(t,i,s){const l=hm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=$E(),p=JE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,i,s),g.encodeInitMessageHeaders=!0;const S=c.join("");at($e,`Creating RPC '${t}' stream ${l}: ${S}`,g);const C=d.createWebChannel(S,g);this.I_(C);let D=!1,q=!1;const W=new lC({Yo:J=>{q?at($e,`Not sending because RPC '${t}' stream ${l} is closed:`,J):(D||(at($e,`Opening RPC '${t}' stream ${l} transport.`),C.open(),D=!0),at($e,`RPC '${t}' stream ${l} sending:`,J),C.send(J))},Zo:()=>C.close()}),rt=(J,Tt,yt)=>{J.listen(Tt,ht=>{try{yt(ht)}catch(qt){setTimeout(()=>{throw qt},0)}})};return rt(C,Sl.EventType.OPEN,()=>{q||(at($e,`RPC '${t}' stream ${l} transport opened.`),W.o_())}),rt(C,Sl.EventType.CLOSE,()=>{q||(q=!0,at($e,`RPC '${t}' stream ${l} transport closed`),W.a_(),this.E_(C))}),rt(C,Sl.EventType.ERROR,J=>{q||(q=!0,Za($e,`RPC '${t}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),W.a_(new lt(Z.UNAVAILABLE,"The operation could not be completed")))}),rt(C,Sl.EventType.MESSAGE,J=>{if(!q){const Tt=J.data[0];Yt(!!Tt,16349);const yt=Tt,ht=yt?.error||yt[0]?.error;if(ht){at($e,`RPC '${t}' stream ${l} received error:`,ht);const qt=ht.status;let St=function(A){const w=we[A];if(w!==void 0)return xT(w)}(qt),Ht=ht.message;St===void 0&&(St=Z.INTERNAL,Ht="Unknown error status: "+qt+" with message "+ht.message),q=!0,W.a_(new lt(St,Ht)),C.close()}else at($e,`RPC '${t}' stream ${l} received:`,Tt),W.u_(Tt)}}),rt(p,ZE.STAT_EVENT,J=>{J.stat===$d.PROXY?at($e,`RPC '${t}' stream ${l} detected buffering proxy`):J.stat===$d.NOPROXY&&at($e,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{W.__()},0),W}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(i=>i===t)}}function zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(r){return new dI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(t,i,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=i,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-s);l>0&&at("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="PersistentStream";class YT{constructor(t,i,s,l,c,d,p,g){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KT(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Z.RESOURCE_EXHAUSTED?(nr(i.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.D_===i&&this.G_(s,l)},s=>{t(()=>{const l=new lt(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)})})}G_(t,i){const s=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(l=>{s(()=>this.z_(l))}),this.stream.onMessage(l=>{s(()=>++this.F_==1?this.J_(l):this.onNext(l))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return at(Pv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget(()=>this.D_===t?i():(at(Pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cC extends YT{constructor(t,i,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,l,d),this.serializer=c}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=gI(this.serializer,t),s=function(c){if(!("targetChange"in c))return At.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?At.min():d.readTime?_i(d.readTime):At.min()}(t);return this.listener.H_(i,s)}Y_(t){const i={};i.database=um(this.serializer),i.addTarget=function(c,d){let p;const g=d.target;if(p=rm(g)?{documents:vI(c,g)}:{query:EI(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=PT(c,d.resumeToken);const _=am(c,d.expectedCount);_!==null&&(p.expectedCount=_)}else if(d.snapshotVersion.compareTo(At.min())>0){p.readTime=Jc(c,d.snapshotVersion.toTimestamp());const _=am(c,d.expectedCount);_!==null&&(p.expectedCount=_)}return p}(this.serializer,t);const s=SI(this.serializer,t);s&&(i.labels=s),this.q_(i)}Z_(t){const i={};i.database=um(this.serializer),i.removeTarget=t,this.q_(i)}}class hC extends YT{constructor(t,i,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=_I(t.writeResults,t.commitTime),s=_i(t.commitTime);return this.listener.na(s,i)}ra(){const t={};t.database=um(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map(s=>yI(this.serializer,s))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{}class dC extends fC{constructor(t,i,s,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new lt(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Go(t,om(i,s),l,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new lt(Z.UNKNOWN,c.toString())})}Ho(t,i,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,p])=>this.connection.Ho(t,om(i,s),l,d,p,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new lt(Z.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mC{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(i),this.aa=!1):at("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="RemoteStore";class pC{constructor(t,i,s,l,c){this.localStore=t,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(d=>{s.enqueueAndForget(async()=>{Ys(this)&&(at(Fs,"Restarting streams for network reachability change."),await async function(g){const _=bt(g);_.Ea.add(4),await Zl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await yh(_)}(this))})}),this.Ra=new mC(s,l)}}async function yh(r){if(Ys(r))for(const t of r.da)await t(!0)}async function Zl(r){for(const t of r.da)await t(!1)}function XT(r,t){const i=bt(r);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),Ym(i)?Km(i):uo(i).O_()&&Qm(i,t))}function Fm(r,t){const i=bt(r),s=uo(i);i.Ia.delete(t),s.O_()&&WT(i,t),i.Ia.size===0&&(s.O_()?s.L_():Ys(i)&&i.Ra.set("Unknown"))}function Qm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}uo(r).Y_(t)}function WT(r,t){r.Va.Ue(t),uo(r).Z_(t)}function Km(r){r.Va=new uI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),uo(r).start(),r.Ra.ua()}function Ym(r){return Ys(r)&&!uo(r).x_()&&r.Ia.size>0}function Ys(r){return bt(r).Ea.size===0}function ZT(r){r.Va=void 0}async function gC(r){r.Ra.set("Online")}async function yC(r){r.Ia.forEach((t,i)=>{Qm(r,t)})}async function _C(r,t){ZT(r),Ym(r)?(r.Ra.ha(t),Km(r)):r.Ra.set("Unknown")}async function vC(r,t,i){if(r.Ra.set("Online"),t instanceof kT&&t.state===2&&t.cause)try{await async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))}(r,t)}catch(s){at(Fs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await th(r,s)}else if(t instanceof kc?r.Va.Ze(t):t instanceof VT?r.Va.st(t):r.Va.tt(t),!i.isEqual(At.min()))try{const s=await QT(r.localStore);i.compareTo(s)>=0&&await function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const S=c.Ia.get(_);S&&c.Ia.set(_,S.withResumeToken(g.resumeToken,d))}}),p.targetMismatches.forEach((g,_)=>{const S=c.Ia.get(g);if(!S)return;c.Ia.set(g,S.withResumeToken(We.EMPTY_BYTE_STRING,S.snapshotVersion)),WT(c,g);const C=new Lr(S.target,g,_,S.sequenceNumber);Qm(c,C)}),c.remoteSyncer.applyRemoteEvent(p)}(r,i)}catch(s){at(Fs,"Failed to raise snapshot:",s),await th(r,s)}}async function th(r,t,i){if(!lo(t))throw t;r.Ea.add(1),await Zl(r),r.Ra.set("Offline"),i||(i=()=>QT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{at(Fs,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await yh(r)})}function JT(r,t){return t().catch(i=>th(r,i,t))}async function _h(r){const t=bt(r),i=Xr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Nm;for(;EC(t);)try{const l=await eC(t.localStore,s);if(l===null){t.Ta.length===0&&i.L_();break}s=l.batchId,TC(t,l)}catch(l){await th(t,l)}$T(t)&&t0(t)}function EC(r){return Ys(r)&&r.Ta.length<10}function TC(r,t){r.Ta.push(t);const i=Xr(r);i.O_()&&i.X_&&i.ea(t.mutations)}function $T(r){return Ys(r)&&!Xr(r).x_()&&r.Ta.length>0}function t0(r){Xr(r).start()}async function SC(r){Xr(r).ra()}async function AC(r){const t=Xr(r);for(const i of r.Ta)t.ea(i.mutations)}async function bC(r,t,i){const s=r.Ta.shift(),l=Lm.from(s,t,i);await JT(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await _h(r)}async function wC(r,t){t&&Xr(r).X_&&await async function(s,l){if(function(d){return aI(d)&&d!==Z.ABORTED}(l.code)){const c=s.Ta.shift();Xr(s).B_(),await JT(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l)),await _h(s)}}(r,t),$T(r)&&t0(r)}async function Uv(r,t){const i=bt(r);i.asyncQueue.verifyOperationInProgress(),at(Fs,"RemoteStore received new credentials");const s=Ys(i);i.Ea.add(3),await Zl(i),s&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await yh(i)}async function RC(r,t){const i=bt(r);t?(i.Ea.delete(2),await yh(i)):t||(i.Ea.add(2),await Zl(i),i.Ra.set("Unknown"))}function uo(r){return r.ma||(r.ma=function(i,s,l){const c=bt(i);return c.sa(),new cC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{Xo:gC.bind(null,r),t_:yC.bind(null,r),r_:_C.bind(null,r),H_:vC.bind(null,r)}),r.da.push(async t=>{t?(r.ma.B_(),Ym(r)?Km(r):r.Ra.set("Unknown")):(await r.ma.stop(),ZT(r))})),r.ma}function Xr(r){return r.fa||(r.fa=function(i,s,l){const c=bt(i);return c.sa(),new hC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:SC.bind(null,r),r_:wC.bind(null,r),ta:AC.bind(null,r),na:bC.bind(null,r)}),r.da.push(async t=>{t?(r.fa.B_(),await _h(r)):(await r.fa.stop(),r.Ta.length>0&&(at(Fs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t,i,s,l,c){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,s,l,c){const d=Date.now()+s,p=new Xm(t,i,d,l,c);return p.start(s),p}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(r,t){if(nr("AsyncQueue",`${t}: ${r}`),lo(r))return new lt(Z.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static emptySet(t){return new Ya(t.comparator)}constructor(t){this.comparator=t?(i,s)=>t(i,s)||ft.comparator(i.key,s.key):(i,s)=>ft.comparator(i.key,s.key),this.keyedMap=Al(),this.sortedSet=new ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,s)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Ya)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const s=new Ya;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.ga=new ue(ft.comparator)}track(t){const i=t.doc.key,s=this.ga.get(i);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(i,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(i,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(i):t.type===1&&s.type===2?this.ga=this.ga.insert(i,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):vt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal((i,s)=>{t.push(s)}),t}}class no{constructor(t,i,s,l,c,d,p,g,_){this.query=t,this.docs=i,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(t,i,s,l,c){const d=[];return i.forEach(p=>{d.push({type:0,doc:p})}),new no(t,i,Ya.emptySet(i),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,s=t.docChanges;if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==s[l].type||!i[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class CC{constructor(){this.queries=zv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,s){const l=bt(i),c=l.queries;l.queries=zv(),c.forEach((d,p)=>{for(const g of p.Sa)g.onError(s)})})(this,new lt(Z.ABORTED,"Firestore shutting down"))}}function zv(){return new Ks(r=>ET(r),hh)}async function DC(r,t){const i=bt(r);let s=3;const l=t.query;let c=i.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new IC,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const p=Wm(d,`Initialization of query '${ja(t.query)}' failed`);return void t.onError(p)}i.queries.set(l,c),c.Sa.push(t),t.va(i.onlineState),c.wa&&t.Fa(c.wa)&&Zm(i)}async function OC(r,t){const i=bt(r),s=t.query;let l=3;const c=i.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function NC(r,t){const i=bt(r);let s=!1;for(const l of t){const c=l.query,d=i.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&Zm(i)}function MC(r,t,i){const s=bt(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(i);s.queries.delete(t)}function Zm(r){r.Ca.forEach(t=>{t.next()})}var fm,Bv;(Bv=fm||(fm={})).Ma="default",Bv.Cache="cache";class xC{constructor(t,i,s){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new no(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const s=i!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=no.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t){this.key=t}}class n0{constructor(t){this.key=t}}class VC{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=kt(),this.mutatedKeys=kt(),this.eu=TT(t),this.tu=new Ya(this.eu)}get nu(){return this.Ya}ru(t,i){const s=i?i.iu:new Lv,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((S,C)=>{const D=l.get(S),q=fh(this.query,C)?C:null,W=!!D&&this.mutatedKeys.has(D.key),rt=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let J=!1;D&&q?D.data.isEqual(q.data)?W!==rt&&(s.track({type:3,doc:q}),J=!0):this.su(D,q)||(s.track({type:2,doc:q}),J=!0,(g&&this.eu(q,g)>0||_&&this.eu(q,_)<0)&&(p=!0)):!D&&q?(s.track({type:0,doc:q}),J=!0):D&&!q&&(s.track({type:1,doc:D}),J=!0,(g||_)&&(p=!0)),J&&(q?(d=d.add(q),c=rt?c.add(S):c.delete(S)):(d=d.delete(S),c=c.delete(S)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const S=this.query.limitType==="F"?d.last():d.first();d=d.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort((S,C)=>function(q,W){const rt=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Rt:J})}};return rt(q)-rt(W)}(S.type,C.type)||this.eu(S.doc,C.doc)),this.ou(s),l=l??!1;const p=i&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,_=g!==this.Za;return this.Za=g,d.length!==0||_?{snapshot:new no(this.query,t.tu,c,d,t.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(i=>this.Ya=this.Ya.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ya=this.Ya.delete(i)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=kt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const i=[];return t.forEach(s=>{this.Xa.has(s)||i.push(new n0(s))}),this.Xa.forEach(s=>{t.has(s)||i.push(new e0(s))}),i}cu(t){this.Ya=t.Qs,this.Xa=kt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return no.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jm="SyncEngine";class kC{constructor(t,i,s){this.query=t,this.targetId=i,this.view=s}}class PC{constructor(t){this.key=t,this.hu=!1}}class UC{constructor(t,i,s,l,c,d){this.localStore=t,this.remoteStore=i,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ks(p=>ET(p),hh),this.Iu=new Map,this.Eu=new Set,this.du=new ue(ft.comparator),this.Au=new Map,this.Ru=new jm,this.Vu={},this.mu=new Map,this.fu=eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LC(r,t,i=!0){const s=l0(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await i0(s,t,i,!0),l}async function zC(r,t){const i=l0(r);await i0(i,t,!0,!1)}async function i0(r,t,i,s){const l=await nC(r.localStore,gi(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,i);let p;return s&&(p=await BC(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&i&&XT(r.remoteStore,l),p}async function BC(r,t,i,s,l){r.pu=(C,D,q)=>async function(rt,J,Tt,yt){let ht=J.view.ru(Tt);ht.Cs&&(ht=await Mv(rt.localStore,J.query,!1).then(({documents:x})=>J.view.ru(x,ht)));const qt=yt&&yt.targetChanges.get(J.targetId),St=yt&&yt.targetMismatches.get(J.targetId)!=null,Ht=J.view.applyChanges(ht,rt.isPrimaryClient,qt,St);return Hv(rt,J.targetId,Ht.au),Ht.snapshot}(r,C,D,q);const c=await Mv(r.localStore,t,!0),d=new VC(t,c.Qs),p=d.ru(c.documents),g=Wl.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",l),_=d.applyChanges(p,r.isPrimaryClient,g);Hv(r,i,_.au);const S=new kC(t,i,d);return r.Tu.set(t,S),r.Iu.has(i)?r.Iu.get(i).push(t):r.Iu.set(i,[t]),_.snapshot}async function jC(r,t,i){const s=bt(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter(d=>!hh(d,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await cm(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),i&&Fm(s.remoteStore,l.targetId),dm(s,l.targetId)}).catch(oo)):(dm(s,l.targetId),await cm(s.localStore,l.targetId,!0))}async function HC(r,t){const i=bt(r),s=i.Tu.get(t),l=i.Iu.get(s.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),Fm(i.remoteStore,s.targetId))}async function qC(r,t,i){const s=WC(r);try{const l=await function(d,p){const g=bt(d),_=se.now(),S=p.reduce((q,W)=>q.add(W.key),kt());let C,D;return g.persistence.runTransaction("Locally write mutations","readwrite",q=>{let W=ir(),rt=kt();return g.Ns.getEntries(q,S).next(J=>{W=J,W.forEach((Tt,yt)=>{yt.isValidDocument()||(rt=rt.add(Tt))})}).next(()=>g.localDocuments.getOverlayedDocuments(q,W)).next(J=>{C=J;const Tt=[];for(const yt of p){const ht=eI(yt,C.get(yt.key).overlayedDocument);ht!=null&&Tt.push(new ts(yt.key,ht,dT(ht.value.mapValue),yi.exists(!0)))}return g.mutationQueue.addMutationBatch(q,_,Tt,p)}).next(J=>{D=J;const Tt=J.applyToLocalDocumentSet(C,rt);return g.documentOverlayCache.saveOverlays(q,J.batchId,Tt)})}).then(()=>({batchId:D.batchId,changes:AT(C)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),function(d,p,g){let _=d.Vu[d.currentUser.toKey()];_||(_=new ue(Vt)),_=_.insert(p,g),d.Vu[d.currentUser.toKey()]=_}(s,l.batchId,i),await Jl(s,l.changes),await _h(s.remoteStore)}catch(l){const c=Wm(l,"Failed to persist write");i.reject(c)}}async function r0(r,t){const i=bt(r);try{const s=await $I(i.localStore,t);t.targetChanges.forEach((l,c)=>{const d=i.Au.get(c);d&&(Yt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Yt(d.hu,14607):l.removedDocuments.size>0&&(Yt(d.hu,42227),d.hu=!1))}),await Jl(i,s,t)}catch(s){await oo(s)}}function jv(r,t,i){const s=bt(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const l=[];s.Tu.forEach((c,d)=>{const p=d.view.va(t);p.snapshot&&l.push(p.snapshot)}),function(d,p){const g=bt(d);g.onlineState=p;let _=!1;g.queries.forEach((S,C)=>{for(const D of C.Sa)D.va(p)&&(_=!0)}),_&&Zm(g)}(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function GC(r,t,i){const s=bt(r);s.sharedClientState.updateQueryState(t,"rejected",i);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new ue(ft.comparator);d=d.insert(c,en.newNoDocument(c,At.min()));const p=kt().add(c),g=new ph(At.min(),new Map,new ue(Vt),d,p);await r0(s,g),s.du=s.du.remove(c),s.Au.delete(t),$m(s)}else await cm(s.localStore,t,!1).then(()=>dm(s,t,i)).catch(oo)}async function FC(r,t){const i=bt(r),s=t.batch.batchId;try{const l=await JI(i.localStore,t);a0(i,s,null),s0(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await Jl(i,l)}catch(l){await oo(l)}}async function QC(r,t,i){const s=bt(r);try{const l=await function(d,p){const g=bt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let S;return g.mutationQueue.lookupMutationBatch(_,p).next(C=>(Yt(C!==null,37113),S=C.keys(),g.mutationQueue.removeMutationBatch(_,C))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,S,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S)).next(()=>g.localDocuments.getDocuments(_,S))})}(s.localStore,t);a0(s,t,i),s0(s,t),s.sharedClientState.updateMutationState(t,"rejected",i),await Jl(s,l)}catch(l){await oo(l)}}function s0(r,t){(r.mu.get(t)||[]).forEach(i=>{i.resolve()}),r.mu.delete(t)}function a0(r,t,i){const s=bt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(i?c.reject(i):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function dm(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),i&&r.Pu.yu(s,i);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach(s=>{r.Ru.containsKey(s)||o0(r,s)})}function o0(r,t){r.Eu.delete(t.path.canonicalString());const i=r.du.get(t);i!==null&&(Fm(r.remoteStore,i),r.du=r.du.remove(t),r.Au.delete(i),$m(r))}function Hv(r,t,i){for(const s of i)s instanceof e0?(r.Ru.addReference(s.key,t),KC(r,s)):s instanceof n0?(at(Jm,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||o0(r,s.key)):vt(19791,{wu:s})}function KC(r,t){const i=t.key,s=i.path.canonicalString();r.du.get(i)||r.Eu.has(s)||(at(Jm,"New document in limbo: "+i),r.Eu.add(s),$m(r))}function $m(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const i=new ft(re.fromString(t)),s=r.fu.next();r.Au.set(s,new PC(i)),r.du=r.du.insert(i,s),XT(r.remoteStore,new Lr(gi(Pm(i.path)),s,"TargetPurposeLimboResolution",oh.ce))}}async function Jl(r,t,i){const s=bt(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach((p,g)=>{d.push(s.pu(g,t,i).then(_=>{if((_||i)&&s.isPrimaryClient){const S=_?!_.fromCache:i?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(_){l.push(_);const S=qm.As(g.targetId,_);c.push(S)}}))}),await Promise.all(d),s.Pu.H_(l),await async function(g,_){const S=bt(g);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>Y.forEach(_,D=>Y.forEach(D.Es,q=>S.persistence.referenceDelegate.addReference(C,D.targetId,q)).next(()=>Y.forEach(D.ds,q=>S.persistence.referenceDelegate.removeReference(C,D.targetId,q)))))}catch(C){if(!lo(C))throw C;at(Gm,"Failed to update sequence numbers: "+C)}for(const C of _){const D=C.targetId;if(!C.fromCache){const q=S.Ms.get(D),W=q.snapshotVersion,rt=q.withLastLimboFreeSnapshotVersion(W);S.Ms=S.Ms.insert(D,rt)}}}(s.localStore,c))}async function YC(r,t){const i=bt(r);if(!i.currentUser.isEqual(t)){at(Jm,"User change. New user:",t.toKey());const s=await FT(i.localStore,t);i.currentUser=t,function(c,d){c.mu.forEach(p=>{p.forEach(g=>{g.reject(new lt(Z.CANCELLED,d))})}),c.mu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Jl(i,s.Ls)}}function XC(r,t){const i=bt(r),s=i.Au.get(t);if(s&&s.hu)return kt().add(s.key);{let l=kt();const c=i.Iu.get(t);if(!c)return l;for(const d of c){const p=i.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function l0(r){const t=bt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=r0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=XC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GC.bind(null,t),t.Pu.H_=NC.bind(null,t.eventManager),t.Pu.yu=MC.bind(null,t.eventManager),t}function WC(r){const t=bt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=FC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=QC.bind(null,t),t}class eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=gh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return ZI(this.persistence,new YI,t.initialUser,this.serializer)}Cu(t){return new GT(Hm.mi,this.serializer)}Du(t){return new rC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eh.provider={build:()=>new eh};class ZC extends eh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Yt(this.persistence.referenceDelegate instanceof $c,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new xI(s,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new GT(s=>$c.mi(s,i),this.serializer)}}class mm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>jv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=YC.bind(null,this.syncEngine),await RC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new CC}()}createDatastore(t){const i=gh(t.databaseInfo.databaseId),s=function(c){return new uC(c)}(t.databaseInfo);return function(c,d,p,g){return new dC(c,d,p,g)}(t.authCredentials,t.appCheckCredentials,s,i)}createRemoteStore(t){return function(s,l,c,d,p){return new pC(s,l,c,d,p)}(this.localStore,this.datastore,t.asyncQueue,i=>jv(this.syncEngine,i,0),function(){return kv.v()?new kv:new sC}())}createSyncEngine(t,i){return function(l,c,d,p,g,_,S){const C=new UC(l,c,d,p,g,_);return S&&(C.gu=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await async function(i){const s=bt(i);at(Fs,"RemoteStore shutting down."),s.Ea.add(5),await Zl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}mm.provider={build:()=>new mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):nr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="FirestoreClient";class $C{constructor(t,i,s,l,c){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=l,this.user=tn.UNAUTHENTICATED,this.clientId=Dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{at(Wr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(at(Wr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=Wm(i,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Bd(r,t){r.asyncQueue.verifyOperationInProgress(),at(Wr,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let s=i.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await FT(t.localStore,l),s=l)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function qv(r,t){r.asyncQueue.verifyOperationInProgress();const i=await t2(r);at(Wr,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener(s=>Uv(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>Uv(t.remoteStore,l)),r._onlineComponents=t}async function t2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){at(Wr,"Using user provided OfflineComponentProvider");try{await Bd(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;Za("Error using user provided cache. Falling back to memory cache: "+i),await Bd(r,new eh)}}else at(Wr,"Using default OfflineComponentProvider"),await Bd(r,new ZC(void 0));return r._offlineComponents}async function u0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(at(Wr,"Using user provided OnlineComponentProvider"),await qv(r,r._uninitializedComponentsProvider._online)):(at(Wr,"Using default OnlineComponentProvider"),await qv(r,new mm))),r._onlineComponents}function e2(r){return u0(r).then(t=>t.syncEngine)}async function Gv(r){const t=await u0(r),i=t.eventManager;return i.onListen=LC.bind(null,t.syncEngine),i.onUnlisten=jC.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=zC.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=HC.bind(null,t.syncEngine),i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="firestore.googleapis.com",Qv=!0;class Kv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new lt(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=h0,this.ssl=Qv}else this.host=t.host,this.ssl=t.ssl??Qv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=qT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<NI)throw new lt(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}mR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c0(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new lt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class vh{constructor(t,i,s,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new lt(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new rR;switch(s.type){case"firstParty":return new lR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new lt(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const s=Fv.get(i);s&&(at("ComponentProvider","Removing Datastore"),Fv.delete(i),s.terminate())}(this),Promise.resolve()}}function n2(r,t,i,s={}){r=qr(r,vh);const l=io(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${t}:${i}`;l&&(aE(`https://${p}`),oE("Firestore",!0)),c.host!==h0&&c.host!==p&&Za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!Bs(g,d)&&(r._setSettings(g),s.mockUserToken)){let _,S;if(typeof s.mockUserToken=="string")_=s.mockUserToken,S=tn.MOCK_USER;else{_=mA(s.mockUserToken,r._app?.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new lt(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new tn(C)}r._authCredentials=new sR(new eT(_,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Eh(this.firestore,t,this._query)}}class Ie{constructor(t,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ie(this.firestore,t,this._key)}toJSON(){return{type:Ie._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,s){if(Yl(i,Ie._jsonSchema))return new Ie(t,s||null,new ft(re.fromString(i.referencePath)))}}Ie._jsonSchemaVersion="firestore/documentReference/1.0",Ie._jsonSchema={type:Re("string",Ie._jsonSchemaVersion),referencePath:Re("string")};class Gr extends Eh{constructor(t,i,s){super(t,i,Pm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ie(this.firestore,null,new ft(t))}withConverter(t){return new Gr(this.firestore,t,this._path)}}function i2(r,t,...i){if(r=He(r),nT("collection","path",t),r instanceof vh){const s=re.fromString(t,...i);return av(s),new Gr(r,null,s)}{if(!(r instanceof Ie||r instanceof Gr))throw new lt(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(re.fromString(t,...i));return av(s),new Gr(r.firestore,null,s)}}function Yv(r,t,...i){if(r=He(r),arguments.length===1&&(t=Dm.newId()),nT("doc","path",t),r instanceof vh){const s=re.fromString(t,...i);return sv(s),new Ie(r,null,new ft(s))}{if(!(r instanceof Ie||r instanceof Gr))throw new lt(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(re.fromString(t,...i));return sv(s),new Ie(r.firestore,r instanceof Gr?r.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="AsyncQueue";class Wv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KT(this,"async_queue_retry"),this._c=()=>{const s=zd();s&&at(Xv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const i=zd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=zd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const i=new Ls;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!lo(t))throw t;at(Xv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const i=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",Zv(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=i,i}enqueueAfterDelay(t,i,s){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=Xm.createAndSchedule(this,t,i,s,c=>this.hc(c));return this.tc.push(l),l}uc(){this.nc&&vt(47125,{Pc:Zv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((i,s)=>i.targetTimeMs-s.targetTimeMs);for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function Zv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(r){return function(i,s){if(typeof i!="object"||i===null)return!1;const l=i;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1}(r,["next","error","complete"])}class jl extends vh{constructor(t,i,s,l){super(t,i,s,l),this.type="firestore",this._queue=new Wv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Wv(t),this._firestoreClient=void 0,await t}}}function r2(r,t){const i=typeof r=="object"?r:hE(),s=typeof r=="string"?r:Qc,l=vm(i,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=fA("firestore");c&&n2(l,...c)}return l}function f0(r){if(r._terminated)throw new lt(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||s2(r),r._firestoreClient}function s2(r){const t=r._freezeSettings(),i=function(l,c,d,p){return new wR(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,c0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new $C(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Bn(We.fromBase64String(t))}catch(i){throw new lt(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Bn(We.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Yl(t,Bn._jsonSchema))return Bn.fromBase64String(t.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:Re("string",Bn._jsonSchemaVersion),bytes:Re("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new lt(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new lt(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new lt(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Vt(this._lat,t._lat)||Vt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vi._jsonSchemaVersion}}static fromJSON(t){if(Yl(t,vi._jsonSchema))return new vi(t.latitude,t.longitude)}}vi._jsonSchemaVersion="firestore/geoPoint/1.0",vi._jsonSchema={type:Re("string",vi._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Yl(t,Ei._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(i=>typeof i=="number"))return new Ei(t.vectorValues);throw new lt(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:Re("string",Ei._jsonSchemaVersion),vectorValues:Re("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=/^__.*__$/;class o2{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return this.fieldMask!==null?new ts(t,this.data,this.fieldMask,i,this.fieldTransforms):new Xl(t,this.data,i,this.fieldTransforms)}}class d0{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return new ts(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function m0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ac:r})}}class ep{constructor(t,i,s,l,c,d){this.settings=t,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ep({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.gc(t),s}yc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return nh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(m0(this.Ac)&&a2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class l2{constructor(t,i,s){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=s||gh(t)}Cc(t,i,s,l=!1){return new ep({Ac:t,methodName:i,Dc:s,path:Xe.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function p0(r){const t=r._freezeSettings(),i=gh(r._databaseId);return new l2(r._databaseId,!!t.ignoreUndefinedProperties,i)}function u2(r,t,i,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,i,l);np("Data must be an object, but it was:",d,s);const p=g0(s,d);let g,_;if(c.merge)g=new wn(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const S=[];for(const C of c.mergeFields){const D=pm(t,C,i);if(!d.contains(D))throw new lt(Z.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);_0(S,D)||S.push(D)}g=new wn(S),_=d.fieldTransforms.filter(C=>g.covers(C.field))}else g=null,_=d.fieldTransforms;return new o2(new dn(p),g,_)}class Sh extends tp{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Sh}}function c2(r,t,i,s){const l=r.Cc(1,t,i);np("Data must be an object, but it was:",l,s);const c=[],d=dn.empty();$r(s,(g,_)=>{const S=ip(t,g,i);_=He(_);const C=l.yc(S);if(_ instanceof Sh)c.push(S);else{const D=Ah(_,C);D!=null&&(c.push(S),d.set(S,D))}});const p=new wn(c);return new d0(d,p,l.fieldTransforms)}function h2(r,t,i,s,l,c){const d=r.Cc(1,t,i),p=[pm(t,s,i)],g=[l];if(c.length%2!=0)throw new lt(Z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)p.push(pm(t,c[D])),g.push(c[D+1]);const _=[],S=dn.empty();for(let D=p.length-1;D>=0;--D)if(!_0(_,p[D])){const q=p[D];let W=g[D];W=He(W);const rt=d.yc(q);if(W instanceof Sh)_.push(q);else{const J=Ah(W,rt);J!=null&&(_.push(q),S.set(q,J))}}const C=new wn(_);return new d0(S,C,d.fieldTransforms)}function Ah(r,t){if(y0(r=He(r)))return np("Unsupported field value:",t,r),g0(r,t);if(r instanceof tp)return function(s,l){if(!m0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,l){const c=[];let d=0;for(const p of s){let g=Ah(p,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}}(r,t)}return function(s,l){if((s=He(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return XR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=se.fromDate(s);return{timestampValue:Jc(l.serializer,c)}}if(s instanceof se){const c=new se(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jc(l.serializer,c)}}if(s instanceof vi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bn)return{bytesValue:PT(l.serializer,s._byteString)};if(s instanceof Ie){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Bm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Ei)return function(d,p){return{mapValue:{fields:{[hT]:{stringValue:fT},[Kc]:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw p.Sc("VectorValues must only contain numeric values.");return Um(p.serializer,_)})}}}}}}(s,l);throw l.Sc(`Unsupported field value: ${Om(s)}`)}(r,t)}function g0(r,t){const i={};return sT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$r(r,(s,l)=>{const c=Ah(l,t.mc(s));c!=null&&(i[s]=c)}),{mapValue:{fields:i}}}function y0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof se||r instanceof vi||r instanceof Bn||r instanceof Ie||r instanceof tp||r instanceof Ei)}function np(r,t,i){if(!y0(i)||!iT(i)){const s=Om(i);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function pm(r,t,i){if((t=He(t))instanceof Th)return t._internalPath;if(typeof t=="string")return ip(r,t);throw nh("Field path arguments must be of type string or ",r,!1,void 0,i)}const f2=new RegExp("[~\\*/\\[\\]]");function ip(r,t,i){if(t.search(f2)>=0)throw nh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Th(...t.split("."))._internalPath}catch{throw nh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function nh(r,t,i,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${t}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new lt(Z.INVALID_ARGUMENT,p+r+g)}function _0(r,t){return r.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,i,s,l,c){this._firestore=t,this._userDataWriter=i,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new d2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(E0("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class d2 extends v0{data(){return super.data()}}function E0(r,t){return typeof t=="string"?ip(r,t):t instanceof Th?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new lt(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p2{convertValue(t,i="none"){switch(Yr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Kr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw vt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const s={};return $r(t,(l,c)=>{s[l]=this.convertValue(c,i)}),s}convertVectorValue(t){const i=t.fields?.[Kc].arrayValue?.values?.map(s=>_e(s.doubleValue));return new Ei(i)}convertGeoPoint(t){return new vi(_e(t.latitude),_e(t.longitude))}convertArray(t,i){return(t.values||[]).map(s=>this.convertValue(s,i))}convertServerTimestamp(t,i){switch(i){case"previous":const s=uh(t);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(Pl(t));default:return null}}convertTimestamp(t){const i=Qr(t);return new se(i.seconds,i.nanos)}convertDocumentKey(t,i){const s=re.fromString(t);Yt(HT(s),9688,{name:t});const l=new Ul(s.get(1),s.get(3)),c=new ft(s.popFirst(5));return l.isEqual(i)||nr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(r,t,i){let s;return s=r?i&&(i.merge||i.mergeFields)?r.toFirestore(t,i):r.toFirestore(t):t,s}class wl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zs extends v0{constructor(t,i,s,l,c,d){super(t,i,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const s=this._document.data.field(E0("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=zs._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:Re("string",zs._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};class Pc extends zs{data(t={}){return super.data(t)}}class Xa{constructor(t,i,s,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new wl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(s=>{t.call(i,new Pc(this._firestore,this._userDataWriter,s.key,s,new wl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new lt(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(p=>{const g=new Pc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new wl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(p=>c||p.type!==3).map(p=>{const g=new Pc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new wl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,S=-1;return p.type!==0&&(_=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),S=d.indexOf(p.doc.key)),{type:y2(p.type),doc:g,oldIndex:_,newIndex:S}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Xa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],l=[];return this.docs.forEach(c=>{c._document!==null&&(i.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function y2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:r})}}Xa._jsonSchemaVersion="firestore/querySnapshot/1.0",Xa._jsonSchema={type:Re("string",Xa._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};class T0 extends p2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Ie(this.firestore,null,i)}}function _2(r,t,i){r=qr(r,Ie);const s=qr(r.firestore,jl),l=g2(r.converter,t,i);return S0(s,[u2(p0(s),"setDoc",r._key,l,r.converter!==null,i).toMutation(r._key,yi.none())])}function v2(r,t,i,...s){r=qr(r,Ie);const l=qr(r.firestore,jl),c=p0(l);let d;return d=typeof(t=He(t))=="string"||t instanceof Th?h2(c,"updateDoc",r._key,t,i,s):c2(c,"updateDoc",r._key,t),S0(l,[d.toMutation(r._key,yi.exists(!0))])}function E2(r,...t){r=He(r);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||Jv(t[s])||(i=t[s++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Jv(t[s])){const g=t[s];t[s]=g.next?.bind(g),t[s+1]=g.error?.bind(g),t[s+2]=g.complete?.bind(g)}let c,d,p;if(r instanceof Ie)d=qr(r.firestore,jl),p=Pm(r._key.path),c={next:g=>{t[s]&&t[s](T2(d,r,g))},error:t[s+1],complete:t[s+2]};else{const g=qr(r,Eh);d=qr(g.firestore,jl),p=g._query;const _=new T0(d);c={next:S=>{t[s]&&t[s](new Xa(d,_,g,S))},error:t[s+1],complete:t[s+2]},m2(r._query)}return function(_,S,C,D){const q=new JC(D),W=new xC(S,q,C);return _.asyncQueue.enqueueAndForget(async()=>DC(await Gv(_),W)),()=>{q.Nu(),_.asyncQueue.enqueueAndForget(async()=>OC(await Gv(_),W))}}(f0(d),p,l,c)}function S0(r,t){return function(s,l){const c=new Ls;return s.asyncQueue.enqueueAndForget(async()=>qC(await e2(s),l,c)),c.promise}(f0(r),t)}function T2(r,t,i){const s=i.docs.get(t._key),l=new T0(r);return new zs(r,l,t._key,s,new wl(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(l){ao=l})(ro),Wa(new js("firestore",(s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new jl(new aR(s.getProvider("auth-internal")),new uR(d,s.getProvider("app-check-internal")),function(_,S){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new lt(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(_.options.projectId,S)}(d,l),d);return c={useFetchStreams:i,...c},p._setSettings(c),p},"PUBLIC").setMultipleInstances(!0)),jr(ev,nv,t),jr(ev,nv,"esm2020")})();const S2={apiKey:"AIzaSyBtvX1Oc8oxB-g93NsfydR5u8N0ua5V1mM",authDomain:"spirituality-app-57548.firebaseapp.com",projectId:"spirituality-app-57548",storageBucket:"spirituality-app-57548.firebasestorage.app",messagingSenderId:"548623459724",appId:"1:548623459724:web:17ac59ca3fd576021e22a9",measurementId:"G-ZGFHX04WEH"},A0=cE(S2),Rc=nR(A0),jd=r2(A0),A2={peaceful:"https://www.youtube.com/embed/BFTbRCDLWmw?autoplay=1&controls=0&loop=1&playlist=BFTbRCDLWmw&enablejsapi=1",grateful:"https://www.youtube.com/embed/-EMn-ePp7Uw?autoplay=1&controls=0&loop=1&playlist=-EMn-ePp7Uw&enablejsapi=1",anxious:"https://www.youtube.com/embed/tck7E11SdR8?autoplay=1&controls=0&loop=1&playlist=tck7E11SdR8&enablejsapi=1",inspired:"https://www.youtube.com/embed/v4WgU-LAp-0?autoplay=1&controls=0&loop=1&playlist=v4WgU-LAp-0&enablejsapi=1"},b2={DeepForestDawn:"https://www.youtube.com/embed/FxAgAyZYXJ8?autoplay=1&loop=1&playlist=FxAgAyZYXJ8&controls=0",RiverEdge:"https://www.youtube.com/embed/g_Haa84cpuM?autoplay=1&loop=1&playlist=g_Haa84cpuM&controls=0",EmeraldThunder:"https://www.youtube.com/embed/59fHDWDhzkY?autoplay=1&loop=1&playlist=59fHDWDhzkY&controls=0",CampfireNight:"https://www.youtube.com/embed/E77jmtut1Zc?autoplay=1&loop=1&playlist=E77jmtut1Zc&controls=0",MorningSerenade:"https://www.youtube.com/embed/rV_ERKtNyNA?autoplay=1&loop=1&playlist=rV_ERKtNyNA&controls=0"},Hd=[{title:"Guided Meditation (Gratitude)",url:"https://www.youtube.com/embed/OCorElLKFQE?autoplay=1"},{title:"Bhastrika Pranayama",url:"https://www.youtube.com/embed/2B5RM0dphyA?autoplay=1"},{title:"Anulom Vilom Breathing",url:"https://www.youtube.com/embed/WNKwfubq6I8?autoplay=1"},{title:"Vipassana Meditation",url:"https://www.youtube.com/embed/BSku2WZsYLo?autoplay=1"},{title:"Om Chanting",url:"https://www.youtube.com/embed/aTTYcn8VoVc?autoplay=1"}],$v={Hinduism:[{text:"Be steadfast in yoga, O Arjuna...",source:"Bhagavad Gita 2.47"},{text:"You are what your deep, driving desire is...",source:"Upanishads"},{text:"Truth alone triumphs.",source:"Mundaka Upanishad 3.1.6"},{text:"A person is made by belief. As he believes, so he is.",source:"Bhagavad Gita 17.3"},{text:"Do your duty without attachment to the result.",source:"Bhagavad Gita 2.47"},{text:"The soul is neither born, and nor does it die.",source:"Bhagavad Gita 2.20"},{text:"Those who live in harmony with the Self, see the Self in all beings.",source:"Isha Upanishad"},{text:"There is nothing lost or wasted in this life. Every action counts.",source:"Bhagavad Gita 2.40"},{text:"From purity arises wisdom.",source:"Bhagavad Gita 14.17"},{text:"When meditation is mastered, the mind is unwavering like the flame of a lamp in a windless place.",source:"Bhagavad Gita 6.19"},{text:"Delusion arises from attachment; and from delusion, anger is born.",source:"Bhagavad Gita 2.63"}],Christianity:[{text:"Peace I leave with you; my peace I give you.",source:"John 14:27"},{text:"Give thanks in all circumstances...",source:"1 Thessalonians 5:18"},{text:"Love your neighbor as yourself.",source:"Matthew 22:39"},{text:"I can do all things through Christ who strengthens me.",source:"Philippians 4:13"},{text:"God is our refuge and strength, an ever-present help in trouble.",source:"Psalm 46:1"},{text:"Do not be anxious about anything...",source:"Philippians 4:6"},{text:"For with God nothing shall be impossible.",source:"Luke 1:37"},{text:"Let all you do be done in love.",source:"1 Corinthians 16:14"},{text:"Ask and it will be given to you...",source:"Matthew 7:7"},{text:"Be still and know that I am God.",source:"Psalm 46:10"},{text:"The Lord is my shepherd; I shall not want.",source:"Psalm 23:1"}],Islam:[{text:"Indeed, in the remembrance of Allah do hearts find rest.",source:"Qur’an 13:28"},{text:"Verily, with hardship comes ease.",source:"Qur’an 94:6"},{text:"So remember Me; I will remember you.",source:"Qur’an 2:152"},{text:"And He found you lost and guided [you].",source:"Qur’an 93:7"},{text:"Allah does not burden a soul beyond that it can bear.",source:"Qur’an 2:286"},{text:"And be patient. Surely, Allah is with the patient.",source:"Qur’an 8:46"},{text:"Say, ‘My Lord has commanded justice.’",source:"Qur’an 7:29"},{text:"Call upon Me; I will respond to you.",source:"Qur’an 40:60"},{text:"And whoever puts their trust in Allah – then He will suffice him.",source:"Qur’an 65:3"},{text:"Indeed, prayer prohibits immorality and wrongdoing.",source:"Qur’an 29:45"},{text:"Guide us to the straight path.",source:"Surah Al-Fatiha"}],Buddhism:[{text:"Peace comes from within. Do not seek it without.",source:"Buddha"},{text:"All that we are is the result of what we have thought.",source:"Buddha"},{text:"Three things cannot be long hidden: the sun, the moon, and the truth.",source:"Buddha"},{text:"You, yourself, as much as anybody in the entire universe, deserve your love and affection.",source:"Buddha"},{text:"Let go of attachments and find freedom.",source:"Buddha"},{text:"Hatred does not cease by hatred, but only by love.",source:"Dhammapada"},{text:"The mind is everything. What you think you become.",source:"Buddha"},{text:"It is better to conquer yourself than to win a thousand battles.",source:"Buddha"},{text:"Health is the greatest gift, contentment the greatest wealth.",source:"Buddha"},{text:"Work out your own salvation. Do not depend on others.",source:"Buddha"},{text:"Thousands of candles can be lit from a single candle.",source:"Buddha"}],Sikhism:[{text:"He Himself bestows His gifts, and blesses us with peace.",source:"Guru Granth Sahib"},{text:"Speak only that which will bring you honor.",source:"Guru Granth Sahib"},{text:"Even kings and emperors, with heaps of wealth and vast dominion, cannot compare with an ant filled with the love of God.",source:"Guru Nanak"},{text:"Where there is forgiveness, there is God Himself.",source:"Guru Granth Sahib"},{text:"One who eliminates duality from within shall attain the Lord.",source:"Guru Granth Sahib"},{text:"Those who have loved are those that have found God.",source:"Guru Granth Sahib"},{text:"Why do you go looking for God? He is within you.",source:"Guru Granth Sahib"},{text:"Make compassion the cotton, contentment the thread...",source:"Guru Nanak"},{text:"The Lord Himself is the farmer, and the Lord Himself is the field.",source:"Guru Granth Sahib"},{text:"With your hands and feet, do all your work, but let your mind be at rest in the Lord.",source:"Guru Granth Sahib"},{text:"Whatever pleases the Lord is good. This alone is my opinion.",source:"Guru Granth Sahib"}],Jainism:[{text:"A man is seated on top of a tree in the midst of a burning forest...",source:"Mahavira"},{text:"The soul comes alone and goes alone, no one accompanies it.",source:"Mahavira"},{text:"Fight with yourself, why fight with external foes?",source:"Mahavira"},{text:"All souls are alike; none is superior to another.",source:"Mahavira"},{text:"Every soul is independent. None depends on another.",source:"Mahavira"},{text:"Don’t accumulate if you do not need. The more you know, the less you need.",source:"Mahavira"},{text:"Anger begets more anger, and forgiveness and love lead to more forgiveness and love.",source:"Mahavira"},{text:"Live and allow others to live; hurt no one; life is dear to all living beings.",source:"Mahavira"},{text:"Non-violence is the highest religion.",source:"Mahavira"},{text:"The one who neglects or disregards the existence of earth, water, fire, air, and vegetation disregards their own existence.",source:"Mahavira"},{text:"Silence and self-control are non-violence.",source:"Mahavira"}],"General Wisdom":[{text:"Gratitude turns what we have into enough.",source:"Aesop"},{text:"This too shall pass.",source:"Sufi Wisdom"},{text:"The journey of a thousand miles begins with a single step.",source:"Lao Tzu"},{text:"Do not dwell in the past, do not dream of the future, concentrate the mind on the present moment.",source:"Unknown"},{text:"Life is 10% what happens to you and 90% how you react to it.",source:"Charles R. Swindoll"},{text:"What lies behind us and what lies before us are tiny matters compared to what lies within us.",source:"Ralph Waldo Emerson"},{text:"Kindness is a language which the deaf can hear and the blind can see.",source:"Mark Twain"},{text:"Happiness is not something ready-made. It comes from your own actions.",source:"Dalai Lama"},{text:"The only way to do great work is to love what you do.",source:"Steve Jobs"},{text:"Success is not the key to happiness. Happiness is the key to success.",source:"Albert Schweitzer"},{text:"Everything you can imagine is real.",source:"Pablo Picasso"}]},w2={Hinduism:[{title:"Maha Mrityunjay Mantra",link:"https://youtu.be/OV9LXGOXjgs?si=rkkZ25UysRN3cNzm"},{title:"Shiva Panchakshar Stotra",link:"https://youtu.be/jlcZNOt-pcc?si=X7TkdkW5EOUTo0rn"},{title:"Om Chanting (108 times)",link:"https://youtu.be/ijfLsKg8jFY?si=24U7Bj5c5hdMQsPL"},{title:"Durga Chalisa",link:"https://youtu.be/AXvmt88JLWg?si=fwGuak4wRCVgWg4Y"},{title:"Hanuman Chalisa",link:"https://youtu.be/AETFvQonfV8?si=Z9GvFGfh7fMhZr1A"},{title:"Hey Ram Hey Ram",link:"https://youtu.be/Hy55Ij78amM?si=-vNx7W7W8paNERgI"}],Christianity:[{title:"The Lord is my Shepherd",link:"https://youtu.be/uAaMPxDO2Wc?si=U5neDY5_5rwBaYgR"},{title:"Kyrie Eleison",link:"https://youtu.be/b8WdyJHLUgg?si=XZeuVLhaHIwI7vRy"},{title:"Glory to God",link:"https://youtu.be/R7C4DvKOgfE?si=z9bf_XunGASV2enN"},{title:"Lord Jesus Christ, Son of God",link:"https://youtu.be/X5NDlZAKdJc?si=4VAi1-GIiVCouKzu"},{title:"Hallelujah – Alexandra Burke",link:"https://youtu.be/0COdq1IT5Hc?si=aFf-_mPKktyy23iM"},{title:"Ave Maria",link:"https://youtu.be/sWe95K5BEoM?si=PAdvL-XYIUpzhWB6"},{title:"10,000 Reasons – Matt Redman",link:"https://youtu.be/XtwIT8JjddM?si=4tZXwX26kneymkkl"}],Islam:[{title:"Surah Al-Fatiha",link:"https://youtu.be/ZYaZ6Odbx_Y?si=drWO0VdmJvGPgLJ8"},{title:"3 Quls",link:"https://youtu.be/YN5qeo4QS_M?si=KN5nxNj6PN6cvocA"},{title:"Surah Yaseen",link:"https://youtu.be/yMg4DXHQooc?si=DYRos2z_8cAUV-HY"},{title:"Subhanallah, Alhamdulillah, Allahu Akbar",link:"https://youtu.be/GkHxGzuFYHo?si=VQGh6zDkxtre_O0E"},{title:"Azan – Islamic Call to Prayer",link:"https://youtu.be/zBNUdeWw-wE?si=_xrXD5CtBI03mRT0"},{title:"Astaghfirullah",link:"https://youtu.be/LxjlvRUixgE?si=s_queQ4skpquIIzd"}],Sikhism:[{title:"Ek Onkar – Asees Kaur",link:"https://youtu.be/FWRTl6KSHPg?si=tm-itFioXqfbdB5y"},{title:"Japji Sahib",link:"https://youtu.be/SC1gipmk214?si=Y0Ibwy0HvAKWWLr7"},{title:"Tera Kita Jaato Naahi",link:"https://music.youtube.com/watch?v=NRtkmHLKjgQ&si=FKzI1ffBqPvQIp1Z"},{title:"Kirtan Sukhmani Sahib Path",link:"https://youtu.be/lBxtI0ifpoQ?si=qWuzcfRAbT-IKC5m"},{title:"Waheguru Simran",link:"https://youtu.be/l1eKMlrf6xc?si=IbEk9jVtOinUBJDl"},{title:"Bhai Nirmal Singh Ji – Best Shabads",link:"https://youtu.be/VAQ4SoD9mNQ?si=JadznkNa-YO174pS"}],Jainism:[{title:"Namokar Mantra",link:"https://youtu.be/WqD-nyNdW3o?si=_WGz9X--DKlYoARa"},{title:"Logass Path",link:"https://youtu.be/BVA801hmAAs?si=jeGBnsB8-9wslTMz"},{title:"Khamemi Savve Jiva",link:"https://youtu.be/LJybyRBgVpw?si=cp95yhsdk1EuZ3Pm"},{title:"Mangal Divo",link:"https://youtu.be/J74Vgn_vxvg?si=jgfrKIdnLxVvpmZb"},{title:"Navkar Mantra 108 Times",link:"https://youtu.be/u_uI7krdzv0?si=jgyJWJgroLQZKk1S"},{title:"Namokaar Meditation on Chakras",link:"https://youtu.be/3ujsfUymoSw?si=3mlmQZzhFVIRBGVs"}],Buddhism:[{title:"Om Mani Padme Hum",link:"https://youtu.be/mvBLSJWk6HE?si=Wl2XRywTiFjvCHGJ"},{title:"Buddham Saranam Gacchami",link:"https://youtu.be/moT7-zQ4WRE?si=jU-3GccDmFAqR0Z3"},{title:"Metta Bhavana",link:"https://youtu.be/VAaSoFvB6XQ?si=QAJra1sujUYs4H2N"},{title:"OM SHANTI OM – Tibetan Bowls",link:"https://youtu.be/SkJBYIpjZz4?si=w2LAozrPu7XNBhje"},{title:"Heart Sutra",link:"https://youtu.be/GgfmLuUGETc?si=uOBLsrngh8_DMPgb"}],"General Wisdom":[{title:"Weightless – Marconi Union",link:"https://youtu.be/qYnA9wWFHLI?si=-o_bYBe0SIvuNw03"},{title:"Don't Worry Be Happy",link:"https://youtu.be/d-diB65scQU?si=QjA-RtOyXV146bVg"},{title:"Here Comes The Sun – Beatles",link:"https://youtu.be/KQetemT1sWc?si=Mn6sS8ZG-4s6Zw53"},{title:"Feeling Good – Michael Bublé",link:"https://youtu.be/Edwsf-8F3sI?si=B5ZD3AjobWWnO5b6"},{title:"Happy – Pharrell Williams",link:"https://youtu.be/ZbZSe6N_BXs?si=lUG4ZidDwivKJeUg"},{title:"Can't Stop The Feeling!",link:"https://youtu.be/ru0K8uYEZWw?si=w-u2wql9Rctkgts9"},{title:"Shut Up and Dance",link:"https://youtu.be/6JCLY0Rlx6Q?si=JqUMp5vkNgeFx5_p"}]},qd=["How was your day?","What are some positive things that happened today?","What did you learn about yourself today?","How did you show kindness today?","What are you grateful for today?"],ye={card:{background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(5px)",padding:"1.5rem",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",marginBottom:"1.5rem"},leftPane:{width:"180px",height:"100vh",background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",padding:"1.5rem",display:"flex",flexDirection:"column",borderRight:"1px solid rgba(255, 255, 255, 0.1)"},navButton:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem",margin:"0.25rem 0",borderRadius:"8px",textAlign:"left",fontSize:"0.9rem",cursor:"pointer",transition:"background 0.3s",width:"100%"},navSelect:{background:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem",margin:"0.25rem 0",borderRadius:"8px",fontSize:"0.9rem",cursor:"pointer",width:"100%",appearance:"none"},activeNavButton:{background:"rgba(255, 255, 255, 0.25)"},mainContent:{flex:1,height:"100vh",overflowY:"auto",padding:"2rem",position:"relative"},select:{padding:"8px",marginLeft:"10px",background:"#333",color:"white",border:"1px solid #555",borderRadius:"6px"}};function R2(){const[r,t]=jt.useState(null),[i,s]=jt.useState(!0),[l,c]=jt.useState(""),[d,p]=jt.useState(""),[g,_]=jt.useState(!0),[S,C]=jt.useState("home"),[D,q]=jt.useState("peaceful"),[W,rt]=jt.useState(()=>localStorage.getItem("faith")||"General Wisdom"),[J,Tt]=jt.useState(0),[yt,ht]=jt.useState(!0),[qt,St]=jt.useState(0),[Ht,x]=jt.useState(!0),[A,w]=jt.useState(""),[N,M]=jt.useState(!1),[V,R]=jt.useState(!1),[ce,ie]=jt.useState(!1),[H,nt]=jt.useState(""),[st,Pt]=jt.useState(()=>new Date().toISOString().slice(0,10)),[I,X]=jt.useState({}),[it,$]=jt.useState(""),[ct,Rt]=jt.useState(!1),[mt,ve]=jt.useState(0),[Ft,mn]=jt.useState({}),pn=jt.useRef(null),gn=$v[W]||[],Ai=w2[W]||[],Xn=gn[J]||{},Rn=N||ce||ct;jt.useEffect(()=>{const tt=Gb(Rc,pt=>{t(pt),s(!1)});return()=>tt()},[]),jt.useEffect(()=>{if(!r){X({});return}const tt=i2(jd,"users",r.uid,"journals"),pt=E2(tt,Ee=>{const Mt={};Ee.forEach(wt=>{Mt[wt.id]=wt.data()}),X(Mt)});return()=>pt()},[r]),jt.useEffect(()=>{const tt=I[st]?.text||"";nt(tt)},[st,I]),jt.useEffect(()=>{const tt=pn.current;if(tt&&tt.contentWindow){const pt=Rn?"pauseVideo":"playVideo";tt.contentWindow.postMessage(JSON.stringify({event:"command",func:pt,args:[]}),"*")}},[Rn]),jt.useEffect(()=>{const tt=setInterval(()=>{x(!1),setTimeout(()=>{St(pt=>(pt+1)%qd.length),x(!0)},500)},15e3);return()=>clearInterval(tt)},[]),jt.useEffect(()=>{localStorage.setItem("faith",W),Tt(0)},[W]),jt.useEffect(()=>{const tt=setInterval(()=>{ht(!1),setTimeout(()=>{Tt(pt=>(pt+1)%(gn.length||1)),ht(!0)},500)},15e3);return()=>clearInterval(tt)},[gn]),jt.useEffect(()=>{if(r&&ce){const tt=async()=>{const Ee=Yv(jd,"users",r.uid,"journals",st);try{await _2(Ee,{text:H},{merge:!0})}catch(Mt){console.error("Failed to save journal:",Mt),alert("Error: Could not save journal to the cloud.")}},pt=setTimeout(()=>{tt()},1e3);return()=>clearTimeout(pt)}},[H,st,r,ce]),jt.useEffect(()=>{const tt=()=>{const pt=pn.current;pt&&pt.contentWindow&&pt.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo",args:[]}),"*"),window.removeEventListener("click",tt)};return window.addEventListener("click",tt),()=>window.removeEventListener("click",tt)},[]);const es=async()=>{try{await Bb(Rc,l,d)}catch(tt){alert(`Signup Failed: ${tt.message}`)}},Xs=async()=>{try{await jb(Rc,l,d)}catch(tt){alert(`Login Failed: ${tt.message}`)}},ln=()=>{Fb(Rc)},co=async()=>{if(!H){alert("Please write a journal entry before getting a reflection.");return}const tt="https://calm-heart-21e5.dedipyapaul1999.workers.dev";try{const pt=await fetch(tt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:H})});if(!pt.ok)throw new Error(`AI worker failed: ${pt.statusText}`);const Mt=(await pt.json()).response;if(!Mt){alert("The AI returned an empty reflection. Please try again.");return}const wt=Yv(jd,"users",r.uid,"journals",st);await v2(wt,{reflection:Mt})}catch(pt){console.error("Failed to get AI reflection:",pt),alert("Sorry, the AI Reflection Coach is unavailable right now.")}},ns=async()=>{if(!A){alert("Please enter an email.");return}try{const tt="https://docs.google.com/forms/d/e/1FAIpQLSeJf553BN1uTjOheRjr4JIpjcWwV5jma2FqEpzSzqF_W4gt1w/formResponse",pt="entry.1823453264",Ee="entry.48844451";await fetch(tt,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({[pt]:A,[Ee]:W})}),alert("Subscribed successfully!"),w("")}catch(tt){console.error("Subscription failed",tt),alert("Subscription failed. Please try again later.")}},bi=()=>Q.jsxs("div",{style:ye.card,children:[Q.jsx("h2",{children:"Get Daily Quotes"}),Q.jsx("p",{children:"Subscribe to receive a daily quote based on your selected faith."}),Q.jsxs("div",{style:{display:"flex",marginTop:"1rem"},children:[Q.jsx("input",{type:"email",placeholder:"Enter your email",value:A,onChange:tt=>w(tt.target.value),style:{padding:"10px",width:"70%",borderRadius:"6px 0 0 6px",border:"1px solid #555",background:"#333",color:"white"}}),Q.jsx("button",{onClick:ns,style:{padding:"10px 20px",borderRadius:"0 6px 6px 0",border:"none",background:"#f5f5f5",color:"#111",cursor:"pointer",fontWeight:"bold"},children:" Subscribe "})]})]}),wi=()=>Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{style:{...ye.card,textAlign:"center"},children:[Q.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"1rem",marginTop:0},children:"Home"}),Q.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",flexWrap:"wrap"},children:[Q.jsxs("div",{children:[Q.jsx("label",{children:"Select your faith: "}),Q.jsx("select",{value:W,onChange:tt=>rt(tt.target.value),style:ye.select,children:Object.keys($v).map(tt=>Q.jsx("option",{value:tt,children:tt},tt))})]}),Q.jsxs("div",{children:[Q.jsx("label",{children:"How are you feeling today? "}),Q.jsxs("select",{value:D,onChange:tt=>q(tt.target.value),style:ye.select,children:[Q.jsx("option",{value:"peaceful",children:"Peaceful"})," ",Q.jsx("option",{value:"grateful",children:"Grateful"}),Q.jsx("option",{value:"anxious",children:"Anxious"})," ",Q.jsx("option",{value:"inspired",children:"Inspired"})]})]})]})]}),Q.jsx("div",{style:{...ye.card,textAlign:"center",fontStyle:"italic",fontSize:"1.1rem",opacity:yt?1:0,transition:"opacity 0.5s ease-in-out",minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"center"},children:Q.jsxs("div",{children:['"',Xn?.text,'"',Q.jsxs("p",{style:{marginTop:"8px",fontStyle:"normal",fontWeight:"bold"},children:["— ",Xn?.source]})]})}),Q.jsx(bi,{})]}),ho=()=>Q.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",height:"calc(100vh - 4rem)"},children:[Q.jsx("div",{style:{gridColumn:"1 / -1"},children:Q.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",margin:0},children:"Daily Digest"})}),Q.jsxs("div",{style:{...ye.card,marginBottom:0},children:[Q.jsx("h2",{children:"Today’s Special"}),Q.jsx("p",{children:"Visit Tricycle for a daily spiritual reflection."}),Q.jsx("a",{href:"https://tricycle.org/dailydharma/",target:"_blank",rel:"noopener noreferrer",children:Q.jsx("button",{style:{marginTop:"1rem",padding:"10px 20px",fontSize:"16px",background:"#f5f5f5",color:"#111",border:"none",borderRadius:"8px",cursor:"pointer"},children:" Visit Reflection "})})]}),Q.jsxs("div",{style:{...ye.card,marginBottom:0,opacity:Ht?1:0,transition:"opacity 0.5s ease-in-out"},children:[Q.jsx("h2",{children:"Brief Reflection"}),Q.jsx("p",{style:{fontStyle:"italic",fontSize:"1.2rem"},children:qd[qt]})]}),Q.jsxs("div",{style:{...ye.card,gridColumn:"1 / -1",marginBottom:0},children:[Q.jsx("h2",{children:"Spiritual Songs"}),Q.jsx("ul",{style:{listStyle:"none",padding:0,maxHeight:"200px",overflowY:"auto"},children:Ai.map(tt=>Q.jsx("li",{style:{marginBottom:"0.5rem"},children:Q.jsx("a",{href:tt.link,target:"_blank",rel:"noopener noreferrer",style:{color:"lightblue",textDecoration:"underline"},children:tt.title})},tt.title))})]}),Q.jsx("div",{style:{...ye.card,gridColumn:"1 / -1",marginBottom:0},children:Q.jsx(bi,{})})]});return Q.jsxs("div",{style:{position:"relative",minHeight:"100vh",color:"white",fontFamily:"sans-serif",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[Q.jsx("iframe",{ref:pn,src:A2[D],title:"Mood Background",allow:"autoplay",frameBorder:"0",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,pointerEvents:"none"}}),i?Q.jsx("h2",{children:"Loading..."}):r?Q.jsxs(Q.Fragment,{children:[!Rn&&Q.jsxs("div",{style:ye.leftPane,children:[Q.jsx("h1",{style:{textAlign:"center",marginTop:0,fontSize:"1.5rem"},children:"ISM App"}),Q.jsx("button",{onClick:()=>C("home"),style:{...ye.navButton,...S==="home"&&ye.activeNavButton},children:"🏠 Home"}),Q.jsx("button",{onClick:()=>C("digest"),style:{...ye.navButton,...S==="digest"&&ye.activeNavButton},children:"☀️ Daily Digest"}),Q.jsx("hr",{style:{border:"1px solid rgba(255, 255, 255, 0.1)",margin:"1rem 0"}}),Q.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.8rem",color:"#aaa"},children:"MODES"}),Q.jsx("button",{onClick:()=>M(!0),style:ye.navButton,children:"🙏 Meditation"}),Q.jsx("button",{onClick:()=>ie(!0),style:ye.navButton,children:"🧘 Zen Mode"}),Q.jsxs("select",{onChange:tt=>{tt.target.value&&($(tt.target.value),Rt(!0))},value:"",style:ye.navSelect,children:[Q.jsx("option",{value:"",style:{background:"#333"},children:" 🏞️ Sacred Earth"}),Q.jsx("option",{value:"DeepForestDawn",style:{background:"#333"},children:"Deep Forest Dawn"}),Q.jsx("option",{value:"RiverEdge",style:{background:"#333"},children:"River’s Edge"}),Q.jsx("option",{value:"EmeraldThunder",style:{background:"#333"},children:"Emerald Thunderstorm"}),Q.jsx("option",{value:"CampfireNight",style:{background:"#333"},children:"Nightfall Campfire"}),Q.jsx("option",{value:"MorningSerenade",style:{background:"#333"},children:"Songbird Serenade"})]}),Q.jsx("button",{onClick:ln,style:{...ye.navButton,marginTop:"auto",background:"rgba(217, 83, 79, 0.3)"},children:"Logout"})]}),!Rn&&Q.jsxs("div",{style:{...ye.mainContent,alignItems:"normal",justifyContent:"normal"},children:[S==="home"&&Q.jsx(wi,{}),S==="digest"&&Q.jsx(ho,{})]}),N&&Q.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000",display:"flex",zIndex:1e4},children:[Q.jsx("div",{style:{flex:3,display:"flex",justifyContent:"center",alignItems:"center",padding:"1rem"},children:Q.jsx("iframe",{id:"meditationVideo",width:"100%",height:"100%",src:Hd[mt].url,title:Hd[mt].title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),Q.jsxs("div",{id:"meditationList",style:{flex:1,background:"#111",color:"#fff",padding:"20px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"10px"},children:[Q.jsx("h3",{children:"Select Meditation"}),Hd.map((tt,pt)=>Q.jsx("button",{onClick:()=>ve(pt),style:{padding:"10px",background:mt===pt?"#333":"#222",color:"#fff",border:"none",borderRadius:"6px",textAlign:"left",cursor:"pointer"},children:tt.title},tt.title))]}),Q.jsx("button",{onClick:()=>M(!1),style:{position:"absolute",bottom:"20px",right:"20px",padding:"12px 24px",fontSize:"16px",background:"#fff",color:"#000",border:"none",borderRadius:"8px",cursor:"pointer",zIndex:10001},children:" Exit Meditation "})]}),ce&&Q.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#111",color:"#fff",zIndex:9999,display:"flex",flexDirection:window.innerWidth<768?"column":"row",overflowY:"auto"},children:[Q.jsx("div",{style:{position:"absolute",top:"10px",width:"100%",textAlign:"center",fontSize:"18px",opacity:Ht?1:0,transition:"opacity 0.5s",color:"#ccc",zIndex:1e4},children:qd[qt]}),Q.jsxs("div",{style:{width:window.innerWidth<768?"100%":"30%",background:"#1a1a1a",padding:"20px",overflowY:"auto",borderRight:"1px solid #333"},children:[Q.jsx("h2",{style:{marginTop:0},children:"  📘  Journal History"}),Object.entries(I).sort(([tt],[pt])=>pt.localeCompare(tt)).map(([tt,pt])=>{const Ee=Ft[tt]?.trim()===pt.text?.trim();return Q.jsxs("div",{onClick:()=>Pt(tt),style:{padding:"10px",marginBottom:"10px",background:st===tt?"#333":"#222",borderRadius:"5px",cursor:"pointer"},children:[Q.jsx("strong",{children:new Date(tt).toDateString()}),Q.jsxs("p",{style:{fontSize:"12px",color:"#ccc"},children:[pt.text.slice(0,60),pt.text.length>60?"...":""]}),Q.jsxs("button",{onClick:Mt=>{Mt.stopPropagation();let wt=JSON.parse(localStorage.getItem("gratefulMemories")||"[]");const de=wt.findIndex(Wn=>Wn.date===tt&&Wn.content===pt);de!==-1?(wt.splice(de,1),alert("  ❌   Removed from Grateful Memories")):(wt.push({date:tt,content:pt}),alert("  ⭐   Marked as Grateful Memory!")),localStorage.setItem("gratefulMemories",JSON.stringify(wt));const Ce={};wt.forEach(Wn=>{Ce[Wn.date]=Wn.content}),mn(Ce)},children:[" ",Ee?" ❌  Unmark Grateful":" 💖  Mark as Grateful"," "]})]},tt)})]}),Q.jsxs("div",{style:{flex:1,padding:"30px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},children:[Q.jsx("h1",{children:"  🧘  Zen Mode"}),Q.jsx("input",{type:"date",value:st,onChange:tt=>Pt(tt.target.value),style:{marginBottom:"20px",fontSize:"16px",padding:"6px",borderRadius:"4px",border:"1px solid #666",background:"#222",color:"#fff"}}),Q.jsx("iframe",{width:"0",height:"0",src:"https://www.youtube.com/embed/EK7tN-LVgxo?autoplay=1&loop=1&playlist=EK7tN-LVgxo",title:"Zen Music",allow:"autoplay",style:{display:"none"}}),Q.jsx("button",{onClick:()=>R(!V),style:{marginBottom:"16px",padding:"10px 16px",background:V?"#ffe0b2":"#dcedc8",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"15px"},children:V?"← Back to Journal":" 💖  View Grateful Memories"}),V?Q.jsxs("div",{style:{background:"#fff8e1",padding:"20px",borderRadius:"10px",color:"#333",fontSize:"16px",height:"60vh",overflowY:"auto",width:"100%"},children:[Q.jsx("h3",{style:{color:"#c62828",marginBottom:"10px"},children:"  💖  Your Grateful Memories"}),Object.keys(Ft).length===0?Q.jsx("p",{children:"No grateful memories saved yet."}):Object.entries(Ft).filter(([tt,pt])=>pt&&pt.trim()).map(([tt,pt])=>Q.jsxs("div",{style:{background:"#fff",marginBottom:"10px",padding:"10px",borderRadius:"6px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[Q.jsx("strong",{children:tt}),Q.jsx("p",{style:{margin:"5px 0"},children:pt})]},tt)),Q.jsx("button",{onClick:()=>{const tt=Object.entries(Ft).filter(([wt,de])=>de&&de.trim()).map(([wt,de])=>`${wt}
${de}

`).join(""),pt=new Blob([tt],{type:"text/plain"}),Ee=URL.createObjectURL(pt),Mt=document.createElement("a");Mt.href=Ee,Mt.download="Grateful_Memories.txt",Mt.click(),URL.revokeObjectURL(Ee)},style:{marginTop:"10px",padding:"10px 16px",background:"#aed581",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:"pointer"},children:"  📥  Download as .txt "})]}):Q.jsxs(Q.Fragment,{children:[Q.jsx("textarea",{placeholder:"Let your thoughts flow here...",value:H,onChange:tt=>nt(tt.target.value),style:{width:"100%",height:"60vh",padding:"20px",fontSize:"16px",background:"#222",color:"#fff",border:"none",borderRadius:"8px",resize:"none"}}),Q.jsx("button",{onClick:()=>{if(!H||!H.trim()){alert("Cannot mark an empty entry as grateful.");return}let tt=JSON.parse(localStorage.getItem("gratefulMemories")||"[]");const pt=tt.findIndex(Ee=>Ee.date===st);pt!==-1?tt[pt].content=H:tt.push({date:st,content:H}),localStorage.setItem("gratefulMemories",JSON.stringify(tt)),mn(Ee=>({...Ee,[st]:H})),alert(" ⭐  Marked as Grateful Memory!")},style:{marginTop:"10px",padding:"8px 12px",background:"#ffd54f",color:"#000",fontWeight:"bold",border:"none",borderRadius:"6px",cursor:"pointer"},children:"  ⭐  Mark as Grateful Memory "})]}),Q.jsxs("div",{style:{width:"100%",marginTop:"1.5rem"},children:[Q.jsx("button",{onClick:co,disabled:I[st]?.reflection,style:{...ye.navButton,width:"auto",textAlign:"center",background:"rgba(142, 68, 173, 0.8)",cursor:I[st]?.reflection?"not-allowed":"pointer"},children:I[st]?.reflection?"Reflection Generated":"✨ Get AI Reflection"}),I[st]?.reflection&&Q.jsxs("div",{style:{...ye.card,background:"rgba(255, 255, 255, 0.1)",marginTop:"1rem",textAlign:"left"},children:[Q.jsx("h4",{style:{marginTop:0,color:"#f1c40f"},children:"Reflection Coach says:"}),Q.jsx("p",{style:{whiteSpace:"pre-wrap",lineHeight:"1.6"},children:I[st].reflection})]})]}),Q.jsx("button",{onClick:()=>{ie(!1);const tt=pn.current;tt&&tt.contentWindow&&tt.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},style:{position:"absolute",top:"20px",right:"20px",padding:"10px 16px"},children:" Exit Zen Mode "})]})]}),ct&&Q.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Q.jsx("iframe",{src:b2[it],title:"Sacred Earth Background",frameBorder:"0",allow:"autoplay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:-1}}),Q.jsx("button",{onClick:()=>{$(""),Rt(!1)},style:{position:"fixed",bottom:"20px",right:"20px",padding:"12px 24px",fontSize:"16px",background:"#fff",color:"#000",border:"none",borderRadius:"8px",cursor:"pointer",zIndex:10001},children:" Exit Sacred Earth Mode "})]})]}):Q.jsx(I2,{isLoginView:g,setIsLoginView:_,authEmail:l,setAuthEmail:c,authPassword:d,setAuthPassword:p,handleLogin:Xs,handleSignup:es})]})}const I2=({isLoginView:r,setIsLoginView:t,authEmail:i,setAuthEmail:s,authPassword:l,setAuthPassword:c,handleLogin:d,handleSignup:p})=>{const g={width:"100%",maxWidth:"400px",margin:"auto",padding:"2rem",background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",display:"flex",flexDirection:"column",gap:"1rem"},_={padding:"0.75rem",borderRadius:"8px",border:"1px solid #555",background:"#333",color:"white",fontSize:"1rem"},S={padding:"0.75rem",borderRadius:"8px",border:"none",background:"#f5f5f5",color:"#111",fontSize:"1rem",fontWeight:"bold",cursor:"pointer"},C={background:"none",border:"none",color:"lightblue",textDecoration:"underline",cursor:"pointer",marginTop:"0.5rem"};return Q.jsxs("div",{style:g,children:[Q.jsx("h2",{children:r?"Login":"Sign Up"}),Q.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:D=>s(D.target.value),style:_}),Q.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:D=>c(D.target.value),style:_}),Q.jsx("button",{onClick:r?d:p,style:S,children:r?"Login":"Sign Up"}),Q.jsx("button",{onClick:()=>t(!r),style:C,children:r?"Need an account? Sign Up":"Already have an account? Login"})]})};iA.createRoot(document.getElementById("root")).render(Q.jsx(jt.StrictMode,{children:Q.jsx(R2,{})}));
